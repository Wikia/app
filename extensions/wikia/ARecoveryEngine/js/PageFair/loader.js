/* loader-6.3.0 */!function e(n,t,i){function o(a,s){if(!t[a]){if(!n[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[a]={exports:{}};n[a][0].call(l.exports,function(e){var t=n[a][1][e];return o(t?t:e)},l,l.exports,e,n,t,i)}return t[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,n,t){e(40);var i=e(11);i.run()},{11:11,40:40}],2:[function(e,n,t){function i(){return o(window)&&a(window)&&s(window)&&r(window)&&c(window)}function o(e){var n="__xyz__";try{return e.localStorage.setItem(n,n),e.localStorage.removeItem(n),!0}catch(t){return!1}}function r(e){try{return!!new e.Blob}catch(n){return!1}}function a(e){var n=function(n){return n.some(function(n){return n in e})},t=["RTCPeerConnection","mozRTCPeerConnection","webkitRTCPeerConnection"],i=["RTCSessionDescription","mozRTCSessionDescription","webkitRTCSessionDescription"],o=["RTCIceCandidate","mozRTCIceCandidate","webkitRTCIceCandidate"];return n(t)&&n(i)&&n(o)}function s(e){return"Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise}function c(e){return"function"==typeof e.Object.assign}n.exports={isSupportedBrowser:i,isLocalStorageSupported:o,isRtcSupported:a,isBlobSupported:r,isObjectAssignSupported:c,isPromiseSupported:s}},{}],3:[function(e,n,t){var i=e(4);window.adonisHash=window.adonisHash||window.location.hash||"";var o=window.adonisHash.indexOf("adonis-logging")>=0;i.LOG_LEVEL=o?"debug":i.LOG_LEVEL,n.exports=i},{4:4}],4:[function(e,n,t){n.exports={REAL_STUN_HOST:"stun.xpanama.net:3478",TURNSIGNAL_HOST:"ts.p.xpanama.net:7000",STUNGUN_HOST:"sg.p.xpanama.net:3480",SERVER_CANDIDATE:"candidate:827648026 1 udp 2122194687 SERVER_IP SERVER_PORT typ host generation 0",REPORTING_URL:"https://lb.statsevent.com/stats",REPORTING_RATE:.01,LOG_LEVEL:"error",REPORT_ERRORS:!0,MANIFEST_URL:"https://sri.jsintegrity.com/manifest.json",MANIFEST_EXPIRATION_TIME:86400,AD_MARKER:"adonis-marker",ADONIS_CLIENT_FETCH_URL:"https://adserver.xpanama.net/client-6-latest.js"}},{}],5:[function(e,n,t){function i(e){a.suggest.clear().deny("adonis-bootstrap",e)}function o(){r=a("adonis-bootstrap"),a.enable(),i(s.LOG_LEVEL)}var r,a=e(21),s=e(3);r||o(),n.exports={logger:r,setLevel:i,setup:o}},{21:21,3:3}],6:[function(e,n,t){function i(){return r.debug("Loading manifest"),a.request(o.MANIFEST_URL).then(function(e){try{return JSON.parse(e.responseText)}catch(n){return r.debug("Error parsing the manifest",n),s.reportEvent("bootstrap.manifest_content_error"),{}}})["catch"](function(e){return r.debug("Error loading the manifest",e),s.reportEvent("bootstrap.manifest_fetch_error"),null})}var o=e(3),r=e(5).logger,a=e(10),s=e(8);n.exports={load:i}},{10:10,3:3,5:5,8:8}],7:[function(e,n,t){function i(e,n){var t=document.createElement("script");t.src=e,n&&(t.integrity=n),document.head.appendChild(t)}function o(e,n){var t=new window.XMLHttpRequest;try{t.open("GET",e,!0),t.addEventListener("readystatechange",function(e){4===t.readyState&&0===t.status&&r(n)}),t.send()}catch(i){a.warn("Falling back to inserting inline script"),r(n)}}function r(e){var n=document.createElement("script");n.innerHTML=e,document.head.appendChild(n)}var a=e(5).logger;n.exports={insertBlobScript:i,testBlobAndInsertFallback:o}},{5:5}],8:[function(e,n,t){function i(e){var n=new XMLHttpRequest,t=[u.REPORTING_URL,e].join("");n.open("GET",t,!0),n.send()}function o(e){u.REPORT_ERRORS&&i("/adonis_error?e="+e.toString())}function r(){return null!=window.ADONIS_BOOTSTRAP_STATS?window.ADONIS_BOOTSTRAP_STATS===!0:Math.random()<u.REPORTING_RATE}function a(e,n){if(s(e),r()){var t={website:window.location.hostname,key:e};null!=n&&(t.quantity=n),i(["/adonis_event/?event=",JSON.stringify(t)].join(""))}}function s(e){var n={key:e,time_ms:Math.round(window.performance.now()),website:window.location.hostname};d.push(n)}function c(){l.defineReadOnlyProperty("adonisBootstrapTiming",d)}var u=e(3),l=e(9),d=[];n.exports={reportError:o,reportEvent:a,saveTiming:c,shouldReport:r}},{3:3,9:9}],9:[function(e,n,t){function i(e,n){try{Object.defineProperty(window,e,{value:n,writable:!1})}catch(t){o.warn("Cannot define read-only property of window object: "+t)}}var o=e(5).logger,r=function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)};n.exports={defineReadOnlyProperty:i,ready:r}},{5:5}],10:[function(e,n,t){function i(e,n,t){return n=n||"GET",t=t||null,new window.Promise(function(i,o){var r=new window.XMLHttpRequest;r.open(n,e,!0),r.onload=function(){r.status>=400?o(r):i(r)},r.onerror=function(){o(r)},r.send(t)})}n.exports={request:i}},{}],11:[function(e,n,t){function i(){if(m.debug("Starting bootstrap"),p.reportEvent("bootstrap.pageview"),h.isSupportedBrowser())return p.reportEvent("bootstrap.supported"),o().then(function(e){m.debug("Running adonisClient source"),p.reportEvent("bootstrap.runclientscript"),p.saveTiming();var n=e.meta.conn||null;d.defineReadOnlyProperty("adonisConn",n),d.defineReadOnlyProperty("adonisConfig",l);var t=e.meta["adonis-client-version"],i=e.meta["cache-control"],o=i&&i.startsWith("max-age"),r=e.meta.expiryMillis||0;if(o){m.debug(i);var a=parseInt(i.split("=")[1],10);isNaN(a)||(r=(new Date).getTime()+1e3*a)}if(e.source){t&&(m.debug("new expiry",r,new Date(r)),s(e.source,t,r));var c=new Blob([e.source],{type:"text/javascript"}),u=URL.createObjectURL(c),f=e.manifest,h=f&&f.hasOwnProperty(t)?f[t]:null;v.insertBlobScript(u,h),v.testBlobAndInsertFallback(u,e.source)}return e})["catch"](function(e){m.warn("Error on `run`:",e),p.reportError(e)})}function o(){return r().then(function(e){return e.source?(e.manifest=null,e):Promise.all([g.load(),a()]).then(function(e){var n=e[0],t=e[1];return t.manifest=n,t})}).then(function(e){return e.source?e:c().then(function(n){return Object.assign(e.meta,n.meta),e.source=n.source,e})}).then(function(e){return e.source=e.source||e.meta.cachedSource,e})}function r(){return m.debug("loading adonis-client over http"),u.request(l.ADONIS_CLIENT_FETCH_URL).then(function(e){var n={"adonis-client-version":null};try{n["cache-control"]=e.getResponseHeader("cache-control")}catch(t){}return{source:e.responseText,meta:n}})["catch"](function(e){return m.debug("failed to load adonis-client over http",e),p.reportEvent("bootstrap.client_http_fetch_error"),{source:null,meta:{}}})}function a(){m.debug("loading adonis-client from localStorage"),window.localStorage.adonisCacheExpiry&&window.localStorage.removeItem("adonisCacheExpiry");var e=parseInt(window.localStorage.adonisCacheExpiryMillis,10);(null==e||isNaN(e))&&(e=0);var n=window.localStorage.adonisClientVersion,t=window.localStorage.adonisCacheSrc,i=(new Date).getTime()<e&&t?t:null,o={"adonis-client-version":n,expiryMillis:e,cachedSource:t};return t?i?m.debug("Found a valid cached version of adonis-client"):m.debug("Cached version of adonis-client is expired"):m.debug("No cached version of adonis-client found in the localStorage"),{source:i,meta:o}}function s(e,n,t){window.localStorage.adonisCacheSrc=e,window.localStorage.adonisCacheExpiryMillis=t,window.localStorage.adonisClientVersion=n}function c(){function e(e,n){return{host:"assets",path:e,headers:n}}return m.debug("Loading adonis-client over panama"),new Promise(function(n,t){function i(e){m.debug("Error loading adonis-client over panama",e),p.reportError(e),t({body:null,meta:null})}var o=new f(l.SERVER_CANDIDATE,l.REAL_STUN_HOST,l.TURNSIGNAL_HOST,l.STUNGUN_HOST,i);l.PANAMA_CLIENT&&l.PANAMA_CLIENT.SKIP_IP_LEAK_CHECK&&(o.skipIpLeakCheck=l.PANAMA_CLIENT.SKIP_IP_LEAK_CHECK),l.PANAMA_CLIENT&&l.PANAMA_CLIENT.CANDIDATE_WHITELISTED_IP&&(o.candidateWhitelistedIp=l.PANAMA_CLIENT.CANDIDATE_WHITELISTED_IP),o.setLogLevel(l.LOG_LEVEL),o.on("open",function(){p.reportEvent("bootstrap.panama_opened");var i=e("client",{adonis_client_api:"6.1.0"});o.request(i,function(e,i,r){p.reportEvent("bootstrap.client_fetched."+r);var a=i||{};if(a.conn=o,304===r)m.debug("No change for adonis-client from panama"),n({source:null,meta:a});else if(200===r)m.debug("Adonis-client client fetched from panama successfully"),n({source:e,meta:a});else{var s={body:e,header:i,status:r};m.debug("Error loading adonis-client over panama",s),t(s)}})}),p.reportEvent("bootstrap.panama_opening"),o.open()})}var u=e(10),l=e(3),d=e(9),p=e(8),f=e(25),h=e(2),g=e(6),v=e(7),m=e(5).logger;n.exports={run:i,loadAdonisClient:o,loadAdonisClientByHttp:r,loadCachedAdonisClient:a,loadAdonisClientByRtc:c,cacheAdonisClient:s}},{10:10,2:2,25:25,3:3,5:5,6:6,7:7,8:8,9:9}],12:[function(e,n,t){function i(){this._events={}}i.prototype={on:function(e,n){this._events||(this._events={});var t=this._events;return(t[e]||(t[e]=[])).push(n),this},removeListener:function(e,n){var t,i=this._events[e]||[];for(t=i.length-1;t>=0&&i[t];t--)i[t]!==n&&i[t].cb!==n||i.splice(t,1)},removeAllListeners:function(e){e?this._events[e]&&(this._events[e]=[]):this._events={}},emit:function(e){this._events||(this._events={});var n,t=Array.prototype.slice.call(arguments,1),i=this._events[e]||[];for(n=i.length-1;n>=0&&i[n];n--)i[n].apply(this,t);return this},when:function(e,n){return this.once(e,n,!0)},once:function(e,n,t){function i(){t||this.removeListener(e,i),n.apply(this,arguments)&&t&&this.removeListener(e,i)}return n?(i.cb=n,this.on(e,i),this):this}},i.mixin=function(e){var n,t=i.prototype;for(n in t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])},n.exports=i},{}],13:[function(e,n,t){function i(){this.enabled=!0,this.defaultResult=!0,this.clear()}function o(e,n){return e.n.test?e.n.test(n):e.n==n}var r=e(15),a={debug:1,info:2,warn:3,error:4};r.mixin(i),i.prototype.allow=function(e,n){return this._white.push({n:e,l:a[n]}),this},i.prototype.deny=function(e,n){return this._black.push({n:e,l:a[n]}),this},i.prototype.clear=function(){return this._white=[],this._black=[],this},i.prototype.test=function(e,n){var t,i=Math.max(this._white.length,this._black.length);for(t=0;t<i;t++){if(this._white[t]&&o(this._white[t],e)&&a[n]>=this._white[t].l)return!0;if(this._black[t]&&o(this._black[t],e)&&a[n]<=this._black[t].l)return!1}return this.defaultResult},i.prototype.write=function(e,n,t){if(!this.enabled||this.test(e,n))return this.emit("item",e,n,t)},n.exports=i},{15:15}],14:[function(e,n,t){var i=e(15),o=e(13),r=new i,a=Array.prototype.slice;t=n.exports=function(e){var n=function(){return r.write(e,void 0,a.call(arguments)),n};return n.debug=function(){return r.write(e,"debug",a.call(arguments)),n},n.info=function(){return r.write(e,"info",a.call(arguments)),n},n.warn=function(){return r.write(e,"warn",a.call(arguments)),n},n.error=function(){return r.write(e,"error",a.call(arguments)),n},n.log=n.debug,n.suggest=t.suggest,n.format=r.format,n},t.defaultBackend=t.defaultFormatter=null,t.pipe=function(e){return r.pipe(e)},t.end=t.unpipe=t.disable=function(e){return r.unpipe(e)},t.Transform=i,t.Filter=o,t.suggest=new o,t.enable=function(){return t.defaultFormatter?r.pipe(t.suggest).pipe(t.defaultFormatter).pipe(t.defaultBackend):r.pipe(t.suggest).pipe(t.defaultBackend)}},{13:13,15:15}],15:[function(e,n,t){function i(){}var o=e(24);o.mixin(i),i.prototype.write=function(e,n,t){this.emit("item",e,n,t)},i.prototype.end=function(){this.emit("end"),this.removeAllListeners()},i.prototype.pipe=function(e){function n(){e.write.apply(e,Array.prototype.slice.call(arguments))}function t(){!e._isStdio&&e.end()}var i=this;return i.emit("unpipe",e),e.emit("pipe",i),i.on("item",n),i.on("end",t),i.when("unpipe",function(o){var r=o===e||"undefined"==typeof o;return r&&(i.removeListener("item",n),i.removeListener("end",t),e.emit("unpipe")),r}),e},i.prototype.unpipe=function(e){return this.emit("unpipe",e),this},i.prototype.format=function(e){throw new Error(["Warning: .format() is deprecated in Minilog v2! Use .pipe() instead. For example:","var Minilog = require('minilog');","Minilog","  .pipe(Minilog.backends.console.formatClean)","  .pipe(Minilog.backends.console);"].join("\n"))},i.mixin=function(e){var n,t=i.prototype;for(n in t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])},n.exports=i},{24:24}],16:[function(e,n,t){var i=e(15),o=[],r=new i;r.write=function(e,n,t){o.push([e,n,t])},r.get=function(){return o},r.empty=function(){o=[]},n.exports=r},{15:15}],17:[function(e,n,t){var i=e(15),o=/\n+$/,r=new i;r.write=function(e,n,t){var i=t.length-1;if("undefined"!=typeof console&&console.log){if(console.log.apply)return console.log.apply(console,[e,n].concat(t));if(JSON&&JSON.stringify){t[i]&&"string"==typeof t[i]&&(t[i]=t[i].replace(o,""));try{for(i=0;i<t.length;i++)t[i]=JSON.stringify(t[i])}catch(r){}console.log(t.join(" "))}}},r.formatters=["color","minilog"],r.color=e(18),r.minilog=e(19),n.exports=r},{15:15,18:18,19:19}],18:[function(e,n,t){var i=e(15),o=e(20),r={debug:["cyan"],info:["purple"],warn:["yellow",!0],error:["red",!0]},a=new i;a.write=function(e,n,t){var i=console.log;console[n]&&console[n].apply&&(i=console[n],i.apply(console,["%c"+e+" %c"+n,o("gray"),o.apply(o,r[n])].concat(t)))},a.pipe=function(){},n.exports=a},{15:15,20:20}],19:[function(e,n,t){var i=e(15),o=e(20),r={debug:["gray"],info:["purple"],warn:["yellow",!0],error:["red",!0]},a=new i;a.write=function(e,n,t){var i=console.log;"debug"!=n&&console[n]&&(i=console[n]);var a=0;if("info"!=n){for(;a<t.length&&"string"==typeof t[a];a++);i.apply(console,["%c"+e+" "+t.slice(0,a).join(" "),o.apply(o,r[n])].concat(t.slice(a)))}else i.apply(console,["%c"+e,o.apply(o,r[n])].concat(t))},a.pipe=function(){},n.exports=a},{15:15,20:20}],20:[function(e,n,t){function i(e,n){return n?"color: #fff; background: "+o[e]+";":"color: "+o[e]+";"}var o={black:"#000",red:"#c23621",green:"#25bc26",yellow:"#bbbb00",blue:"#492ee1",magenta:"#d338d3",cyan:"#33bbc8",gray:"#808080",purple:"#708"};n.exports=i},{}],21:[function(e,n,t){var i=e(14),o=i.enable,r=i.disable,a="undefined"!=typeof navigator&&/chrome/i.test(navigator.userAgent),s=e(17);if(i.defaultBackend=a?s.minilog:s,"undefined"!=typeof window){try{i.enable(JSON.parse(window.localStorage.minilogSettings))}catch(c){}if(window.location&&window.location.search){var u=RegExp("[?&]minilog=([^&]*)").exec(window.location.search);u&&i.enable(decodeURIComponent(u[1]))}}i.enable=function(){o.call(i,!0);try{window.localStorage.minilogSettings=JSON.stringify(!0)}catch(e){}return this},i.disable=function(){r.call(i);try{delete window.localStorage.minilogSettings}catch(e){}return this},t=n.exports=i,t.backends={array:e(16),browser:i.defaultBackend,localStorage:e(23),jQuery:e(22)}},{14:14,16:16,17:17,22:22,23:23}],22:[function(e,n,t){function i(e){this.url=e.url||"",this.cache=[],this.timer=null,this.interval=e.interval||3e4,this.enabled=!0,this.jQuery=window.jQuery,this.extras={}}var o=e(15),r=(new Date).valueOf().toString(36);o.mixin(i),i.prototype.write=function(e,n,t){this.timer||this.init(),this.cache.push([e,n].concat(t))},i.prototype.init=function(){if(this.enabled&&this.jQuery){var e=this;this.timer=setTimeout(function(){var n,t,i=[],o=e.url;if(0==e.cache.length)return e.init();for(n=0;n<e.cache.length;n++)try{JSON.stringify(e.cache[n]),i.push(e.cache[n])}catch(a){}e.jQuery.isEmptyObject(e.extras)?(t=JSON.stringify({logs:i}),o=e.url+"?client_id="+r):t=JSON.stringify(e.jQuery.extend({logs:i},e.extras)),e.jQuery.ajax(o,{type:"POST",cache:!1,processData:!1,data:t,contentType:"application/json",timeout:1e4}).success(function(n,t,i){n.interval&&(e.interval=Math.max(1e3,n.interval))}).error(function(){e.interval=3e4}).always(function(){e.init()}),e.cache=[]},this.interval)}},i.prototype.end=function(){},i.jQueryWait=function(e){return"undefined"!=typeof window&&(window.jQuery||window.$)?e(window.jQuery||window.$):void("undefined"!=typeof window&&setTimeout(function(){i.jQueryWait(e)},200))},n.exports=i},{15:15}],23:[function(e,n,t){var i=e(15),o=!1,r=new i;r.write=function(e,n,t){if("undefined"!=typeof window&&"undefined"!=typeof JSON&&JSON.stringify&&JSON.parse)try{o||(o=window.localStorage.minilog?JSON.parse(window.localStorage.minilog):[]),o.push([(new Date).toString(),e,n,t]),window.localStorage.minilog=JSON.stringify(o)}catch(i){}},n.exports=r},{15:15}],24:[function(e,n,t){function i(){this._events={}}i.prototype={on:function(e,n){this._events||(this._events={});var t=this._events;return(t[e]||(t[e]=[])).push(n),this},removeListener:function(e,n){var t,i=this._events[e]||[];for(t=i.length-1;t>=0&&i[t];t--)i[t]!==n&&i[t].cb!==n||i.splice(t,1)},removeAllListeners:function(e){e?this._events[e]&&(this._events[e]=[]):this._events={}},listeners:function(e){return this._events?this._events[e]||[]:[]},emit:function(e){this._events||(this._events={});var n,t=Array.prototype.slice.call(arguments,1),i=this._events[e]||[];for(n=i.length-1;n>=0&&i[n];n--)i[n].apply(this,t);return this},when:function(e,n){return this.once(e,n,!0)},once:function(e,n,t){function i(){t||this.removeListener(e,i),n.apply(this,arguments)&&t&&this.removeListener(e,i)}return n?(i.cb=n,this.on(e,i),this):this}},i.mixin=function(e){var n,t=i.prototype;for(n in t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])},n.exports=i},{}],25:[function(e,n,t){function i(e,n,t,i,o){this.realStunHost=n,this.turnSignalHost=t,this.stunGunHost=i,this.serverCandidate=e,this.nodePeerPort=null,this.nodePeerIp=null,this.localCandidates=[],this.sentDataToTurn=!1,this.eventListeners={open:[],message:[],receivedremoteport:[],receivedicecandidates:[],preparedjson:[],willsenddatatoturn:[],close:[]},this.ips={},this.requests={},this.isOpen=!1,o&&(this.handleError=o),this.timingEvents=[],this.skipIpLeakCheck=!1,this.candidateWhitelistedIp=null}function o(){var e=this,n={iceServers:[{url:"stun:"+this.stunGunHost,urls:["stun:"+this.stunGunHost],username:"test",credential:"test"}]};w.info("Connecting to stungun server : "+this.stunGunHost);var t=this.stunGunPeerConnection=new C(n);t.createDataChannel(""),t.createOffer(function(n){t.setLocalDescription(n,function(){e.addTimingEvent("requestingServerIp",performance.now()-e.estConnectionStart)},function(){})},function(){}),t.onicecandidate=function(n){if(null!==n.candidate){var i=n.candidate.candidate;if(w.debug("onicecandidate: "+i),e.skipIpLeakCheck||e.checkCandidateIpLeak(i),g.isServerReflexive(i)&&!g.isIPv6(i)){t.close();var o=g.matchNodePeerIpAndPort(i);if(null!==o){e.addTimingEvent("serverIpReceived",performance.now()-e.estConnectionStart),e.nodePeerIp=o[1],e.nodePeerPort=o[2],w.info("ip and port to connect on: "+e.nodePeerIp+":"+e.nodePeerPort);var r=e.serverCandidate.replace(/SERVER_PORT/g,e.nodePeerPort);r=r.replace(/SERVER_IP/g,e.nodePeerIp),w.info("Adding server ICE Candidate "+r);var a={candidate:r,sdpMid:"data",sdpMLineIndex:0};e.peerConnection.addIceCandidate(new E(a),h,e.handleError),e.triggerEvent("receivedremoteport"),e.remoteCandidateReceived=!0,l.call(e)}}}}}function r(){var e=this.peerConnection=new C({iceServers:[{url:"stun:"+this.realStunHost,urls:["stun:"+this.realStunHost]}]}),n=this;this.peerConnection.onicecandidate=function(e){if(null!==e.candidate){var t=e.candidate.candidate;w.info("RECEVIED LOCAL CANDIDATE "+t),n.skipIpLeakCheck||n.checkCandidateIpLeak(t);var i=g.isServerReflexive(t);n.candidateWhitelistedIp&&(i=t.indexOf(n.candidateWhitelistedIp)&&!g.isServerReflexive(t)),i&&!g.isIPv6(t)&&(n.addTimingEvent("iceCandidate",performance.now()-n.estConnectionStart),n.localCandidates.push(t),n.localCandidateReceived=!0,l.call(n))}},this.peerConnection.ondatachannel=function(e){n.dataChannel=e.channel,n.turnSignalPeerConnection.close(),w.info("ondatachannel",n.dataChannel.label,n.dataChannel.readyState),n.dataChannel.binaryType="arraybuffer",n.dataChannel.onopen=function(){n.isOpen=!0,w.info("onopen");var e=performance.now(),t=e-n.estConnectionStart;n.addTimingEvent("dataChannelOpen",t);var i={host:"test"};n.request(i,function(){var t=performance.now()-e;n.addTimingEvent("msgRoundTrip",t),clearTimeout(n.connectionTimeout),setTimeout(function(){n.close()},T)}),w.info("TIMING:total "+t),w.info("onopen"),n.triggerEvent("open"),n.messageSendStartTime=performance.now()},n.dataChannel.onmessage=function(e){var t=e.data;w.info("Received response chunk",t),n.triggerEvent("message",t);try{var i=v.handleChunk(t)}catch(o){return void w.error("Failed to process chunked response: ",o)}i&&(w.info("Received complete response. Handling it"),a.call(n,i.id,i.http))},n.dataChannel.onclose=function(){w.info("onClose"),n.triggerEvent("close")},n.dataChannel.onerror=n.handleError},this.peerConnection.onsignalingstatechange=function(){w.info("signaling state change: ",e.iceConnectionState)},this.peerConnection.oniceconnectionstatechange=function(){var t=performance.now();w.info("ice connection state change: ",e.iceConnectionState,"after ",t-n.estConnectionStart,"millis")},this.peerConnection.onicegatheringstatechange=function(){w.info("ice gathering state change: ",e.iceConnectionState)},s.call(this)}function a(e,n){var t=n.headers;t&&t["set-cookie"]&&(document.cookie=t["set-cookie"]);var i=this.requests[e];i(n.body,n.headers,n.status),delete this.requests[e]}function s(){var e={type:"offer",sdp:"v=0\r\no=- 7745999191240241858 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\na=msid-semantic: WMS\r\nm=application 9 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=ice-ufrag:3qmHhNXjf0LEoY5G\r\na=ice-pwd:D9uox96QDNbrCdbN9WUlLAJu\r\na=ice-options:google-ice\r\na=fingerprint:sha-1 8E:5A:C4:E7:A7:53:E8:C1:39:19:59:47:4F:4C:E8:54:F7:38:DF:A2\r\na=setup:actpass\r\na=mid:data\r\na=sctpmap:5000 webrtc-datachannel 1024\r\n"};w.info("SETTING HARD CODED offer data : "+e.sdp);var n=new S(e);this.peerConnection.setRemoteDescription(n,c.bind(this),this.handleError),c.bind(this)}function c(){this.peerConnection.createAnswer(u.bind(this),this.handleError),this.iceCandidateStartTime=performance.now()}function u(e){this.answer=e,this.peerConnection.setLocalDescription(new S(e),d.bind(this),this.handleError),this.localDescriptionSet=!0,l.call(this)}function l(){!this.sentDataToTurn&&this.remoteCandidateReceived&&this.localCandidateReceived&&this.localDescriptionSet&&(w.debug("sending data to TURN"),p.call(this),this.sentDataToTurn=!0)}function d(){w.info("Sending answer"),this.addTimingEvent("setLocalDesc",performance.now()-this.estConnectionStart)}function p(){this.triggerEvent("receivedicecandidates");var e=performance.now();w.info("TIMING:ice_candidates "+(e-this.iceCandidateStartTime));var n=/a=ice-ufrag:[ -z]*/,t=/a=ice-pwd:[ -z]*/,i=/a=fingerprint:[A-z0-9\-]* [0-F:]*/,o=/o=-?\S* [0-9]+ [0-9] IN IP4 [0-9\.]+/,r=performance.now();w.info("Before matching regexes"+(r-this.estConnectionStart)),w.info(this.answer.sdp);var a=this.answer.sdp.match(n),s=this.answer.sdp.match(t),c=this.answer.sdp.match(i),u=this.answer.sdp.match(o);w.info("UFRAG:"+a),w.info("PWD:"+s),w.info("FINGERPRINT:"+c),w.info("O=:"+u);var l=[this.localCandidates];l.push(a[0]),l.push(s[0]),l.push(c[0]),l.push(u[0]);var d=new Uint8Array(8);window.crypto.getRandomValues(d);var p=String.fromCharCode.apply(null,d);l.push(p),l.push(this.nodePeerIp),l.push(this.nodePeerPort),this.triggerEvent("preparedjson",l);var h=performance.now();w.info("After matching regexes"+(h-this.estConnectionStart));var g=performance.now();w.info("Before jsonifying candidates"+(g-this.estConnectionStart));var v=JSON.stringify(l),m=performance.now();w.info("After jsonifying candidates"+(m-this.estConnectionStart)),f.call(this,v)}function f(e){this.triggerEvent("willsenddatatoturn",e);var n=performance.now()-this.estConnectionStart;this.addTimingEvent("turnPrep",n),w.debug("Sending data to turn @ "+this.turnSignalHost+" after "+n+" millis");var t={iceServers:[{url:"turn:"+this.turnSignalHost,urls:["turn:"+this.turnSignalHost],username:e,credential:"x"}]};this.turnSignalPeerConnection=new C(t),this.turnSignalPeerConnection.createDataChannel("");var i=this;this.turnSignalPeerConnection.createOffer(function(e){var n=performance.now(),t=n-i.estConnectionStart;i.addTimingEvent("turnSend",t),w.info("Fake offer generated which should trigger TURN request after "+(n-i.estConnectionStart)+" millis"),i.turnSignalPeerConnection.setLocalDescription(e,function(){},function(){})},function(){})}function h(){w.info("Successfully added ICE candidate")}const g=e(37),v=e(39),m=e(34);m.enable();const w=m("panama-client"),y=e(38).getProtectedContext();var C=y.RTCPeerConnection||y.mozRTCPeerConnection||y.webkitRTCPeerConnection,S=y.RTCSessionDescription||y.mozRTCSessionDescription||y.webkitRTCSessionDescription,E=y.RTCIceCandidate||y.mozRTCIceCandidate||y.webkitRTCIceCandidate,b=15e3,T=3e5;i.prototype.handleError=function(){},i.prototype.getTimingEvents=function(){return this.timingEvents},i.prototype.addTimingEvent=function(e,n){var t={name:"t_"+e,timing:n};this.timingEvents.push(t)},i.prototype.open=function(){var e=this;this.connectionTimeout=setTimeout(function(){e.close()},b),this.estConnectionStart=performance.now(),setTimeout(function(){w.debug("v8Lag is : "+(performance.now()-e.estConnectionStart)),e.addTimingEvent("v8Lag",performance.now()-e.estConnectionStart)},1),o.call(this),r.call(this)},i.prototype.send=function(e){w.info("sending message",e),this.dataChannel.send(e)},i.prototype.request=function(e,n){var t=v.buildRequest(e),i=v.buildTerminator(t.id);this.requests[t.id]=n,this.send(JSON.stringify(t)),this.send(JSON.stringify(i))},i.prototype.close=function(){this.dataChannel&&(this.dataChannel.close(),this.dataChannel=null),this.peerConnection&&"closed"!==this.peerConnection.signalingState&&(console.log("Closed PC"),this.peerConnection.close()),this.stunGunPeerConnection&&"closed"!==this.stunGunPeerConnection.signalingState&&(console.log("Closed Stungun PC"),this.stunGunPeerConnection.close()),this.turnSignalPeerConnection&&"closed"!==this.turnSignalPeerConnection.signalingState&&(console.log("Closed Turnsignal PC"),this.turnSignalPeerConnection.close())},i.prototype.on=function(e,n){e in this.eventListeners&&this.eventListeners[e].push(n)},i.prototype.triggerEvent=function(e){if(e in this.eventListeners){var n=Array.prototype.slice.call(arguments,1);this.eventListeners[e].forEach(function(e){e.apply(this,n)})}},i.prototype.setLogLevel=function(e){m.suggest.clear().deny("panama-client",e)},i.prototype.checkCandidateIpLeak=function(e){if(!g.isIPv6(e)&&e.indexOf("typ host")!==-1){var n=g.extractCandidateIp(e);n&&(this.ips[n]=!0,Object.keys(this.ips).length>=2&&(w.info("Multiple private IPs detected. Closing the connection."),this.close()))}},window.PanamaClient=i,n.exports=i},{34:34,37:37,38:38,39:39}],26:[function(e,n,t){function i(){this.enabled=!0,this.defaultResult=!0,this.clear()}function o(e,n){return e.n.test?e.n.test(n):e.n==n}var r=e(28),a={debug:1,info:2,warn:3,error:4};r.mixin(i),i.prototype.allow=function(e,n){return this._white.push({n:e,l:a[n]}),this},i.prototype.deny=function(e,n){return this._black.push({n:e,l:a[n]}),this},i.prototype.clear=function(){return this._white=[],this._black=[],this},i.prototype.test=function(e,n){var t,i=Math.max(this._white.length,this._black.length);for(t=0;t<i;t++){if(this._white[t]&&o(this._white[t],e)&&a[n]>=this._white[t].l)return!0;if(this._black[t]&&o(this._black[t],e)&&a[n]<this._black[t].l)return!1}return this.defaultResult},i.prototype.write=function(e,n,t){if(!this.enabled||this.test(e,n))return this.emit("item",e,n,t)},n.exports=i},{28:28}],27:[function(e,n,t){arguments[4][14][0].apply(t,arguments)},{14:14,26:26,28:28}],28:[function(e,n,t){arguments[4][15][0].apply(t,arguments)},{12:12,15:15}],29:[function(e,n,t){arguments[4][16][0].apply(t,arguments)},{16:16,28:28}],30:[function(e,n,t){arguments[4][17][0].apply(t,arguments)},{17:17,28:28,31:31,32:32}],31:[function(e,n,t){arguments[4][18][0].apply(t,arguments)},{18:18,28:28,33:33}],32:[function(e,n,t){arguments[4][19][0].apply(t,arguments)},{19:19,28:28,33:33}],33:[function(e,n,t){arguments[4][20][0].apply(t,arguments)},{20:20}],34:[function(e,n,t){arguments[4][21][0].apply(t,arguments)},{21:21,27:27,29:29,30:30,35:35,36:36}],35:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{22:22,28:28}],36:[function(e,n,t){arguments[4][23][0].apply(t,arguments)},{23:23,28:28}],37:[function(e,n,t){n.exports.getPortNoFromCandidate=function(e){var n=/([0-9]+) ([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}) ([0-9]+)/.exec(e)||[];return n[3]||null},n.exports.isServerReflexive=function(e){return e.indexOf("srflx")!==-1},n.exports.isIPv6=function(e){return/([0-9a-fA-F]){1,4}(:([0-9a-fA-F]){1,4}){7}/.test(e)},n.exports.extractCandidateIp=function(e){var n=/[0-9]+ ([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}) [0-9]+/.exec(e);return n&&n.length>1?n[1]:null},n.exports.matchNodePeerIpAndPort=function(e){return e.match(/candidate:[0-9]+ [0-9]+ udp [0-9]+ ([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}) ([0-9]*)/i)}},{}],38:[function(e,n,t){function i(e){var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";e||(e=10);for(var i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n}function o(){if(window.document){if(window.adonisContext)return window.adonisContext;var e,n=document.createElement("iframe");return n.src="https://nop.xpanama.net/if.html?adflag=1&cb="+i(),n.setAttribute("style","display: none;"),document.body.appendChild(n),e=n.contentWindow,n.contentWindow.stop(),window.adonisContext=e,e}return window}n.exports={getProtectedContext:o}},{}],39:[function(e,n,t){function i(){return Math.floor(99999*Math.random()+1)}function o(e){var n=i().toString(),t={id:n,version:u,http:e};return t}function r(e){var n={id:e,version:u,http:"TERMINATOR"};return n}function a(e){var n=null;try{n=JSON.parse(l+e)}catch(t){l+=e}return n&&(l=""),n}function s(e){if(!e.http||!e.id)throw new Error("Fields `id` and `http` are mandatory.");var n=e.id;if("TERMINATOR"===e.http){if(!d[n])return null;var t=d[n];return d[n]=null,t}return d[n]?d[n].http.body+=e.http.body:d[n]=e,null}function c(e){var n=a(e);if(!n)return null;var t=s(n);return t}var u="1.0",l="",d={};n.exports={buildRequest:o,buildTerminator:r,handleChunk:c,accumulateJSON:a,accumulateResponse:s}},{}],40:[function(e,n,t){function i(e){"performance"in e||(e.performance={});var n=e.performance;e.performance.now=n.now||n.mozNow||n.msNow||n.oNow||n.webkitNow||Date.now||function(){return(new Date).getTime()}}i(self)},{}]},{},[1]);
