/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license

DO NOT modify this file by hand! Use minify.sh maintenance script to regenerate this file!
*/
if(!window.CKEDITOR)window.CKEDITOR=function(){var a={timestamp:"",version:"3.6",revision:"r41112 build 20110822",_:{},status:"unloaded",basePath:function(){var e=window.CKEDITOR_BASEPATH||"";if(!e)for(var h=document.getElementsByTagName("script"),j=0;j<h.length;j++){var g=h[j].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(g){e=g[1];break}}if(e.indexOf(":/")==-1)e=e.indexOf("/")===0?location.href.match(/^.*?:\/\/[^\/]*/)[0]+e:location.href.match(/^[^\?]*\/(?:)/)[0]+e;if(!e)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';
return e}(),getUrl:function(e){if(e.indexOf(":/")==-1&&e.indexOf("/")!==0)e=this.basePath+e;if(this.timestamp&&e.charAt(e.length-1)!="/"&&!/[&?]t=/.test(e))e+=(e.indexOf("?")>=0?"&":"?")+"t="+this.timestamp;return e}},b=window.CKEDITOR_GETURL;if(b){var c=a.getUrl;a.getUrl=function(e){return b.call(a,e)||c.call(a,e)}}return a}();
if(!CKEDITOR.event){CKEDITOR.event=function(){};CKEDITOR.event.implementOn=function(a){var b=CKEDITOR.event.prototype,c;for(c in b)if(a[c]==undefined)a[c]=b[c]};CKEDITOR.event.prototype=function(){var a=function(c){c=c.getPrivate&&c.getPrivate()||c._||(c._={});return c.events||(c.events={})},b=function(c){this.name=c;this.listeners=[]};b.prototype={getListenerIndex:function(c){for(var e=0,h=this.listeners;e<h.length;e++)if(h[e].fn==c)return e;return-1}};return{on:function(c,e,h,j,g){var f=a(this);
f=f[c]||(f[c]=new b(c));if(f.getListenerIndex(e)<0){f=f.listeners;h||(h=this);if(isNaN(g))g=10;var d=this,k=function(m,p,r,u){m={name:c,sender:this,editor:m,data:p,listenerData:j,stop:r,cancel:u,removeListener:function(){d.removeListener(c,e)}};e.call(h,m);return m.data};k.fn=e;k.priority=g;for(var l=f.length-1;l>=0;l--)if(f[l].priority<=g){f.splice(l+1,0,k);return}f.unshift(k)}},fire:function(){var c=false,e=function(){c=true},h=false,j=function(){h=true};return function(g,f,d){var k=a(this)[g];
g=c;var l=h;c=h=false;if(k){k=k.listeners;if(k.length){k=k.slice(0);for(var m=0;m<k.length;m++){var p=k[m].call(this,d,f,e,j);if(typeof p!="undefined")f=p;if(c||h)break}}}f=h||(typeof f=="undefined"?false:f);c=g;h=l;return f}}(),fireOnce:function(c,e,h){e=this.fire(c,e,h);delete a(this)[c];return e},removeListener:function(c,e){var h=a(this)[c];if(h){var j=h.getListenerIndex(e);j>=0&&h.listeners.splice(j,1)}},hasListeners:function(c){return(c=a(this)[c])&&c.listeners.length>0}}}()}
if(!CKEDITOR.editor){CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.editor=function(a,b,c,e){this._={instanceConfig:a,element:b,data:e};this.elementMode=c||CKEDITOR.ELEMENT_MODE_NONE;CKEDITOR.event.call(this);this._init()};CKEDITOR.editor.replace=function(a,b){var c=a;if(typeof c!="object"){if((c=document.getElementById(a))&&c.tagName.toLowerCase()in{style:1,script:1,base:1,link:1,meta:1,title:1})c=null;if(!c)for(var e=0,h=document.getElementsByName(a);(c=
h[e++])&&c.tagName.toLowerCase()!="textarea";);if(!c)throw'[CKEDITOR.editor.replace] The element with id or name "'+a+'" was not found.';}c.style.visibility="hidden";return new CKEDITOR.editor(b,c,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.editor.appendTo=function(a,b,c){var e=a;if(typeof e!="object"){e=document.getElementById(a);if(!e)throw'[CKEDITOR.editor.appendTo] The element with id "'+a+'" was not found.';}return new CKEDITOR.editor(b,e,CKEDITOR.ELEMENT_MODE_APPENDTO,c)};CKEDITOR.editor.prototype=
{_init:function(){(CKEDITOR.editor._pending||(CKEDITOR.editor._pending=[])).push(this)},fire:function(a,b){return CKEDITOR.event.prototype.fire.call(this,a,b,this)},fireOnce:function(a,b){return CKEDITOR.event.prototype.fireOnce.call(this,a,b,this)}};CKEDITOR.event.implementOn(CKEDITOR.editor.prototype,true)}
if(!CKEDITOR.env)CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:!+"1",opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat",mobile:a.indexOf("mobile")>-1,isCustomDomain:function(){if(!this.ie)return false;var j=document.domain,g=window.location.hostname;return j!=g&&j!="["+g+"]"}};c.gecko=navigator.product=="Gecko"&&!c.webkit&&!c.opera;c.ie||eval("env.ie  = /*@cc_on!@*/false;");
var e=0;if(c.ie){e=parseFloat(a.match(/msie (\d+)/)[1]);c.ie8=!!document.documentMode;c.ie8Compat=document.documentMode==8;c.ie7Compat=e==7&&!document.documentMode||document.documentMode==7;c.ie6Compat=e<7||c.quirks}if(c.gecko){var h=a.match(/rv:([\d\.]+)/);if(h){c.geckoRelease=h[1];h=h[1].split(".");e=h[0]*1E4+(h[1]||0)*100+(h[2]||0)*1}}if(c.opera)e=parseFloat(b.version());if(c.air)e=parseFloat(a.match(/ adobeair\/(\d+)/)[1]);if(c.webkit)e=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]);c.version=
e;c.isCompatible=!c.mobile&&(c.ie&&e>=6||c.gecko&&e>=10801||c.opera&&e>=9.5||c.air&&e>=1||c.webkit&&e>=522||false);c.cssClass="cke_browser_"+(c.ie?"ie":c.gecko?"gecko":c.opera?"opera":c.webkit?"webkit":"unknown");if(c.quirks)c.cssClass+=" cke_browser_quirks";if(c.ie){c.cssClass+=" cke_browser_ie"+(c.version<7?"6":c.version>=8?document.documentMode:"7");if(c.quirks)c.cssClass+=" cke_browser_iequirks"}if(c.gecko&&e<10900)c.cssClass+=" cke_browser_gecko18";if(c.air)c.cssClass+=" cke_browser_air";return c}();
CKEDITOR.status=="unloaded"&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if(CKEDITOR.status!="basic_ready")CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var b=document.createElement("script");b.type="text/javascript";b.src=CKEDITOR.basePath+"ckeditor.js";b.src=CKEDITOR.basePath+"ckeditor_source.js";document.getElementsByTagName("head")[0].appendChild(b)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.replaceClass="ckeditor";CKEDITOR.replaceByClassEnabled=
1;var a=function(b,c,e,h){if(CKEDITOR.env.isCompatible){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore();b=e(b,c,h);CKEDITOR.add(b);return b}return null};CKEDITOR.replace=function(b,c){return a(b,c,CKEDITOR.editor.replace)};CKEDITOR.appendTo=function(b,c,e){return a(b,c,CKEDITOR.editor.appendTo,e)};CKEDITOR.add=function(b){(this._.pending||(this._.pending=[])).push(b)};CKEDITOR.replaceAll=function(){for(var b=document.getElementsByTagName("textarea"),c=0;c<b.length;c++){var e=null,h=b[c];if(h.name||
h.id){if(typeof arguments[0]=="string"){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(h.className))continue}else if(typeof arguments[0]=="function"){e={};if(arguments[0](h,e)===false)continue}this.replace(h,e)}}};(function(){var b=function(){var c=CKEDITOR.loadFullCore,e=CKEDITOR.loadFullCoreTimeout;CKEDITOR.replaceByClassEnabled&&CKEDITOR.replaceAll(CKEDITOR.replaceClass);CKEDITOR.status="basic_ready";if(c&&c._load)c();else e&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},
e*1E3)};if(window.addEventListener)window.addEventListener("load",b,false);else window.attachEvent&&window.attachEvent("onload",b)})();CKEDITOR.status="basic_loaded"}();CKEDITOR.dom={};
(function(){var a=[];CKEDITOR.on("reset",function(){a=[]});CKEDITOR.tools={arrayCompare:function(b,c){if(!b&&!c)return true;if(!b||!c||b.length!=c.length)return false;for(var e=0;e<b.length;e++)if(b[e]!=c[e])return false;return true},clone:function(b){var c;if(b&&b instanceof Array){c=[];for(var e=0;e<b.length;e++)c[e]=this.clone(b[e]);return c}if(b===null||typeof b!="object"||b instanceof String||b instanceof Number||b instanceof Boolean||b instanceof Date||b instanceof RegExp)return b;c=new b.constructor;
for(e in b)c[e]=this.clone(b[e]);return c},capitalize:function(b){return b.charAt(0).toUpperCase()+b.substring(1).toLowerCase()},extend:function(b){var c=arguments.length,e,h;if(typeof(e=arguments[c-1])=="boolean")c--;else if(typeof(e=arguments[c-2])=="boolean"){h=arguments[c-1];c-=2}for(var j=1;j<c;j++){var g=arguments[j],f;for(f in g)if(e===true||b[f]==undefined)if(!h||f in h)b[f]=g[f]}return b},prototypedCopy:function(b){var c=function(){};c.prototype=b;return new c},isArray:function(b){return!!b&&
b instanceof Array},isEmpty:function(b){for(var c in b)if(b.hasOwnProperty(c))return false;return true},cssStyleToDomStyle:function(){var b=document.createElement("div").style,c=typeof b.cssFloat!="undefined"?"cssFloat":typeof b.styleFloat!="undefined"?"styleFloat":"float";return function(e){return e=="float"?c:e.replace(/-./g,function(h){return h.substr(1).toUpperCase()})}}(),buildStyleHtml:function(b){b=[].concat(b);for(var c,e=[],h=0;h<b.length;h++){c=b[h];/@import|[{}]/.test(c)?e.push("<style>"+
c+"</style>"):e.push('<link type="text/css" rel=stylesheet href="'+c+'">')}return e.join("")},htmlEncode:function(b){var c=function(j){var g=new CKEDITOR.dom.element("span");g.setText(j);return g.getHtml()},e=c("\n").toLowerCase()=="<br>"?function(j){return c(j).replace(/<br>/gi,"\n")}:c,h=c(">")==">"?function(j){return e(j).replace(/>/g,"&gt;")}:e;this.htmlEncode=c("  ")=="&nbsp; "?function(j){return h(j).replace(/&nbsp;/g," ")}:h;return this.htmlEncode(b)},htmlEncodeAttr:function(b){return b.replace(/"/g,
"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},getNextNumber:function(){var b=0;return function(){return++b}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(b,c){return c(b)},setTimeout:function(b,c,e,h,j){j||(j=window);e||(e=j);return j.setTimeout(function(){h?b.apply(e,[].concat(h)):b.apply(e)},c||0)},trim:function(){var b=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(c){return c.replace(b,"")}}(),ltrim:function(){var b=/^[ \t\n\r]+/g;return function(c){return c.replace(b,
"")}}(),rtrim:function(){var b=/[ \t\n\r]+$/g;return function(c){return c.replace(b,"")}}(),indexOf:Array.prototype.indexOf?function(b,c){return b.indexOf(c)}:function(b,c){for(var e=0,h=b.length;e<h;e++)if(b[e]===c)return e;return-1},bind:function(b,c){return function(){return b.apply(c,arguments)}},createClass:function(b){var c=b.$,e=b.base,h=b.privates||b._,j=b.proto;b=b.statics;if(h){var g=c;c=function(){var f=this._||(this._={}),d;for(d in h){var k=h[d];f[d]=typeof k=="function"?CKEDITOR.tools.bind(k,
this):k}g.apply(this,arguments)}}if(e){c.prototype=this.prototypedCopy(e.prototype);c.prototype.constructor=c;c.prototype.base=function(){this.base=e.prototype.base;e.apply(this,arguments);this.base=arguments.callee}}j&&this.extend(c.prototype,j,true);b&&this.extend(c,b,true);return c},addFunction:function(b,c){return a.push(function(){return b.apply(c||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var c=a[b];return c&&c.apply(window,Array.prototype.slice.call(arguments,
1))},cssLength:function(){var b=/^\d+(?:\.\d+)?$/;return function(c){return c+(b.test(c)?"px":"")}}(),repeat:function(b,c){return Array(c+1).join(b)},tryThese:function(){for(var b,c=0,e=arguments.length;c<e;c++){var h=arguments[c];try{b=h();break}catch(j){}}return b},genKey:function(){return Array.prototype.slice.call(arguments).join("-")}}})();
CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,b={isindex:1,fieldset:1},c={input:1,button:1,select:1,textarea:1,label:1},e=a({a:1},c),h=a({iframe:1},e),j={hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},g={ins:1,del:1,script:1,style:1},f=a({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1},g),d=a({sub:1,img:1,object:1,sup:1,
basefont:1,map:1,applet:1,font:1,big:1,small:1},f),k=a({p:1},d);c=a({iframe:1},d,c);d={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,
address:1,q:1,pre:1,p:1,em:1,dfn:1};var l=a({a:1},c),m={tr:1},p={"#":1},r=a({param:1},d),u=a({form:1},b,h,j,k),n={li:1},s={base:1,link:1,meta:1,title:1},q=a(s,{style:1,script:1}),w={head:1,body:1},y={address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1};return{$nonBodyContent:a({html:1},w,s),$block:y,$blockLimit:{body:1,div:1,td:1,th:1,caption:1,form:1},$inline:l,$body:a({script:1,style:1},y),
$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,
textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},html:w,head:q,style:p,script:p,body:u,base:{},link:{},meta:{},title:p,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:u,td:u,br:{},th:u,center:u,kbd:l,button:a(k,j),basefont:{},h5:l,h4:l,samp:l,h6:l,ol:n,h1:l,h3:l,option:p,h2:l,form:a(b,h,j,k),select:{optgroup:1,option:1},font:l,ins:l,menu:n,abbr:l,label:l,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:l,script:p,tfoot:m,cite:l,
li:u,input:{},iframe:u,strong:l,textarea:p,noframes:u,big:l,small:l,span:l,hr:{},dt:l,sub:l,optgroup:{option:1},param:{},bdo:l,"var":l,div:u,object:r,sup:l,dd:u,strike:l,area:{},dir:n,map:a({area:1,form:1,p:1},b,g,j),applet:r,dl:{dt:1,dd:1},del:l,isindex:{},fieldset:a({legend:1},d),thead:m,ul:n,acronym:l,b:l,a:c,blockquote:u,caption:l,i:l,u:l,tbody:m,s:l,address:a(h,k),tt:l,legend:l,q:l,pre:a(f,e),p:l,em:l,dfn:l}}();CKEDITOR.dom.event=function(a){this.$=a};
CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();if(this.$.ctrlKey||this.$.metaKey)a+=CKEDITOR.CTRL;if(this.$.shiftKey)a+=CKEDITOR.SHIFT;if(this.$.altKey)a+=CKEDITOR.ALT;return a},preventDefault:function(a){var b=this.$;if(b.preventDefault)b.preventDefault();else b.returnValue=false;a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true},getTarget:function(){var a=
this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null}};CKEDITOR.CTRL=1E3;CKEDITOR.SHIFT=2E3;CKEDITOR.ALT=4E3;CKEDITOR.dom.domObject=function(a){if(a)this.$=a};
CKEDITOR.dom.domObject.prototype=function(){var a=function(b,c){return function(e){typeof CKEDITOR!="undefined"&&b.fire(c,new CKEDITOR.dom.event(e))}};return{getPrivate:function(){var b;if(!(b=this.getCustomData("_")))this.setCustomData("_",b={});return b},on:function(b){var c=this.getCustomData("_cke_nativeListeners");if(!c){c={};this.setCustomData("_cke_nativeListeners",c)}if(!c[b]){c=c[b]=a(this,b);if(this.$.attachEvent)this.$.attachEvent("on"+b,c);else this.$.addEventListener&&this.$.addEventListener(b,
c,!!CKEDITOR.event.useCapture)}return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(b){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(b)){var c=this.getCustomData("_cke_nativeListeners"),e=c&&c[b];if(e){if(this.$.detachEvent)this.$.detachEvent("on"+b,e);else this.$.removeEventListener&&this.$.removeEventListener(b,e,false);delete c[b]}}},removeAllListeners:function(){var b=this.getCustomData("_cke_nativeListeners"),c;for(c in b){var e=
b[c];if(this.$.detachEvent)this.$.detachEvent("on"+c,e);else this.$.removeEventListener&&this.$.removeEventListener(c,e,false);delete b[c]}}}}();
(function(a){var b={};CKEDITOR.on("reset",function(){b={}});a.equals=function(c){return c&&c.$===this.$};a.setCustomData=function(c,e){var h=this.getUniqueId();(b[h]||(b[h]={}))[c]=e;return this};a.getCustomData=function(c){var e=this.$["data-cke-expando"];return(e=e&&b[e])&&e[c]};a.removeCustomData=function(c){var e=this.$["data-cke-expando"];var h=(e=e&&b[e])&&e[c];typeof h!="undefined"&&delete e[c];return h||null};a.clearCustomData=function(){this.removeAllListeners();var c=this.$["data-cke-expando"];
c&&delete b[c]};a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(a)})(CKEDITOR.dom.domObject.prototype);CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){CKEDITOR.env.webkit&&this.$.parent&&this.$.parent.focus();this.$.focus()},getViewPaneSize:function(){var a=this.$.document,b=a.compatMode=="CSS1Compat";return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};else{a=a.document;return{x:a.documentElement.scrollLeft||
a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0}}}});CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var b=new CKEDITOR.dom.element("link");b.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.getHead().append(b)}},appendStyleText:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet("").cssText=a;else{var b=new CKEDITOR.dom.element("style",this);b.append(new CKEDITOR.dom.text(a,this));this.getHead().append(b)}},createElement:function(a,
b){var c=new CKEDITOR.dom.element(a,this);if(b){b.attributes&&c.setAttributes(b.attributes);b.styles&&c.setStyles(b.styles)}return c},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,b){for(var c=this.$.documentElement,e=0;c&&e<a.length;e++){var h=a[e];if(b)for(var j=-1,g=0;g<c.childNodes.length;g++){var f=c.childNodes[g];if(!(b===
true&&f.nodeType==3&&f.previousSibling&&f.previousSibling.nodeType==3)){j++;if(j==h){c=f;break}}}else c=c.childNodes[h]}return c?new CKEDITOR.dom.node(c):null},getElementsByTag:function(a,b){if(!(CKEDITOR.env.ie&&!(document.documentMode>8))&&b)a=b+":"+a;return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),true);return(this.getHead=
function(){return a})()},getBody:function(){var a=new CKEDITOR.dom.element(this.$.body);return(this.getBody=function(){return a})()},getDocumentElement:function(){var a=new CKEDITOR.dom.element(this.$.documentElement);return(this.getDocumentElement=function(){return a})()},getWindow:function(){var a=new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return a})()},write:function(a){this.$.open("text/html","replace");CKEDITOR.env.isCustomDomain()&&(this.$.domain=
document.domain);this.$.write(a);this.$.close()}});CKEDITOR.dom.node=function(a){if(a){switch(a.nodeType){case CKEDITOR.NODE_DOCUMENT:return new CKEDITOR.dom.document(a);case CKEDITOR.NODE_ELEMENT:return new CKEDITOR.dom.element(a);case CKEDITOR.NODE_TEXT:return new CKEDITOR.dom.text(a)}CKEDITOR.dom.domObject.call(this,a)}return this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;
CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;
CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,b){a.append(this,b);return a},clone:function(a,b){var c=this.$.cloneNode(a),e=function(h){if(h.nodeType==CKEDITOR.NODE_ELEMENT){b||h.removeAttribute("id",false);h.removeAttribute("data-cke-expando",false);if(a){h=h.childNodes;for(var j=0;j<h.length;j++)e(h[j])}}};e(c);return new CKEDITOR.dom.node(c)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){a.$.parentNode.insertBefore(this.$,
a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,a.$);return a},insertBeforeMe:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},getAddress:function(a){for(var b=[],c=this.getDocument().$.documentElement,e=this.$;e&&e!=c;){var h=e.parentNode,j=-1;if(h){for(var g=0;g<h.childNodes.length;g++){var f=h.childNodes[g];if(!(a&&f.nodeType==3&&f.previousSibling&&f.previousSibling.nodeType==3)){j++;if(f==e)break}}b.unshift(j)}e=h}return b},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||
this.$.parentNode.ownerDocument)},getIndex:function(){for(var a=this.$,b=a.parentNode&&a.parentNode.firstChild,c=-1;b;){c++;if(b==a)return c;b=b.nextSibling}return-1},getNextSourceNode:function(a,b,c){if(c&&!c.call){var e=c;c=function(j){return!j.equals(e)}}a=!a&&this.getFirst&&this.getFirst();var h;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&c(this,true)===false)return null;a=this.getNext()}for(;!a&&(h=(h||this).getParent());){if(c&&c(h,true)===false)return null;a=h.getNext()}if(!a)return null;
if(c&&c(a)===false)return null;if(b&&b!=a.type)return a.getNextSourceNode(false,b,c);return a},getPreviousSourceNode:function(a,b,c){if(c&&!c.call){var e=c;c=function(j){return!j.equals(e)}}a=!a&&this.getLast&&this.getLast();var h;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&c(this,true)===false)return null;a=this.getPrevious()}for(;!a&&(h=(h||this).getParent());){if(c&&c(h,true)===false)return null;a=h.getPrevious()}if(!a)return null;if(c&&c(a)===false)return null;if(b&&a.type!=b)return a.getPreviousSourceNode(false,
b,c);return a},getPrevious:function(a){var b=this.$,c;do c=(b=b.previousSibling)&&new CKEDITOR.dom.node(b);while(c&&a&&!a(c));return c},getNext:function(a){var b=this.$,c;do c=(b=b.nextSibling)&&new CKEDITOR.dom.node(b);while(c&&a&&!a(c));return c},getParent:function(){var a=this.$.parentNode;return a&&a.nodeType==1?new CKEDITOR.dom.node(a):null},getParents:function(a){var b=this,c=[];do c[a?"push":"unshift"](b);while(b=b.getParent());return c},getCommonAncestor:function(a){if(a.equals(this))return this;
if(a.contains&&a.contains(this))return a;var b=this.contains?this:this.getParent();do if(b.contains(a))return b;while(b=b.getParent());return null},getPosition:function(a){var b=this.$,c=a.$;if(b.compareDocumentPosition)return b.compareDocumentPosition(c);if(b==c)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(b.contains){if(b.contains(c))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(c.contains(b))return CKEDITOR.POSITION_IS_CONTAINED+
CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in b)return b.sourceIndex<0||c.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:b.sourceIndex<c.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}b=this.getAddress();a=a.getAddress();c=Math.min(b.length,a.length);for(var e=0;e<=c-1;e++)if(b[e]!=a[e]){if(e<c)return b[e]<a[e]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return b.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+
CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,b){var c=this.$;if(!b)c=c.parentNode;for(;c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return new CKEDITOR.dom.node(c);c=c.parentNode}return null},hasAscendant:function(a,b){var c=this.$;if(!b)c=c.parentNode;for(;c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return true;c=c.parentNode}return false},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(;a=b.firstChild;)c.insertBefore(b.removeChild(a),
b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var a;this.getFirst&&(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var b=CKEDITOR.tools.ltrim(a.getText()),c=a.getLength();if(b){if(b.length<c){a.split(c-b.length);this.$.removeChild(this.$.firstChild)}}else{a.remove();continue}}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var b=CKEDITOR.tools.rtrim(a.getText()),
c=a.getLength();if(b){if(b.length<c){a.split(b.length);this.$.lastChild.parentNode.removeChild(this.$.lastChild)}}else{a.remove();continue}}break}if(!CKEDITOR.env.ie&&!CKEDITOR.env.opera)(a=this.$.lastChild)&&a.type==1&&a.nodeName.toLowerCase()=="br"&&a.parentNode.removeChild(a)},findFormattableAncestor:function(){for(var a=this;a;){if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is("body")||a.getCustomData("_cke_notReadOnly"))break;if(a.getAttribute("contentEditable")=="false"){if(a.getAttribute("formatEditable")==
"true")return a}else if(a.getAttribute("contentEditable")=="true")break}a=a.getParent()}return false},isReadOnlyNotFormattable:function(){for(var a=this;a;){if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is("body")||a.getCustomData("_cke_notReadOnly"))break;if(a.getAttribute("contentEditable")=="false"){if(a.getAttribute("formatEditable")!="true")return a}else if(a.getAttribute("contentEditable")=="true")break}a=a.getParent()}return false},isReadOnly:function(){for(var a=this;a;){if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is("body")||
a.data("cke-editable"))break;if(a.getAttribute("contentEditable")=="false")return a;else if(a.getAttribute("contentEditable")=="true")break}a=a.getParent()}return false}});CKEDITOR.dom.nodeList=function(a){this.$=a};CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return(a=this.$[a])?new CKEDITOR.dom.node(a):null}};CKEDITOR.dom.element=function(a,b){if(typeof a=="string")a=(b?b.$:document).createElement(a);CKEDITOR.dom.domObject.call(this,a)};
CKEDITOR.dom.element.get=function(a){return a&&(a.$?a:new CKEDITOR.dom.element(a))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;CKEDITOR.dom.element.createFromHtml=function(a,b){var c=new CKEDITOR.dom.element("div",b);c.setHtml(a);return c.getFirst().remove()};
CKEDITOR.dom.element.setMarker=function(a,b,c,e){var h=b.getCustomData("list_marker_id")||b.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),j=b.getCustomData("list_marker_names")||b.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");a[h]=b;j[c]=1;return b.setCustomData(c,e)};CKEDITOR.dom.element.clearAllMarkers=function(a){for(var b in a)CKEDITOR.dom.element.clearMarkers(a,a[b],1)};
CKEDITOR.dom.element.clearMarkers=function(a,b,c){var e=b.getCustomData("list_marker_names"),h=b.getCustomData("list_marker_id"),j;for(j in e)b.removeCustomData(j);b.removeCustomData("list_marker_names");if(c){b.removeCustomData("list_marker_id");delete a[h]}};
CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(a){var b=this.$.className;if(b)RegExp("(?:^|\\s)"+a+"(?:\\s|$)","").test(b)||(b+=" "+a);this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");if(b){a=RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i");if(a.test(b))(b=b.replace(a,"").replace(/^\s+/,""))?this.setAttribute("class",b):this.removeAttribute("class")}},hasClass:function(a){return RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","").test(this.getAttribute("class"))},
append:function(a,b){if(typeof a=="string")a=this.getDocument().createElement(a);b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$);return a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a);b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){if(this.$.text!=undefined)this.$.text+=a;else this.append(new CKEDITOR.dom.text(a))},appendBogus:function(){for(var a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&
!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();if(!a||!a.is||!a.is("br")){a=CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br");CKEDITOR.env.gecko&&a.setAttribute("type","_moz");this.append(a)}},breakParent:function(a){var b=new CKEDITOR.dom.range(this.getDocument());b.setStartAfter(this);b.setEndAfter(a);a=b.extractContents();b.insertNode(this.remove());a.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a){var b=this.$;return a.type!=
CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return!!(this.$.compareDocumentPosition(a.$)&16)},focus:function(){function a(){try{this.$.focus()}catch(b){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");
a.appendChild(this.$.cloneNode(true));return a.innerHTML},setHtml:function(a){return this.$.innerHTML=a},setText:function(a){CKEDITOR.dom.element.prototype.setText=this.$.innerText!=undefined?function(b){return this.$.innerText=b}:function(b){return this.$.textContent=b};return this.setText(a)},getAttribute:function(){var a;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(b){switch(b){case "class":b="className";break;case "tabindex":b=this.$.getAttribute(b,2);if(b!==
0&&this.$.tabIndex===0)b=null;return b;case "checked":b=this.$.attributes.getNamedItem(b);return(b.specified?b.nodeValue:this.$.checked)?"checked":null;case "hspace":case "value":return this.$[b];case "style":return this.$.style.cssText}return this.$.getAttribute(b,2)}:function(b){return this.$.getAttribute(b,2)}}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]}:
function(a){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(a)},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return a};return a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var a=this.$.tabIndex;if(a===0&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0)a=-1;return a}:CKEDITOR.env.webkit?function(){var a=this.$.tabIndex;if(a==undefined){a=parseInt(this.getAttribute("tabindex"),
10);if(isNaN(a))a=-1}return a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(document.documentMode>8)){var b=this.$.scopeName;if(typeof b!="undefined"&&b!="HTML")a=b.toLowerCase()+":"+a}return(this.getName=function(){return a})()},
getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;if((b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b))b=b.getNext(a);return b},getLast:function(a){var b=this.$.lastChild;if((b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b))b=b.getPrevious(a);return b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){for(var a=this.getName(),b=0;b<arguments.length;b++)if(arguments[b]==a)return true;return false},isEditable:function(){var a=this.getName();
return(a=!CKEDITOR.dtd.$nonEditable[a]&&(CKEDITOR.dtd[a]||CKEDITOR.dtd.span))&&a["#"]},isIdentical:function(a){if(this.getName()!=a.getName())return false;for(var b=this.$.attributes,c=a.$.attributes,e=b.length,h=c.length,j=0;j<e;j++){var g=b[j];if(g.nodeName!="_moz_dirty")if((!CKEDITOR.env.ie||g.specified&&g.nodeName!="data-cke-expando")&&g.nodeValue!=a.getAttribute(g.nodeName))return false}if(CKEDITOR.env.ie)for(j=0;j<h;j++){g=c[j];if(g.specified&&g.nodeName!="data-cke-expando"&&g.nodeValue!=this.getAttribute(g.nodeName))return false}return true},
isVisible:function(){var a=!!this.$.offsetHeight&&this.getComputedStyle("visibility")!="hidden",b,c;if(a&&(CKEDITOR.env.webkit||CKEDITOR.env.opera)){b=this.getWindow();if(!b.equals(CKEDITOR.document.getWindow())&&(c=b.$.frameElement))a=(new CKEDITOR.dom.element(c)).isVisible()}return a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return false;for(var a=this.getChildren(),b=0,c=a.count();b<c;b++){var e=a.getItem(b);if(!(e.type==CKEDITOR.NODE_ELEMENT&&e.data("cke-bookmark")))if(e.type==
CKEDITOR.NODE_ELEMENT&&!e.isEmptyInlineRemoveable()||e.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(e.getText()))return false}return true},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case "class":if(this.getAttribute("class"))return true;case "data-cke-expando":continue;default:if(c.specified)return true}}return false}:function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,
_moz_dirty:1};return b>0&&(b>2||!c[a[0].nodeName]||b==2&&!c[a[1].nodeName])},hasAttribute:function(a){a=this.$.attributes.getNamedItem(a);return!!(a&&a.specified)},hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;a=a.$;if(c!=a){var e;if(b)for(;e=c.lastChild;)a.insertBefore(c.removeChild(e),a.firstChild);else for(;e=c.firstChild;)a.appendChild(c.removeChild(e))}},mergeSiblings:function(){function a(b,c,e){if(c&&c.type==CKEDITOR.NODE_ELEMENT){for(var h=[];c.data("cke-bookmark")||
c.isEmptyInlineRemoveable();){h.push(c);c=e?c.getNext():c.getPrevious();if(!c||c.type!=CKEDITOR.NODE_ELEMENT)return}if(b.isIdentical(c)){for(var j=e?b.getLast():b.getFirst();h.length;)h.shift().move(b,!e);c.moveChildren(b,!e);c.remove();j&&j.type==CKEDITOR.NODE_ELEMENT&&j.mergeSiblings()}}}return function(b){if(b===false||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a")){a(this,this.getNext(),true);a(this,this.getPrevious())}}}(),show:function(){this.setStyles({display:"",visibility:""})},
setAttribute:function(){var a=function(b,c){this.$.setAttribute(b,c);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(b,c){if(b=="class")this.$.className=c;else if(b=="style")this.$.style.cssText=c;else if(b=="tabindex")this.$.tabIndex=c;else if(b=="checked")this.$.checked=c;else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){this.$.value=a;return this},removeAttribute:function(){var a;
return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(b){if(b=="class")b="className";else if(b=="tabindex")b="tabIndex";this.$.removeAttribute(b)}:function(b){this.$.removeAttribute(b)}}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a)a.hasOwnProperty(b)&&this.removeAttribute(b)},removeStyle:function(a){this.setStyle(a,"");this.$.style.removeAttribute&&this.$.style.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a));
this.$.style.cssText||this.removeAttribute("style")},setStyle:function(a,b){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b;return this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){if(CKEDITOR.env.ie){a=Math.round(a*100);this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")}else this.setStyle("opacity",a)},unselectable:CKEDITOR.env.gecko?function(){this.$.style.MozUserSelect="none";this.on("dragstart",function(a){a.data.preventDefault()})}:
CKEDITOR.env.webkit?function(){this.$.style.KhtmlUserSelect="none";this.on("dragstart",function(a){a.data.preventDefault()})}:function(){if(CKEDITOR.env.ie||CKEDITOR.env.opera){var a=this.$,b,c=0;for(a.unselectable="on";b=a.all[c++];)switch(b.tagName.toLowerCase()){case "iframe":case "textarea":case "input":case "select":break;default:b.unselectable="on"}}},getPositionedAncestor:function(){for(var a=this;a.getName()!="html";){if(a.getComputedStyle("position")!="static")return a;a=a.getParent()}return null},
getDocumentPosition:function(a){var b=0,c=0,e=this.getDocument().getBody(),h=this.getDocument().$.compatMode=="BackCompat",j=this.getDocument();if(document.documentElement.getBoundingClientRect){var g=this.$.getBoundingClientRect(),f=j.$.documentElement,d=f.clientTop||e.$.clientTop||0,k=f.clientLeft||e.$.clientLeft||0,l=true;if(CKEDITOR.env.ie){l=j.getDocumentElement().contains(this);j=j.getBody().contains(this);l=h&&j||!h&&l}if(l){b=g.left+(!h&&f.scrollLeft||e.$.scrollLeft);b-=k;c=g.top+(!h&&f.scrollTop||
e.$.scrollTop);c-=d}}else{e=this;for(j=null;e&&!(e.getName()=="body"||e.getName()=="html");){b+=e.$.offsetLeft-e.$.scrollLeft;c+=e.$.offsetTop-e.$.scrollTop;if(!e.equals(this)){b+=e.$.clientLeft||0;c+=e.$.clientTop||0}for(;j&&!j.equals(e);){b-=j.$.scrollLeft;c-=j.$.scrollTop;j=j.getParent()}j=e;e=(g=e.$.offsetParent)?new CKEDITOR.dom.element(g):null}}if(a){e=this.getWindow();j=a.getWindow();if(!e.equals(j)&&e.$.frameElement){a=(new CKEDITOR.dom.element(e.$.frameElement)).getDocumentPosition(a);b+=
a.x;c+=a.y}}if(!document.documentElement.getBoundingClientRect)if(CKEDITOR.env.gecko&&!h){b+=this.$.clientLeft?1:0;c+=this.$.clientTop?1:0}return{x:b,y:c}},scrollIntoView:function(a){var b=this.getWindow(),c=b.getViewPaneSize().height,e=c*-1;if(a)e+=c;else{e+=this.$.offsetHeight||0;e+=parseInt(this.getComputedStyle("marginBottom")||0,10)||0}a=this.getDocumentPosition();e+=a.y;e=e<0?0:e;a=b.getScrollPosition().y;if(e>a||e<a-c)b.$.scrollTo(0,e)},setState:function(a){switch(a){case CKEDITOR.TRISTATE_ON:this.addClass("cke_on");
this.removeClass("cke_off");this.removeClass("cke_disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass("cke_disabled");this.removeClass("cke_off");this.removeClass("cke_on");break;default:this.addClass("cke_off");this.removeClass("cke_on");this.removeClass("cke_disabled")}},getFrameDocument:function(){var a=this.$;return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,b){var c=this.$.attributes;b=b||{};for(var e=0;e<c.length;e++){var h=c[e],j=h.nodeName.toLowerCase(),
g;if(!(j in b))if(j=="checked"&&(g=this.getAttribute(j)))a.setAttribute(j,g);else if(h.specified||CKEDITOR.env.ie&&h.nodeValue&&j=="value"){g=this.getAttribute(j);if(g===null)g=h.nodeValue;a.setAttribute(j,g)}}if(this.$.style.cssText!=="")a.$.style.cssText=this.$.style.cssText},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument();a=new CKEDITOR.dom.element(a,b);this.copyAttributes(a);this.moveChildren(a);this.getParent()&&this.$.parentNode.replaceChild(a.$,this.$);a.$["data-cke-expando"]=
this.$["data-cke-expando"];this.$=a.$}},getChild:function(a){var b=this.$;if(a.slice)for(;a.length>0&&b;)b=b.childNodes[a.shift()];else b=b.childNodes[a];return b?new CKEDITOR.dom.node(b):null},getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction"):this.getStyle("direction")||this.getAttribute("dir")},
data:function(a,b){a="data-"+a;if(b===undefined)return this.getAttribute(a);else b===false?this.removeAttribute(a):this.setAttribute(a,b);return null}});
(function(){function a(c){for(var e=0,h=0,j=b[c].length;h<j;h++)e+=parseInt(this.getComputedStyle(b[c][h])||0,10)||0;return e}var b={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(c,e,h){if(typeof e=="number"){if(h&&!(CKEDITOR.env.ie&&CKEDITOR.env.quirks))e-=a.call(this,c);this.setStyle(c,e+"px")}};CKEDITOR.dom.element.prototype.getSize=
function(c,e){var h=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(c)],this.$["client"+CKEDITOR.tools.capitalize(c)])||0;if(e)h-=a.call(this,c);return h}})();CKEDITOR.command=function(a,b){this.uiItems=[];this.exec=function(c){if(this.state==CKEDITOR.TRISTATE_DISABLED)return false;if(!RTE.loaded)return false;this.editorFocus&&a.focus();return b.exec.call(this,a,c)!==false};CKEDITOR.tools.extend(this,b,{modes:{wysiwyg:1},editorFocus:1,state:CKEDITOR.TRISTATE_OFF});CKEDITOR.event.call(this)};
CKEDITOR.command.prototype={enable:function(){if(this.state==CKEDITOR.TRISTATE_DISABLED)this.setState(!this.preserveState||typeof this.previousState=="undefined"?CKEDITOR.TRISTATE_OFF:this.previousState)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){if(this.state==a)return false;this.previousState=this.state;this.state=a;this.fire("state");return true},toggleState:function(){if(this.state==CKEDITOR.TRISTATE_OFF)this.setState(CKEDITOR.TRISTATE_ON);else this.state==
CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype,true);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;
CKEDITOR.config={customConfig:"config.js",autoUpdateElement:true,baseHref:"",contentsCss:CKEDITOR.basePath+"contents.css",contentsLangDirection:"ui",contentsLanguage:"",language:"",defaultLanguage:"en",enterMode:CKEDITOR.ENTER_P,forceEnterMode:false,shiftEnterMode:CKEDITOR.ENTER_BR,corePlugins:"",docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bodyId:"",bodyClass:"",fullPage:false,height:200,plugins:"about,a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,iframe,image,indent,justify,keystrokes,link,list,liststyle,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,scayt,smiley,showblocks,showborders,sourcearea,stylescombo,table,tabletools,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc",
extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,theme:"default",skin:"kama",width:"",baseFloatZIndex:1E4};CKEDITOR.focusManager=function(a){if(a.focusManager)return a.focusManager;this.hasFocus=false;this._={editor:a};return this};
CKEDITOR.focusManager.prototype={focus:function(){this._.timer&&clearTimeout(this._.timer);if(!this.hasFocus){CKEDITOR.currentInstance&&CKEDITOR.currentInstance.focusManager.forceBlur();var a=this._.editor,b=a.container.getChild(1);b&&b.addClass("cke_focus");this.hasFocus=true;a.fire("focus")}},blur:function(){var a=this;a._.timer&&clearTimeout(a._.timer);a._.timer=setTimeout(function(){delete a._.timer;a.forceBlur()},100)},forceBlur:function(){if(this.hasFocus){var a=this._.editor,b=a.container.getChild(1);
b&&b.removeClass("cke_focus");this.hasFocus=false;a.fire("blur")}}};
(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,is:1,it:1,ja:1,km:1,ko:1,lt:1,lv:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sk:1,sl:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,zh:1},load:function(a,b,c){if(!a||!CKEDITOR.lang.languages[a])a=this.detect(b,a);this[a]?c(a,this[a]):CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+
a+".js"),function(){c(a,this[a])},this)},detect:function(a,b){var c=this.languages;b=b||navigator.userLanguage||navigator.language;var e=b.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),h=e[1];e=e[2];if(c[h+"-"+e])h=h+"-"+e;else c[h]||(h=null);CKEDITOR.lang.detect=h?function(){return h}:function(j){return j};return h||a}}})();
CKEDITOR.scriptLoader=function(){var a={},b={};return{load:function(c,e,h,j){var g=typeof c=="string";if(g)c=[c];h||(h=CKEDITOR);var f=c.length,d=[],k=[],l=function(n){if(e)g?e.call(h,n):e.call(h,d,k)};if(f===0)l(true);else{var m=function(n,s){(s?d:k).push(n);if(--f<=0){j&&CKEDITOR.document.getDocumentElement().removeStyle("cursor");l(s)}},p=function(n,s){a[n]=1;var q=b[n];delete b[n];for(var w=0;w<q.length;w++)q[w](n,s)},r=function(n){if(a[n])m(n,true);else{var s=b[n]||(b[n]=[]);s.push(m);if(!(s.length>
1)){var q=new CKEDITOR.dom.element("script");q.setAttributes({type:"text/javascript",src:n});if(e)if(CKEDITOR.env.ie)q.$.onreadystatechange=function(){if(q.$.readyState=="loaded"||q.$.readyState=="complete"){q.$.onreadystatechange=null;p(n,true)}};else{q.$.onload=function(){setTimeout(function(){p(n,true)},0)};q.$.onerror=function(){p(n,false)}}q.appendTo(CKEDITOR.document.getHead())}}};j&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var u=0;u<f;u++)r(c[u])}}}}();
CKEDITOR.resourceManager=function(a,b){this.basePath=a;this.fileName=b;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};
CKEDITOR.resourceManager.prototype={add:function(a,b){if(this.registered[a])throw'[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.';CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",this.registered[a]=b||{})},get:function(a){return this.registered[a]||null},getPath:function(a){var b=this.externals[a];return CKEDITOR.getUrl(b&&b.dir||this.basePath+a+"/")},getFilePath:function(a){var b=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(b&&typeof b.file==
"string"?b.file:this.fileName+".js"))},addExternal:function(a,b,c){a=a.split(",");for(var e=0;e<a.length;e++)this.externals[a[e]]={dir:b,file:c}},load:function(a,b,c){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var e=this.loaded,h=this.registered,j=[],g={},f={},d=0;d<a.length;d++){var k=a[d];if(k)if(!e[k]&&!h[k]){var l=this.getFilePath(k);j.push(l);l in g||(g[l]=[]);g[l].push(k)}else f[k]=this.get(k)}CKEDITOR.scriptLoader.load(j,function(m,p){if(p.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+
g[p[0]].join(",")+'" was not found at "'+p[0]+'".';for(var r=0;r<m.length;r++)for(var u=g[m[r]],n=0;n<u.length;n++){var s=u[n];f[s]=this.get(s);e[s]=1}b.call(c,f)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");
CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){return function(b,c,e){var h={},j=function(g){a.call(this,g,function(f){CKEDITOR.tools.extend(h,f);var d=[],k;for(k in f){var l=f[k];if(l=l&&l.requires)for(var m=0;m<l.length;m++)h[l[m]]||d.push(l[m])}if(d.length)j.call(this,d);else{for(k in h){l=h[k];if(l.onLoad&&!l.onLoad._called){l.onLoad();l.onLoad._called=1}}if(c)c.call(e||window,h)}},this)};j.call(this,b)}});
CKEDITOR.plugins.setLang=function(a,b,c){a=this.get(a);(a.langEntries||(a.langEntries={}))[b]=c};
CKEDITOR.skins=function(){var a={},b={},c=function(e,h,j,g){function f(r,u){return r.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(n,s,q,w){return/^\/|^\w?:/.test(q)?n:"url("+u+s+q+w+")"})}var d=a[h];if(!e.skin){e.skin=d;d.init&&d.init(e)}e=function(r){for(var u=0;u<r.length;u++)r[u]=CKEDITOR.getUrl(b[h]+r[u])};j=d[j];if(!j||j._isLoaded)g&&g();else{var k=j._pending||(j._pending=[]);k.push(g);if(!(k.length>1)){var l=!j.css||!j.css.length,m=!j.js||!j.js.length,p=function(){if(l&&m){j._isLoaded=
1;for(var r=0;r<k.length;r++)if(k[r])k[r]()}};if(!l){g=j.css;if(CKEDITOR.tools.isArray(g)){e(g);for(d=0;d<g.length;d++)CKEDITOR.document.appendStyleSheet(g[d])}else{g=f(g,CKEDITOR.getUrl(b[h]));CKEDITOR.document.appendStyleText(g)}j.css=g;l=1}if(!m){e(j.js);CKEDITOR.scriptLoader.load(j.js,function(){m=1;p()})}p()}}};return{add:function(e,h){a[e]=h;h.skinPath=b[e]||(b[e]=CKEDITOR.getUrl("_source/skins/"+e+"/"))},load:function(e,h,j){var g=e.skinName,f=e.skinPath;if(a[g])c(e,g,h,j);else{b[g]=f;CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(f+
"skin.js"),function(){c(e,g,h,j)})}}}}();CKEDITOR.themes=new CKEDITOR.resourceManager("themes/","theme");CKEDITOR.ui=function(a){if(a.ui)return a.ui;this._={handlers:{},items:{},editor:a};return this};
CKEDITOR.ui.prototype={add:function(a,b,c){this._.items[a]={type:b,command:c.command||null,args:Array.prototype.slice.call(arguments,2)}},create:function(a){var b=this._.items[a],c=b&&this._.handlers[b.type];a=b&&b.command&&this._.editor.getCommand(b.command);b=c&&c.create.apply(this,b.args);a&&a.uiItems.push(b);return b},addHandler:function(a,b){this._.handlers[a]=b}};CKEDITOR.event.implementOn(CKEDITOR.ui);
(function(){function a(){var m,p=this._.commands,r=this.mode,u;for(u in p){m=p[u];m[m.startDisabled?"disable":m.modes[r]?"enable":"disable"]()}}var b=0,c=function(){var m="editor"+ ++b;return CKEDITOR.instances&&CKEDITOR.instances[m]?c():m},e={},h=function(m){var p=m.config.customConfig;if(!p)return false;p=CKEDITOR.getUrl(p);var r=e[p]||(e[p]={});if(r.fn){r.fn.call(m,m.config);if(CKEDITOR.getUrl(m.config.customConfig)==p||!h(m))m.fireOnce("customConfigLoaded")}else CKEDITOR.scriptLoader.load(p,function(){r.fn=
CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};h(m)});return true},j=function(m,p){m.on("customConfigLoaded",function(){if(p){if(p.on)for(var r in p.on)m.on(r,p.on[r]);CKEDITOR.tools.extend(m.config,p,true);delete m.config.on}var u=m.config.skin.split(",");r=u[0];u=CKEDITOR.getUrl(u[1]||"skins/"+r+"/");m.skinName=r;m.skinPath=u;m.skinClass="cke_skin_"+r;m.tabIndex=m.config.tabIndex||m.element.getAttribute("tabindex")||0;m.fireOnce("configLoaded");d(m)});if(p&&p.customConfig!=undefined)m.config.customConfig=
p.customConfig;h(m)||m.fireOnce("customConfigLoaded")},g=function(m){CKEDITOR.lang.load(m.config.language,m.config.defaultLanguage,function(p,r){m.langCode=p;m.lang=CKEDITOR.tools.prototypedCopy(r);if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&m.lang.dir=="rtl")m.lang.dir="ltr";var u=m.config;u.contentsLangDirection=="ui"&&(u.contentsLangDirection=m.lang.dir);f(m)})},f=function(m){var p=m.config,r=p.plugins,u=p.extraPlugins;p=p.removePlugins;if(u){var n=RegExp("(?:^|,)(?:"+u.replace(/\s*,\s*/g,
"|")+")(?=,|$)","g");r=r.replace(n,"");r+=","+u}if(p){n=RegExp("(?:^|,)(?:"+p.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");r=r.replace(n,"")}CKEDITOR.env.air&&(r+=",adobeair");CKEDITOR.plugins.load(r.split(","),function(s){var q=[],w=[],y=[];m.plugins=s;for(var H in s){var D=s[H],B=D.lang,G=CKEDITOR.plugins.getPath(H),I=null;D.path=G;if(B){I=CKEDITOR.tools.indexOf(B,m.langCode)>=0?m.langCode:B[0];if(!D.langEntries||!D.langEntries[I])y.push(CKEDITOR.getUrl(G+"lang/"+I+".js"));else{CKEDITOR.tools.extend(m.lang,
D.langEntries[I]);I=null}}w.push(I);q.push(D)}CKEDITOR.scriptLoader.load(y,function(){for(var K=["beforeInit","init","afterInit"],L=0;L<K.length;L++)for(var o=0;o<q.length;o++){var z=q[o];L===0&&w[o]&&z.lang&&CKEDITOR.tools.extend(m.lang,z.langEntries[w[o]]);if(z[K[L]])z[K[L]](m)}m.fire("pluginsLoaded");k(m)})})},d=function(m){CKEDITOR.skins.load(m,"editor",function(){g(m)})},k=function(m){var p=m.config.theme;CKEDITOR.themes.load(p,function(){var r=m.theme=CKEDITOR.themes.get(p);r.path=CKEDITOR.themes.getPath(p);
r.build(m);m.config.autoUpdateElement&&l(m)})},l=function(m){var p=m.element;if(m.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&p.is("textarea")){var r=p.$.form&&new CKEDITOR.dom.element(p.$.form);if(r){var u=function(){m.updateElement()};r.on("submit",u);if(!r.$.submit.nodeName&&!r.$.submit.length)r.$.submit=CKEDITOR.tools.override(r.$.submit,function(n){return function(){m.updateElement();n.apply?n.apply(this,arguments):n()}});m.on("destroy",function(){r.removeListener("submit",u)})}}};CKEDITOR.editor.prototype._init=
function(){var m=CKEDITOR.dom.element.get(this._.element),p=this._.instanceConfig;delete this._.element;delete this._.instanceConfig;this._.commands={};this._.styles=[];this.name=(this.element=m)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(m.getId()||m.getNameAtt())||c();if(this.name in CKEDITOR.instances)throw'[CKEDITOR.editor] The instance "'+this.name+'" already exists.';this.id=CKEDITOR.tools.getNextId();this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);
this.focusManager=new CKEDITOR.focusManager(this);CKEDITOR.fire("instanceCreated",null,this);this.on("mode",a,null,null,1);j(this,p)}})();
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){return this._.commands[a]=new CKEDITOR.command(this,b)},addCss:function(a){this._.styles.push(a)},destroy:function(a){a||this.updateElement();this.fire("destroy");this.theme&&this.theme.destroy(this);CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},execCommand:function(a,b){var c=this.getCommand(a),e={name:a,commandData:b,command:c};if(c&&c.state!=CKEDITOR.TRISTATE_DISABLED)if(this.fire("beforeCommandExec",
e)!==true){e.returnValue=c.exec(e.commandData);if(!c.async&&this.fire("afterCommandExec",e)!==true)return e.returnValue}return false},getCommand:function(a){return this._.commands[a]},getData:function(){this.fire("beforeGetData");var a=this._.data;if(typeof a!="string")a=(a=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.is("textarea")?a.getValue():a.getHtml():"";a={dataValue:a};this.fire("getData",a);return a.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");if(typeof a!=
"string"){var b=this.element;if(b&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE)a=b.is("textarea")?b.getValue():b.getHtml()}return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){if(b)this.on("dataReady",function(e){e.removeListener();b.call(e.editor)});a={dataValue:a};!c&&this.fire("setData",a);this._.data=a.dataValue;!c&&this.fire("afterSetData",a)},insertHtml:function(a){this.fire("insertHtml",a)},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",
a)},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){if(this.mayBeDirty)this._.previousValue=this.getSnapshot()},updateElement:function(){var a=this.element;if(a&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE){var b=this.getData();if(this.config.htmlEncodeOutput)b=CKEDITOR.tools.htmlEncode(b);a.is("textarea")?a.setValue(b):a.setHtml(b)}}});
CKEDITOR.on("loaded",function(){var a=CKEDITOR.editor._pending;if(a){delete CKEDITOR.editor._pending;for(var b=0;b<a.length;b++)a[b]._init()}});CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)--\>)|(?:([^\\s>]+)\\s*((?:(?:[^\"'>]+)|(?:\"[^\"]*\")|(?:'[^']*'))*)\\/?>))","g")}};
(function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,b={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(c){for(var e,h,j=0,g;e=this._.htmlPartsRegex.exec(c);){h=e.index;if(h>j){j=c.substring(j,h);if(g)g.push(j);else this.onText(j)}j=
this._.htmlPartsRegex.lastIndex;if(h=e[1]){h=h.toLowerCase();if(g&&CKEDITOR.dtd.$cdata[h]){this.onCDATA(g.join(""));g=null}if(!g){this.onTagClose(h);continue}}if(g)g.push(e[0]);else if(h=e[3]){h=h.toLowerCase();if(!/="/.test(h)){var f={},d;e=e[4];var k=!!(e&&e.charAt(e.length-1)=="/");if(e)for(;d=a.exec(e);){var l=d[1].toLowerCase();d=d[2]||d[3]||d[4]||"";f[l]=!d&&b[l]?l:d}this.onTagOpen(h,f,k);if(!g&&CKEDITOR.dtd.$cdata[h])g=[]}}else if(h=e[2])this.onComment(h)}if(c.length>j)this.onText(c.substring(j,
c.length))}}})();CKEDITOR.htmlParser.comment=function(a){this.value=a;this._={isBlockLike:false}};CKEDITOR.htmlParser.comment.prototype={type:CKEDITOR.NODE_COMMENT,writeHtml:function(a,b){var c=this.value;if(b){if(!(c=b.onComment(c,this)))return;if(typeof c!="string"){c.parent=this.parent;c.writeHtml(a,b);return}}a.comment(c)}};
(function(){CKEDITOR.htmlParser.text=function(a){this.value=a;this._={isBlockLike:false}};CKEDITOR.htmlParser.text.prototype={type:CKEDITOR.NODE_TEXT,writeHtml:function(a,b){var c=this.value;b&&!(c=b.onText(c,this))||a.text(c)}}})();(function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a};CKEDITOR.htmlParser.cdata.prototype={type:CKEDITOR.NODE_TEXT,writeHtml:function(a){a.write(this.value)}}})();
CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:true,hasInlineStarted:false}};
(function(){var a={colgroup:1,dd:1,dt:1,li:1,option:1,p:1,td:1,tfoot:1,th:1,thead:1,tr:1},b=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),c=CKEDITOR.dtd.$list,e=CKEDITOR.dtd.$listItem;CKEDITOR.htmlParser.fragment.fromHtml=function(h,j){function g(w){var y;if(m.length>0)for(var H=0;H<m.length;H++){var D=m[H],B=D.name,G=CKEDITOR.dtd[B],I=r.name&&CKEDITOR.dtd[r.name];if((!I||I[B])&&(!w||!G||G[w]||!CKEDITOR.dtd[w])){if(!y){f();y=1}D=
D.clone();D.parent=r;r=D;m.splice(H,1);H--}}}function f(w){for(;p.length-(w||0)>0;)r.add(p.shift())}function d(w,y,H){y=y||r||l;if(j&&!y.type){var D,B;if((D=w.attributes&&(B=w.attributes["data-cke-real-element-type"])?B:w.name)&&!(D in CKEDITOR.dtd.$body)&&!(D in CKEDITOR.dtd.$nonBodyContent)){D=r;r=y;k.onTagOpen(j,{});y=r;if(H)r=D}}if(w._.isBlockLike&&w.name!="pre"){H=w.children.length;if((D=w.children[H-1])&&D.type==CKEDITOR.NODE_TEXT)if(B=CKEDITOR.tools.rtrim(D.value))D.value=B;else w.children.length=
H-1}y.add(w);if(w.returnPoint){r=w.returnPoint;delete w.returnPoint}}var k=new CKEDITOR.htmlParser,l=new CKEDITOR.htmlParser.fragment,m=[],p=[],r=l,u=false,n;k.onTagOpen=function(w,y,H){var D=new CKEDITOR.htmlParser.element(w,y);if(D.isUnknown&&H)D.isEmpty=true;if(CKEDITOR.dtd.$removeEmpty[w])m.push(D);else{if(w=="pre")u=true;else if(w=="br"&&u){r.add(new CKEDITOR.htmlParser.text("\n"));return}var B=r.name,G=B&&(CKEDITOR.dtd[B]||(r._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span));if(G&&!D.isUnknown&&
!r.isUnknown&&!G[w]){G=false;var I;if(w in c&&B in c){B=r.children;(B=B[B.length-1])&&B.name in e||d(B=new CKEDITOR.htmlParser.element("li"),r);n=r;I=B}else if(w==B)d(r,r.parent);else{if(w in CKEDITOR.dtd.$listItem){k.onTagOpen("ul",{});I=r}else if(b[B])n||(n=r);else{d(r,r.parent,true);a[B]||m.unshift(r)}G=true}r=I?I:r.returnPoint||r.parent;if(G){k.onTagOpen.apply(this,arguments);return}}g(w);f();D.parent=r;D.returnPoint=n;n=0;if(D.isEmpty)d(D);else r=D}};k.onTagClose=function(w){for(var y=m.length-
1;y>=0;y--)if(w==m[y].name){m.splice(y,1);return}for(var H=[],D=[],B=r;B.type&&B.name!=w;){B._.isBlockLike||D.unshift(B);H.push(B);B=B.parent}if(B.type){for(y=0;y<H.length;y++){var G=H[y];d(G,G.parent)}r=B;if(r.name=="pre")u=false;B._.isBlockLike&&f();d(B,B.parent);if(B==r)r=r.parent;m=m.concat(D)}if(w=="body")j=false};k.onText=function(w){if(!r._.hasInlineStarted&&!u){w=CKEDITOR.tools.ltrim(w);if(w.length===0)return}f();g();if(j&&(!r.type||r.name=="body")&&CKEDITOR.tools.trim(w))this.onTagOpen(j,
{});u||(w=w.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));r.add(new CKEDITOR.htmlParser.text(w))};k.onCDATA=function(w){r.add(new CKEDITOR.htmlParser.cdata(w))};k.onComment=function(w){f();g();r.add(new CKEDITOR.htmlParser.comment(w))};k.parse(h);for(f(!CKEDITOR.env.ie&&1);r.type;){var s=r.parent,q=r;if(j&&(!s.type||s.name=="body")&&!CKEDITOR.dtd.$body[q.name]){r=s;k.onTagOpen(j,{});s=r}s.add(q);r=s}return l};CKEDITOR.htmlParser.fragment.prototype={add:function(h){var j=this.children.length;if(j=j>0&&this.children[j-
1]||null){if(h._.isBlockLike&&j.type==CKEDITOR.NODE_TEXT){j.value=CKEDITOR.tools.rtrim(j.value);if(j.value.length===0){this.children.pop();this.add(h);return}}j.next=h}h.previous=j;h.parent=this;this.children.push(h);this._.hasInlineStarted=h.type==CKEDITOR.NODE_TEXT||h.type==CKEDITOR.NODE_ELEMENT&&!h._.isBlockLike},writeHtml:function(h,j){var g;this.filterChildren=function(){var f=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml.call(this,f,j,true);f=f.getHtml();this.children=(new CKEDITOR.htmlParser.fragment.fromHtml(f)).children;
g=1};!this.name&&j&&j.onFragment(this);this.writeChildrenHtml(h,g?null:j)},writeChildrenHtml:function(h,j){for(var g=0;g<this.children.length;g++)this.children[g].writeHtml(h,j)}}})();
CKEDITOR.htmlParser.element=function(a,b){this.name=a;this.attributes=b||(b={});this.children=[];var c=b["data-cke-real-element-type"]||a||"",e=c.match(/^cke:(.*)/);e&&(c=e[1]);e=CKEDITOR.dtd;c=!!(e.$nonBodyContent[c]||e.$block[c]||e.$listItem[c]||e.$tableContent[c]||e.$nonEditable[c]||c=="br");var h=!!e.$empty[a];this.isEmpty=h;this.isUnknown=!e[a];this._={isBlockLike:c,hasInlineStarted:h||!c}};
(function(){var a=function(b,c){b=b[0];c=c[0];return b<c?-1:b>c?1:0};CKEDITOR.htmlParser.element.prototype={type:CKEDITOR.NODE_ELEMENT,add:CKEDITOR.htmlParser.fragment.prototype.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},writeHtml:function(b,c){var e=this.attributes,h=this,j=h.name,g,f,d,k;h.filterChildren=function(){if(!k){var p=new CKEDITOR.htmlParser.basicWriter;CKEDITOR.htmlParser.fragment.prototype.writeChildrenHtml.call(h,p,c);h.children=(new CKEDITOR.htmlParser.fragment.fromHtml(p.getHtml())).children;
k=1}};if(c){for(;;){if(!(j=c.onElementName(j)))return;h.name=j;if(!(h=c.onElement(h)))return;h.parent=this.parent;if(h.name==j)break;if(h.type!=CKEDITOR.NODE_ELEMENT){h.writeHtml(b,c);return}j=h.name;if(!j){this.writeChildrenHtml.call(h,b,k?null:c);return}}e=h.attributes}b.openTag(j,e);for(var l=[],m=0;m<2;m++)for(g in e){f=g;d=e[g];if(m==1)l.push([g,d]);else if(c){for(;;)if(f=c.onAttributeName(g))if(f!=g){delete e[g];g=f}else break;else{delete e[g];break}if(f)if((d=c.onAttribute(h,f,d))===false)delete e[f];
else e[f]=d}}b.sortAttributes&&l.sort(a);e=l.length;for(m=0;m<e;m++){g=l[m];b.attribute(g[0],g[1])}b.openTagClose(j,h.isEmpty);if(!h.isEmpty){this.writeChildrenHtml.call(h,b,k?null:c);b.closeTag(j)}},writeChildrenHtml:function(){CKEDITOR.htmlParser.fragment.prototype.writeChildrenHtml.apply(this,arguments)}}})();
(function(){function a(j,g){for(var f=0;j&&f<g.length;f++){var d=g[f];j=j.replace(d[0],d[1])}return j}function b(j,g,f){if(typeof g=="function")g=[g];var d,k;k=j.length;var l=g&&g.length;if(l){for(d=0;d<k&&j[d].pri<f;d++);for(k=l-1;k>=0;k--)if(l=g[k]){l.pri=f;j.splice(d,0,l)}}}function c(j,g,f){if(g)for(var d in g){var k=j[d];j[d]=e(k,g[d],f);k||j.$length++}}function e(j,g,f){if(g){g.pri=f;if(j){if(j.splice)b(j,g,f);else{j=j.pri>f?[g,j]:[j,g];j.filter=h}return j}else return g.filter=g}}function h(j){for(var g=
j.type||j instanceof CKEDITOR.htmlParser.fragment,f=0;f<this.length;f++){if(g)var d=j.type,k=j.name;var l=this[f].apply(window,arguments);if(l===false)return l;if(g){if(l&&(l.name!=k||l.type!=d))return l}else if(typeof l!="string")return l;l!=undefined&&(j=l)}return j}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(j){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}};j&&this.addRules(j,10)},proto:{addRules:function(j,g){if(typeof g!="number")g=
10;b(this._.elementNames,j.elementNames,g);b(this._.attributeNames,j.attributeNames,g);c(this._.elements,j.elements,g);c(this._.attributes,j.attributes,g);this._.text=e(this._.text,j.text,g)||this._.text;this._.comment=e(this._.comment,j.comment,g)||this._.comment;this._.root=e(this._.root,j.root,g)||this._.root},onElementName:function(j){return a(j,this._.elementNames)},onAttributeName:function(j){return a(j,this._.attributeNames)},onText:function(j){var g=this._.text;return g?g.filter(j):j},onComment:function(j,
g){var f=this._.comment;return f?f.filter(j,g):j},onFragment:function(j){var g=this._.root;return g?g.filter(j):j},onElement:function(j){for(var g=[this._.elements["^"],this._.elements[j.name],this._.elements.$],f,d=0;d<3;d++)if(f=g[d]){f=f.filter(j,this);if(f===false)return null;if(f&&f!=j)return this.onNode(f);if(j.parent&&!j.name)break}return j},onNode:function(j){var g=j.type;return g==CKEDITOR.NODE_ELEMENT?this.onElement(j):g==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(j.value)):
g==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(j.value)):null},onAttribute:function(j,g,f){if(g=this._.attributes[g]){j=g.filter(f,j,this);if(j===false)return false;if(typeof j!="undefined")return j}return f}}})})();
CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("<",a)},openTagClose:function(a,b){b?this._.output.push(" />"):this._.output.push(">")},attribute:function(a,b){if(typeof b=="string")b=CKEDITOR.tools.htmlEncodeAttr(b);this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("<\!--",a,"--\>")},write:function(a){this._.output.push(a)},
reset:function(){this._.output=[];this._.indent=false},getHtml:function(a){var b=this._.output.join("");a&&this.reset();return b}}});delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a;a.on("focus",function(){if(CKEDITOR.currentInstance!=a){CKEDITOR.currentInstance=a;CKEDITOR.fire("currentInstance")}});a.on("blur",function(){if(CKEDITOR.currentInstance==a){CKEDITOR.currentInstance=null;CKEDITOR.fire("currentInstance")}})};
CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]};CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;CKEDITOR.TRISTATE_DISABLED=0;CKEDITOR.dom.comment=CKEDITOR.tools.createClass({base:CKEDITOR.dom.node,$:function(a,b){if(typeof a=="string")a=(b?b.$:document).createComment(a);this.base(a)},proto:{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<\!--"+this.$.nodeValue+"--\>"}}});
(function(){var a={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1,legend:1},b={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1,fieldset:1};CKEDITOR.dom.elementPath=function(c){for(var e=null,h=null,j=[];c;){if(c.type==CKEDITOR.NODE_ELEMENT){if(!this.lastElement)this.lastElement=c;var g=c.getName();if(CKEDITOR.env.ie&&c.$.scopeName!="HTML")g=c.$.scopeName.toLowerCase()+":"+g;if(!h){if(!e&&a[g])e=c;if(b[g]){var f;if(f=!e)if(f=g=="div"){a:{f=c.getChildren();
for(var d=0,k=f.count();d<k;d++){var l=f.getItem(d);if(l.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[l.getName()]){f=true;break a}}f=false}f=!f}if(f)e=c;else h=c}}j.push(c);if(g=="body")break}c=c.getParent()}this.block=e;this.blockLimit=h;this.elements=j}})();
CKEDITOR.dom.elementPath.prototype={compare:function(a){var b=this.elements;a=a&&a.elements;if(!a||b.length!=a.length)return false;for(var c=0;c<b.length;c++)if(!b[c].equals(a[c]))return false;return true},contains:function(a){for(var b=this.elements,c=0;c<b.length;c++)if(b[c].getName()in a)return b[c];return null},isContentEditable:function(){for(var a=this.elements,b="true",c=a.length-1;c>=0;c--)if(a[c].$.contentEditable!="inherit")b=a[c].$.contentEditable;return b=="true"}};
CKEDITOR.dom.text=function(a,b){if(typeof a=="string")a=(b?b.$:document).createTextNode(a);this.$=a};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;
CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(a){if(CKEDITOR.env.ie&&a==this.getLength()){var b=this.getDocument().createText("");b.insertAfter(this);return b}b=this.getDocument();a=new CKEDITOR.dom.text(this.$.splitText(a),b);if(CKEDITOR.env.ie8){b=new CKEDITOR.dom.text("",b);b.insertAfter(a);b.remove()}return a},substring:function(a,b){return typeof b!="number"?
this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,b)}});CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document;this.$=a.$.createDocumentFragment()};
CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling)}},true,{append:1,appendBogus:1,getFirst:1,getLast:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});
(function(){function a(g,f){if(this._.end)return null;var d,k=this.range,l,m=this.guard,p=this.type,r=g?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start){this._.start=1;k.trim();if(k.collapsed){this.end();return null}}if(!g&&!this._.guardLTR){var u=k.endContainer,n=u.getChild(k.endOffset);this._.guardLTR=function(y,H){return(!H||!u.equals(y))&&(!n||!y.equals(n))&&(y.type!=CKEDITOR.NODE_ELEMENT||!H||y.getName()!="body")}}if(g&&!this._.guardRTL){var s=k.startContainer,q=k.startOffset>0&&
s.getChild(k.startOffset-1);this._.guardRTL=function(y,H){return(!H||!s.equals(y))&&(!q||!y.equals(q))&&(y.type!=CKEDITOR.NODE_ELEMENT||!H||y.getName()!="body")}}var w=g?this._.guardRTL:this._.guardLTR;l=m?function(y,H){if(w(y,H)===false)return false;return m(y,H)}:w;if(this.current)d=this.current[r](false,p,l);else if(g){d=k.endContainer;if(k.endOffset>0&&d.getChild){d=d.getChild(k.endOffset-1);if(l(d)===false)d=null}else d=l(d,true)===false?null:d.getPreviousSourceNode(true,p,l)}else{d=k.startContainer;
if(d.getChild)d=d.getChild(k.startOffset);if(d){if(l(d)===false)d=null}else d=l(k.startContainer,true)===false?null:k.startContainer.getNextSourceNode(true,p,l)}for(;d&&!this._.end;){this.current=d;if(!this.evaluator||this.evaluator(d)!==false){if(!f)return d}else if(f&&this.evaluator)return false;d=d[r](false,p,l)}this.end();return this.current=null}function b(g){for(var f,d=null;f=a.call(this,g);)d=f;return d}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(g){this.range=g;this._={}},
proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return a.call(this,0,1)!==false},checkBackward:function(){return a.call(this,1,1)!==false},lastForward:function(){return b.call(this)},lastBackward:function(){return b.call(this,1)},reset:function(){delete this.current;this._={}}}});var c={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,
"table-column":1,"table-cell":1,"table-caption":1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(g){g=CKEDITOR.tools.extend({},CKEDITOR.dtd.$block,g||{});return this.getComputedStyle("float")=="none"&&c[this.getComputedStyle("display")]||g[this.getName()]};CKEDITOR.dom.walker.blockBoundary=function(g){return function(f){return!(f.type==CKEDITOR.NODE_ELEMENT&&f.isBlockBoundary(g))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=
function(g,f){function d(k){return k&&k.getName&&k.getName()=="span"&&k.data("cke-bookmark")}return function(k){var l,m;l=k&&!k.getName&&(m=k.getParent())&&d(m);l=g?l:l||d(k);return!!(f^l)}};CKEDITOR.dom.walker.whitespaces=function(g){return function(f){f=f&&f.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(f.getText());return!!(g^f)}};CKEDITOR.dom.walker.invisible=function(g){var f=CKEDITOR.dom.walker.whitespaces();return function(d){d=f(d)||d.is&&!d.$.offsetHeight;return!!(g^d)}};CKEDITOR.dom.walker.nodeType=
function(g,f){return function(d){return!!(f^d.type==g)}};var e=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,h=CKEDITOR.dom.walker.whitespaces(),j=CKEDITOR.dom.walker.bookmark();CKEDITOR.dom.element.prototype.getBogus=function(){var g=this;do g=g.getPreviousSourceNode();while(j(g)||h(g)||g.type==CKEDITOR.NODE_ELEMENT&&g.getName()in CKEDITOR.dtd.$inline&&!(g.getName()in CKEDITOR.dtd.$empty));if(g&&(!CKEDITOR.env.ie?g.is&&g.is("br"):g.getText&&e.test(g.getText())))return g;return false}})();
CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=true;this.document=a};
(function(){function a(d){var k=false,l=CKEDITOR.dom.walker.bookmark(true);return function(m){if(l(m))return true;if(m.type==CKEDITOR.NODE_TEXT){if(CKEDITOR.tools.trim(m.getText()).length)return false}else if(m.type==CKEDITOR.NODE_ELEMENT){if(m.$.nodeType==CKEDITOR.NODE_COMMENT)return false;if(!j[m.getName()])if(!d&&!CKEDITOR.env.ie&&m.getName()=="br"&&!k)k=true;else return false}return true}}function b(d){return d.type!=CKEDITOR.NODE_TEXT&&d.getName()in CKEDITOR.dtd.$removeEmpty||!CKEDITOR.tools.trim(d.getText())||
!!d.getParent().data("cke-bookmark")}function c(d){return!g(d)&&!f(d)}var e=function(d){d.collapsed=d.startContainer&&d.endContainer&&d.startContainer.equals(d.endContainer)&&d.startOffset==d.endOffset},h=function(d,k,l,m){d.optimizeBookmark();var p=d.startContainer,r=d.endContainer,u=d.startOffset,n=d.endOffset,s,q;if(r.type==CKEDITOR.NODE_TEXT)r=r.split(n);else if(r.getChildCount()>0)if(n>=r.getChildCount()){r=r.append(d.document.createText(""));q=true}else r=r.getChild(n);if(p.type==CKEDITOR.NODE_TEXT){p.split(u);
if(p.equals(r))r=p.getNext()}else if(u)if(u>=p.getChildCount()){p=p.append(d.document.createText(""));s=true}else p=p.getChild(u).getPrevious();else{p=p.getFirst().insertBeforeMe(d.document.createText(""));s=true}u=p.getParents();n=r.getParents();var w,y,H;for(w=0;w<u.length;w++){y=u[w];H=n[w];if(!y.equals(H))break}for(var D=l,B,G,I,K=w;K<u.length;K++){B=u[K];if(D&&!B.equals(p))G=D.append(B.clone());for(B=B.getNext();B;){if(B.equals(n[K])||B.equals(r))break;I=B.getNext();if(k==2)D.append(B.clone(true));
else{B.remove();k==1&&D.append(B)}B=I}if(D)D=G}D=l;for(l=w;l<n.length;l++){B=n[l];if(k>0&&!B.equals(r))G=D.append(B.clone());if(!u[l]||B.$.parentNode!=u[l].$.parentNode)for(B=B.getPrevious();B;){if(B.equals(u[l])||B.equals(p))break;I=B.getPrevious();if(k==2)D.$.insertBefore(B.$.cloneNode(true),D.$.firstChild);else{B.remove();k==1&&D.$.insertBefore(B.$,D.$.firstChild)}B=I}if(D)D=G}if(k==2){y=d.startContainer;if(y.type==CKEDITOR.NODE_TEXT){y.$.data+=y.$.nextSibling.data;y.$.parentNode.removeChild(y.$.nextSibling)}d=
d.endContainer;if(d.type==CKEDITOR.NODE_TEXT&&d.$.nextSibling){d.$.data+=d.$.nextSibling.data;d.$.parentNode.removeChild(d.$.nextSibling)}}else{if(y&&H&&(p.$.parentNode!=y.$.parentNode||r.$.parentNode!=H.$.parentNode)){k=H.getIndex();s&&H.$.parentNode==p.$.parentNode&&k--;if(m&&y.type==CKEDITOR.NODE_ELEMENT){m=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',d.document);m.insertAfter(y);y.mergeSiblings(false);d.moveToBookmark({startNode:m})}else d.setStart(H.getParent(),
k)}d.collapse(true)}s&&p.remove();q&&r.$.parentNode&&r.remove()},j={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},g=new CKEDITOR.dom.walker.whitespaces,f=new CKEDITOR.dom.walker.bookmark;CKEDITOR.dom.range.prototype={clone:function(){var d=new CKEDITOR.dom.range(this.document);d.startContainer=this.startContainer;d.startOffset=this.startOffset;d.endContainer=this.endContainer;
d.endOffset=this.endOffset;d.collapsed=this.collapsed;return d},collapse:function(d){if(d){this.endContainer=this.startContainer;this.endOffset=this.startOffset}else{this.startContainer=this.endContainer;this.startOffset=this.endOffset}this.collapsed=true},cloneContents:function(){var d=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||h(this,2,d);return d},deleteContents:function(d){this.collapsed||h(this,0,null,d)},extractContents:function(d){var k=new CKEDITOR.dom.documentFragment(this.document);
this.collapsed||h(this,1,k,d);return k},createBookmark:function(d){var k,l,m,p,r=this.collapsed;k=this.document.createElement("span");k.data("cke-bookmark",1);k.setStyle("display","none");k.setHtml("&nbsp;");if(d){m="cke_bm_"+CKEDITOR.tools.getNextNumber();k.setAttribute("id",m+"S")}if(!r){l=k.clone();l.setHtml("&nbsp;");d&&l.setAttribute("id",m+"E");p=this.clone();p.collapse();p.insertNode(l)}p=this.clone();p.collapse(true);p.insertNode(k);if(l){this.setStartAfter(k);this.setEndBefore(l)}else this.moveToPosition(k,
CKEDITOR.POSITION_AFTER_END);return{startNode:d?m+"S":k,endNode:d?m+"E":l,serializable:d,collapsed:r}},createBookmark2:function(d){var k=this.startContainer,l=this.endContainer,m=this.startOffset,p=this.endOffset,r=this.collapsed,u,n;if(!k||!l)return{start:0,end:0};if(d){if(k.type==CKEDITOR.NODE_ELEMENT)if((u=k.getChild(m))&&u.type==CKEDITOR.NODE_TEXT&&m>0&&u.getPrevious().type==CKEDITOR.NODE_TEXT){k=u;m=0}for(;k.type==CKEDITOR.NODE_TEXT&&(n=k.getPrevious())&&n.type==CKEDITOR.NODE_TEXT;){k=n;m+=n.getLength()}if(!r){if(l.type==
CKEDITOR.NODE_ELEMENT)if((u=l.getChild(p))&&u.type==CKEDITOR.NODE_TEXT&&p>0&&u.getPrevious().type==CKEDITOR.NODE_TEXT){l=u;p=0}for(;l.type==CKEDITOR.NODE_TEXT&&(n=l.getPrevious())&&n.type==CKEDITOR.NODE_TEXT;){l=n;p+=n.getLength()}}}return{start:k.getAddress(d),end:r?null:l.getAddress(d),startOffset:m,endOffset:p,normalized:d,collapsed:r,is2:true}},moveToBookmark:function(d){if(d.is2){var k=this.document.getByAddress(d.start,d.normalized),l=d.startOffset,m=d.end&&this.document.getByAddress(d.end,
d.normalized);d=d.endOffset;this.setStart(k,l);m?this.setEnd(m,d):this.collapse(true)}else{k=(l=d.serializable)?this.document.getById(d.startNode):d.startNode;d=l?this.document.getById(d.endNode):d.endNode;this.setStartBefore(k);k.remove();if(d){this.setEndBefore(d);d.remove()}else this.collapse(true)}},getBoundaryNodes:function(){var d=this.startContainer,k=this.endContainer,l=this.startOffset,m=this.endOffset,p;if(d.type==CKEDITOR.NODE_ELEMENT){p=d.getChildCount();if(p>l)d=d.getChild(l);else if(p<
1)d=d.getPreviousSourceNode();else{for(d=d.$;d.lastChild;)d=d.lastChild;d=new CKEDITOR.dom.node(d);d=d.getNextSourceNode()||d}}if(k.type==CKEDITOR.NODE_ELEMENT){p=k.getChildCount();if(p>m)k=k.getChild(m).getPreviousSourceNode(true);else if(p<1)k=k.getPreviousSourceNode();else{for(k=k.$;k.lastChild;)k=k.lastChild;k=new CKEDITOR.dom.node(k)}}if(d.getPosition(k)&CKEDITOR.POSITION_FOLLOWING)d=k;return{startNode:d,endNode:k}},getCommonAncestor:function(d,k){var l=this.startContainer,m=this.endContainer;
l=l.equals(m)?d&&l.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?l.getChild(this.startOffset):l:l.getCommonAncestor(m);return k&&!l.is?l.getParent():l},optimize:function(){var d=this.startContainer,k=this.startOffset;if(d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_COMMENT)if(k)k>=d.getLength()&&this.setStartAfter(d);else this.setStartBefore(d);d=this.endContainer;k=this.endOffset;if(d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_COMMENT)if(k)k>=d.getLength()&&this.setEndAfter(d);
else this.setEndBefore(d)},optimizeBookmark:function(){var d=this.startContainer,k=this.endContainer;d.is&&d.is("span")&&d.data("cke-bookmark")&&this.setStartAt(d,CKEDITOR.POSITION_BEFORE_START);k&&k.is&&k.is("span")&&k.data("cke-bookmark")&&this.setEndAt(k,CKEDITOR.POSITION_AFTER_END)},trim:function(d,k){var l=this.startContainer,m=this.startOffset,p=this.collapsed;if((!d||p)&&l&&l.type==CKEDITOR.NODE_TEXT){if(m)if(m>=l.getLength()){m=l.getIndex()+1;l=l.getParent()}else{var r=l.split(m);m=l.getIndex()+
1;l=l.getParent();if(this.startContainer.equals(this.endContainer))this.setEnd(r,this.endOffset-this.startOffset);else if(l.equals(this.endContainer))this.endOffset+=1}else{m=l.getIndex();l=l.getParent()}this.setStart(l,m);if(p){this.collapse(true);return}}l=this.endContainer;m=this.endOffset;if(!(k||p)&&l&&l.type==CKEDITOR.NODE_TEXT){if(m){m>=l.getLength()||l.split(m);m=l.getIndex()+1}else m=l.getIndex();l=l.getParent();this.setEnd(l,m)}},enlarge:function(d,k){switch(d){case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;
var l=this.getCommonAncestor(),m=this.document.getBody(),p,r,u,n,s,q=false,w,y;w=this.startContainer;y=this.startOffset;if(w.type==CKEDITOR.NODE_TEXT){if(y){w=!CKEDITOR.tools.trim(w.substring(0,y)).length&&w;q=!!w}if(w)if(!(n=w.getPrevious()))u=w.getParent()}else{if(y)n=w.getChild(y-1)||w.getLast();n||(u=w)}for(;u||n;){if(u&&!n){if(!s&&u.equals(l))s=true;if(!m.contains(u))break;if(!q||u.getComputedStyle("display")!="inline"){q=false;if(s)p=u;else this.setStartBefore(u)}n=u.getPrevious()}for(;n;){w=
false;if(n.type==CKEDITOR.NODE_TEXT){y=n.getText();if(/[^\s\ufeff]/.test(y))n=null;w=/[\s\ufeff]$/.test(y)}else if(n.$.nodeType==CKEDITOR.NODE_ELEMENT&&(n.$.offsetWidth>0||k&&n.is("br"))&&!n.data("cke-bookmark"))if(q&&CKEDITOR.dtd.$removeEmpty[n.getName()]){y=n.getText();if(/[^\s\ufeff]/.test(y))n=null;else for(var H=n.$.all||n.$.getElementsByTagName("*"),D=0,B;B=H[D++];)if(!CKEDITOR.dtd.$removeEmpty[B.nodeName.toLowerCase()]){n=null;break}if(n)w=!!y.length}else n=null;if(w)if(q)if(s)p=u;else u&&
this.setStartBefore(u);else q=true;if(n){w=n.getPrevious();if(!u&&!w){u=n;n=null;break}n=w}else u=null}if(u)u=u.getParent()}w=this.endContainer;y=this.endOffset;u=n=null;s=q=false;if(w.type==CKEDITOR.NODE_TEXT){w=!CKEDITOR.tools.trim(w.substring(y)).length&&w;q=!(w&&w.getLength());if(w)if(!(n=w.getNext()))u=w.getParent()}else(n=w.getChild(y))||(u=w);for(;u||n;){if(u&&!n){if(!s&&u.equals(l))s=true;if(!m.contains(u))break;if(!q||u.getComputedStyle("display")!="inline"){q=false;if(s)r=u;else u&&this.setEndAfter(u)}n=
u.getNext()}for(;n;){w=false;if(n.type==CKEDITOR.NODE_TEXT){y=n.getText();if(/[^\s\ufeff]/.test(y))n=null;w=/^[\s\ufeff]/.test(y)}else if(n.$.nodeType==CKEDITOR.NODE_ELEMENT&&(n.$.offsetWidth>0||k&&n.is("br"))&&!n.data("cke-bookmark"))if(q&&CKEDITOR.dtd.$removeEmpty[n.getName()]){y=n.getText();if(/[^\s\ufeff]/.test(y))n=null;else{H=n.$.all||n.$.getElementsByTagName("*");for(D=0;B=H[D++];)if(!CKEDITOR.dtd.$removeEmpty[B.nodeName.toLowerCase()]){n=null;break}}if(n)w=!!y.length}else n=null;if(w)if(q)if(s)r=
u;else this.setEndAfter(u);if(n){w=n.getNext();if(!u&&!w){u=n;n=null;break}n=w}else u=null}if(u)u=u.getParent()}if(p&&r){l=p.contains(r)?r:p;this.setStartBefore(l);this.setEndAfter(l)}break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:u=new CKEDITOR.dom.range(this.document);m=this.document.getBody();u.setStartAt(m,CKEDITOR.POSITION_AFTER_START);u.setEnd(this.startContainer,this.startOffset);u=new CKEDITOR.dom.walker(u);var G,I,K=CKEDITOR.dom.walker.blockBoundary(d==
CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),L=function(o){var z=K(o);z||(G=o);return z};l=function(o){var z=L(o);if(!z&&o.is&&o.is("br"))I=o;return z};u.guard=L;u=u.lastBackward();G=G||m;this.setStartAt(G,!G.is("br")&&(!u&&this.checkStartOfBlock()||u&&G.contains(u))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);u=this.clone();u.collapse();u.setEndAt(m,CKEDITOR.POSITION_BEFORE_END);u=new CKEDITOR.dom.walker(u);u.guard=d==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?l:L;G=null;u=u.lastForward();
G=G||m;this.setEndAt(G,!u&&this.checkEndOfBlock()||u&&G.contains(u)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);I&&this.setEndAfter(I)}},shrink:function(d,k){if(!this.collapsed){d=d||CKEDITOR.SHRINK_TEXT;var l=this.clone(),m=this.startContainer,p=this.endContainer,r=this.startOffset,u=this.endOffset,n=1,s=1;if(m&&m.type==CKEDITOR.NODE_TEXT)if(r)if(r>=m.getLength())l.setStartAfter(m);else{l.setStartBefore(m);n=0}else l.setStartBefore(m);if(p&&p.type==CKEDITOR.NODE_TEXT)if(u)if(u>=
p.getLength())l.setEndAfter(p);else{l.setEndAfter(p);s=0}else l.setEndBefore(p);l=new CKEDITOR.dom.walker(l);var q=CKEDITOR.dom.walker.bookmark();l.evaluator=function(y){return y.type==(d==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var w;l.guard=function(y,H){if(q(y))return true;if(d==CKEDITOR.SHRINK_ELEMENT&&y.type==CKEDITOR.NODE_TEXT)return false;if(H&&y.equals(w))return false;if(!H&&y.type==CKEDITOR.NODE_ELEMENT)w=y;return true};if(n)(m=l[d==CKEDITOR.SHRINK_ELEMENT?"lastForward":
"next"]())&&this.setStartAt(m,k?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);if(s){l.reset();(l=l[d==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(l,k?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)}return!!(n||s)}},enlargeFormattables:function(){var d;if(this.startContainer.isReadOnly())if(d=this.startContainer.findFormattableAncestor())this.setStartBefore(d);if(this.endContainer.isReadOnly())if(d=this.endContainer.findFormattableAncestor())this.setEndAfter(d);
return this},insertNode:function(d){this.optimizeBookmark();this.trim(false,true);var k=this.startContainer,l=this.startOffset;(l=typeof k.getChild!="function"?new CKEDITOR.dom.element(k.$.previousSibling):k.getChild(l))?d.insertBefore(l):k.append(d);d.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(d)},moveToPosition:function(d,k){this.setStartAt(d,k);this.collapse(true)},selectNodeContents:function(d){this.setStart(d,0);this.setEnd(d,d.type==CKEDITOR.NODE_TEXT?d.getLength():
d.getChildCount())},setStart:function(d,k){if(d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[d.getName()]){k=d.getIndex();d=d.getParent()}this.startContainer=d;this.startOffset=k;if(!this.endContainer){this.endContainer=d;this.endOffset=k}e(this)},setEnd:function(d,k){if(d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[d.getName()]){k=d.getIndex()+1;d=d.getParent()}this.endContainer=d;this.endOffset=k;if(!this.startContainer){this.startContainer=d;this.startOffset=k}e(this)},setStartAfter:function(d){this.setStart(d.getParent(),
d.getIndex()+1)},setStartBefore:function(d){this.setStart(d.getParent(),d.getIndex())},setEndAfter:function(d){this.setEnd(d.getParent(),d.getIndex()+1)},setEndBefore:function(d){this.setEnd(d.getParent(),d.getIndex())},setStartAt:function(d,k){switch(k){case CKEDITOR.POSITION_AFTER_START:this.setStart(d,0);break;case CKEDITOR.POSITION_BEFORE_END:d.type==CKEDITOR.NODE_TEXT?this.setStart(d,d.getLength()):this.setStart(d,d.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(d);
break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(d)}e(this)},setEndAt:function(d,k){switch(k){case CKEDITOR.POSITION_AFTER_START:this.setEnd(d,0);break;case CKEDITOR.POSITION_BEFORE_END:d.type==CKEDITOR.NODE_TEXT?this.setEnd(d,d.getLength()):this.setEnd(d,d.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(d);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(d)}e(this)},fixBlock:function(d,k){var l=this.createBookmark(),m=this.document.createElement(k);this.collapse(d);
this.enlargeFormattables();this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(m);m.trim();CKEDITOR.env.ie||m.appendBogus();this.insertNode(m);this.moveToBookmark(l);return m},splitBlock:function(d){var k=new CKEDITOR.dom.elementPath(this.startContainer),l=new CKEDITOR.dom.elementPath(this.endContainer),m=k.block,p=l.block,r=null;if(!k.blockLimit.equals(l.blockLimit))return null;if(d!="br"){if(!m){m=this.fixBlock(true,d);p=(new CKEDITOR.dom.elementPath(this.endContainer)).block}p||
(p=this.fixBlock(false,d))}d=m&&this.checkStartOfBlock();k=p&&this.checkEndOfBlock();this.deleteContents();if(m&&m.equals(p))if(k){r=new CKEDITOR.dom.elementPath(this.startContainer);this.moveToPosition(p,CKEDITOR.POSITION_AFTER_END);p=null}else if(d){r=new CKEDITOR.dom.elementPath(this.startContainer);this.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START);m=null}else{p=this.splitElement(m);!CKEDITOR.env.ie&&!m.is("ul","ol")&&m.appendBogus()}return{previousBlock:m,nextBlock:p,wasStartOfBlock:d,wasEndOfBlock:k,
elementPath:r}},splitElement:function(d){if(!this.collapsed)return null;this.setEndAt(d,CKEDITOR.POSITION_BEFORE_END);var k=this.extractContents(),l=d.clone(false);k.appendTo(l);l.insertAfter(d);this.moveToPosition(d,CKEDITOR.POSITION_AFTER_END);return l},checkBoundaryOfElement:function(d,k){var l=k==CKEDITOR.START,m=this.clone();m.collapse(l);m[l?"setStartAt":"setEndAt"](d,l?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);m=new CKEDITOR.dom.walker(m);m.evaluator=b;return m[l?"checkBackward":
"checkForward"]()},checkStartOfBlock:function(){var d=this.startContainer,k=this.startOffset;if(k&&d.type==CKEDITOR.NODE_TEXT)if(CKEDITOR.tools.ltrim(d.substring(0,k)).length)return false;this.trim();d=new CKEDITOR.dom.elementPath(this.startContainer);k=this.clone();k.collapse(true);k.setStartAt(d.block||d.blockLimit,CKEDITOR.POSITION_AFTER_START);d=new CKEDITOR.dom.walker(k);d.evaluator=a(true);return d.checkBackward()},checkEndOfBlock:function(){var d=this.endContainer,k=this.endOffset;if(d.type==
CKEDITOR.NODE_TEXT)if(CKEDITOR.tools.rtrim(d.substring(k)).length)return false;this.trim();d=new CKEDITOR.dom.elementPath(this.endContainer);k=this.clone();k.collapse(false);k.setEndAt(d.block||d.blockLimit,CKEDITOR.POSITION_BEFORE_END);d=new CKEDITOR.dom.walker(k);d.evaluator=a(false);return d.checkForward()},checkReadOnly:function(){function d(k,l){for(;k;){if(k.type==CKEDITOR.NODE_ELEMENT)if(k.getAttribute("contentEditable")=="false"&&!k.data("cke-editable"))return 0;else if(k.is("body")||k.getAttribute("contentEditable")==
"true"&&(k.contains(l)||k.equals(l)))break;k=k.getParent()}return 1}return function(){var k=this.startContainer,l=this.endContainer;return!(d(k,l)&&d(l,k))}}(),moveToElementEditablePosition:function(d,k){var l;if(CKEDITOR.dtd.$empty[d.getName()])return false;for(;d&&d.type==CKEDITOR.NODE_ELEMENT;){if(l=d.isEditable())this.moveToPosition(d,k?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START);else if(CKEDITOR.dtd.$inline[d.getName()]){this.moveToPosition(d,k?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);
return true}if((d=CKEDITOR.dtd.$empty[d.getName()]?d[k?"getPrevious":"getNext"](c):d[k?"getLast":"getFirst"](c))&&d.type==CKEDITOR.NODE_TEXT){this.moveToPosition(d,k?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);return true}}return l},moveToElementEditStart:function(d){return this.moveToElementEditablePosition(d)},moveToElementEditEnd:function(d){return this.moveToElementEditablePosition(d,true)},getEnclosedNode:function(){var d=this.clone();d.optimize();if(d.startContainer.type!=CKEDITOR.NODE_ELEMENT||
d.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var k=new CKEDITOR.dom.walker(d),l=CKEDITOR.dom.walker.bookmark(true),m=CKEDITOR.dom.walker.whitespaces(true);d.evaluator=function(p){return m(p)&&l(p)};d=k.next();k.reset();return d&&d.equals(k.previous())?d:null},getTouchedStartNode:function(){var d=this.startContainer;if(this.collapsed||d.type!=CKEDITOR.NODE_ELEMENT)return d;return d.getChild(this.startOffset)||d},getTouchedEndNode:function(){var d=this.endContainer;if(this.collapsed||d.type!=
CKEDITOR.NODE_ELEMENT)return d;return d.getChild(this.endOffset-1)||d}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.STARTEND=3;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;
(function(){function a(c,e,h){var j=c.serializable,g=e[h?"endContainer":"startContainer"],f=h?"endOffset":"startOffset",d=j?e.document.getById(c.startNode):c.startNode;c=j?e.document.getById(c.endNode):c.endNode;if(g.equals(d.getPrevious())){e.startOffset=e.startOffset-g.getLength()-c.getPrevious().getLength();g=c.getNext()}else if(g.equals(c.getPrevious())){e.startOffset-=g.getLength();g=c.getNext()}g.equals(d.getParent())&&e[f]++;g.equals(c.getParent())&&e[f]++;e[h?"endContainer":"startContainer"]=
g;return e}CKEDITOR.dom.rangeList=function(c){if(c instanceof CKEDITOR.dom.rangeList)return c;if(c){if(c instanceof CKEDITOR.dom.range)c=[c]}else c=[];return CKEDITOR.tools.extend(c,b)};var b={createIterator:function(){var c=this,e=CKEDITOR.dom.walker.bookmark(),h=[],j;return{getNextRange:function(g){j=j==undefined?0:j+1;var f=c[j];if(f&&c.length>1){if(!j)for(var d=c.length-1;d>=0;d--)h.unshift(c[d].createBookmark(true));if(g)for(var k=0;c[j+k+1];){var l=f.document;g=0;d=l.getById(h[k].endNode);for(l=
l.getById(h[k+1].startNode);;){d=d.getNextSourceNode(false);if(l.equals(d))g=1;else if(e(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary())continue;break}if(!g)break;k++}for(f.moveToBookmark(h.shift());k--;){d=c[++j];d.moveToBookmark(h.shift());f.setEnd(d.endContainer,d.endOffset)}}return f}}},createBookmarks:function(c){for(var e=[],h,j=0;j<this.length;j++){e.push(h=this[j].createBookmark(c,true));for(var g=j+1;g<this.length;g++){this[g]=a(h,this[g]);this[g]=a(h,this[g],true)}}return e},createBookmarks2:function(c){for(var e=
[],h=0;h<this.length;h++)e.push(this[h].createBookmark2(c));return e},moveToBookmarks:function(c){for(var e=0;e<this.length;e++)this[e].moveToBookmark(c[e])}}})();
(function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=false;else{var a=CKEDITOR.env.ie&&CKEDITOR.env.version==7;a=CKEDITOR.dom.element.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;background-image:url('+(CKEDITOR.env.ie&&CKEDITOR.env.version<7?CKEDITOR.basePath+"images/spacer.gif":a?"about:blank":"data:image/png;base64,")+')"></div>',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{CKEDITOR.env.hc=a.getComputedStyle("background-image")=="none"}catch(b){CKEDITOR.env.hc=
false}if(CKEDITOR.env.hc)CKEDITOR.env.cssClass+=" cke_hc";a.remove()}})();CKEDITOR.plugins.load(CKEDITOR.config.corePlugins.split(","),function(){CKEDITOR.status="loaded";CKEDITOR.fire("loaded");var a=CKEDITOR._.pending;if(a){delete CKEDITOR._.pending;for(var b=0;b<a.length;b++)CKEDITOR.add(a[b])}});if(CKEDITOR.env.ie)try{document.execCommand("BackgroundImageCache",false,true)}catch(e$$12){}
CKEDITOR.skins.add("kama",function(){var a="cke_ui_color";return{editor:{css:["editor.css"]},dialog:{css:["dialog.css"]},templates:{css:["templates.css"]},margins:[0,0,0,0],init:function(b){function c(d){var k=d.getById(a);if(!k){k=d.getHead().append("style");k.setAttribute("id",a);k.setAttribute("type","text/css")}return k}function e(d,k,l){for(var m,p,r,u=0;u<d.length;u++)if(CKEDITOR.env.webkit)for(p=0;p<k.length;p++){r=k[p][1];for(m=0;m<l.length;m++)r=r.replace(l[m][0],l[m][1]);d[u].$.sheet.addRule(k[p][0],
r)}else{r=k;for(m=0;m<l.length;m++)r=r.replace(l[m][0],l[m][1]);if(CKEDITOR.env.ie)d[u].$.styleSheet.cssText+=r;else d[u].$.innerHTML+=r}}if(b.config.width&&!isNaN(b.config.width))b.config.width-=12;var h=[],j="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}";
if(CKEDITOR.env.webkit){j=j.split("}").slice(0,-1);for(var g=0;g<j.length;g++)j[g]=j[g].split("{")}var f=/\$color/g;CKEDITOR.tools.extend(b,{uiColor:null,getUiColor:function(){return this.uiColor},setUiColor:function(d){var k,l=c(CKEDITOR.document),m="."+b.id;m=[m+" .cke_wrapper",m+"_dialog .cke_dialog_contents",m+"_dialog a.cke_dialog_tab",m+"_dialog .cke_dialog_footer"].join(",");k=CKEDITOR.env.webkit?[[m,"background-color: $color !important;"]]:m+"{background-color: $color !important;}";return(this.setUiColor=
function(p){var r=[[f,p]];b.uiColor=p;e([l],k,r);e(h,j,r)})(d)}});b.on("menuShow",function(d){d=d.data[0].element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!d.getById("cke_ui_color")){d=c(d);h.push(d);var k=b.getUiColor();k&&e([d],j,[[f,k]])}});b.config.uiColor&&b.setUiColor(b.config.uiColor)}}}());
(function(){function a(){CKEDITOR.dialog.on("resize",function(b){b=b.data;b.skin=="kama"&&b.dialog.parts.contents.setStyles({width:b.width+"px",height:b.height+"px"})})}CKEDITOR.dialog?a():CKEDITOR.on("dialogPluginReady",a)})();
(function(){CKEDITOR.plugins.add("a11yhelp",{availableLangs:{en:1,he:1},init:function(a){var b=this;a.addCommand("a11yHelp",{exec:function(){var c=a.langCode;c=b.availableLangs[c]?c:"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(b.path+"lang/"+c+".js"),function(){CKEDITOR.tools.extend(a.lang,b.langEntries[c]);a.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},canUndo:false});CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js")}})})();
CKEDITOR.plugins.add("basicstyles",{requires:["styles","button"],init:function(a){var b=function(h,j,g,f){f=new CKEDITOR.style(f);a.attachStyleStateChange(f,function(d){a.getCommand(g).setState(d)});a.addCommand(g,new CKEDITOR.styleCommand(f));a.ui.addButton(h,{label:j,command:g})},c=a.config,e=a.lang;b("Bold",e.bold,"bold",c.coreStyles_bold);b("Italic",e.italic,"italic",c.coreStyles_italic);b("Underline",e.underline,"underline",c.coreStyles_underline);b("Strike",e.strike,"strike",c.coreStyles_strike);
b("Subscript",e.subscript,"subscript",c.coreStyles_subscript);b("Superscript",e.superscript,"superscript",c.coreStyles_superscript)}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};CKEDITOR.config.coreStyles_superscript={element:"sup"};
(function(){function a(f){var d=f.editor,k=f.data.path,l=d.config.useComputedState,m;l=l===undefined||l;if(!l)for(m=k.lastElement;m&&!(m.getName()in g||m.is("body"));){var p=m.getParent();if(!p)break;m=p}m=m||k.block||k.blockLimit;m.is("body")&&(m=d.getSelection().getRanges()[0].getEnclosedNode());if(m){k=l?m.getComputedStyle("direction"):m.getStyle("direction")||m.getAttribute("dir");d.getCommand("bidirtl").setState(k=="rtl"?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);d.getCommand("bidiltr").setState(k==
"ltr"?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}d=f.editor;f=f.data.path.block||f.data.path.blockLimit;d.fire("contentDirChanged",f?f.getComputedStyle("direction"):d.lang.dir)}function b(f,d,k,l){CKEDITOR.dom.element.setMarker(l,f,"bidi_processed",1);for(l=f;(l=l.getParent())&&!l.is("body");)if(l.getCustomData("bidi_processed")){f.removeStyle("direction");f.removeAttribute("dir");return null}var m=(l="useComputedState"in k.config?k.config.useComputedState:1)?f.getComputedStyle("direction"):f.getStyle("direction")||
f.hasAttribute("dir");if(m==d)return null;m=l?m:f.getComputedStyle("direction");f.removeStyle("direction");if(l){f.removeAttribute("dir");d!=f.getComputedStyle("direction")&&f.setAttribute("dir",d)}else f.setAttribute("dir",d);d!=m&&k.fire("dirChanged",{node:f,dir:d});k.forceNextSelectionCheck();return null}function c(f,d,k){var l=f.getCommonAncestor(false,true);f=f.clone();f.enlarge(k==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(f.checkBoundaryOfElement(l,
CKEDITOR.START)&&f.checkBoundaryOfElement(l,CKEDITOR.END)){for(var m;l&&l.type==CKEDITOR.NODE_ELEMENT&&(m=l.getParent())&&m.getChildCount()==1&&!(l.getName()in d);)l=m;return l.type==CKEDITOR.NODE_ELEMENT&&l.getName()in d&&l}}function e(f){return function(d){var k=d.getSelection(),l=d.config.enterMode,m=k.getRanges();if(m&&m.length){var p={},r=k.createBookmarks();m=m.createIterator();for(var u,n=0;u=m.getNextRange(1);){var s=u.getEnclosedNode();if(!s||s&&!(s.type==CKEDITOR.NODE_ELEMENT&&s.getName()in
j))s=c(u,h,l);s&&!s.isReadOnly()&&b(s,f,d,p);var q=new CKEDITOR.dom.walker(u),w=r[n].startNode,y=r[n++].endNode;q.evaluator=function(H){return!!(H.type==CKEDITOR.NODE_ELEMENT&&H.getName()in h&&!(H.getName()==(l==CKEDITOR.ENTER_P?"p":"div")&&H.getParent().type==CKEDITOR.NODE_ELEMENT&&H.getParent().getName()=="blockquote")&&H.getPosition(w)&CKEDITOR.POSITION_FOLLOWING&&(H.getPosition(y)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;s=q.next();)b(s,f,d,p);
u=u.createIterator();for(u.enlargeBr=l!=CKEDITOR.ENTER_BR;s=u.getNextParagraph(l==CKEDITOR.ENTER_P?"p":"div");)!s.isReadOnly()&&b(s,f,d,p)}CKEDITOR.dom.element.clearAllMarkers(p);d.forceNextSelectionCheck();k.selectBookmarks(r);d.focus()}}}var h={table:1,ul:1,ol:1,blockquote:1,div:1},j={},g={};CKEDITOR.tools.extend(j,h,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(g,j,{td:1});CKEDITOR.plugins.add("bidi",{requires:["styles","button"],init:function(f){var d=function(l,m,p,r){f.addCommand(p,new CKEDITOR.command(f,
{exec:r}));f.ui.addButton(l,{label:m,command:p})},k=f.lang.bidi;d("BidiLtr",k.ltr,"bidiltr",e("ltr"));d("BidiRtl",k.rtl,"bidirtl",e("rtl"));f.on("selectionChange",a)}})})();
(function(){function a(c){var e=c.editor.getCommand("blockquote");c=c.data.path;c=c.block||c.blockLimit;c=!c||c.getName()=="body"?CKEDITOR.TRISTATE_OFF:c.getAscendant("blockquote",true)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;e.state=c;e.fire("state")}var b={exec:function(c){var e=c.getCommand("blockquote").state,h=c.getSelection(),j=h&&h.getRanges(true)[0];if(j){var g=h.createBookmarks();if(CKEDITOR.env.ie){var f=g[0].startNode,d=g[0].endNode,k;if(f&&f.getParent().getName()=="blockquote")for(k=
f;k=k.getNext();)if(k.type==CKEDITOR.NODE_ELEMENT&&k.isBlockBoundary()){f.move(k,true);break}if(d&&d.getParent().getName()=="blockquote")for(k=d;k=k.getPrevious();)if(k.type==CKEDITOR.NODE_ELEMENT&&k.isBlockBoundary()){d.move(k);break}}var l=j.createIterator();l.enlargeBr=c.config.enterMode!=CKEDITOR.ENTER_BR;if(e==CKEDITOR.TRISTATE_OFF){for(f=[];e=l.getNextParagraph();)f.push(e);if(f.length<1){e=c.document.createElement(c.config.enterMode==CKEDITOR.ENTER_P?"p":"div");d=g.shift();j.insertNode(e);
e.append(new CKEDITOR.dom.text("",c.document));j.moveToBookmark(d);j.selectNodeContents(e);j.collapse(true);d=j.createBookmark();f.push(e);g.unshift(d)}k=f[0].getParent();j=[];for(d=0;d<f.length;d++){e=f[d];k=k.getCommonAncestor(e.getParent())}for(e={table:1,tbody:1,tr:1,ol:1,ul:1};e[k.getName()];)k=k.getParent();for(d=null;f.length>0;){for(e=f.shift();!e.getParent().equals(k);)e=e.getParent();e.equals(d)||j.push(e);d=e}for(;j.length>0;){e=j.shift();if(e.getName()=="blockquote"){for(d=new CKEDITOR.dom.documentFragment(c.document);e.getFirst();){d.append(e.getFirst().remove());
f.push(d.getLast())}d.replace(e)}else f.push(e)}j=c.document.createElement("blockquote");for(j.insertBefore(f[0]);f.length>0;){e=f.shift();j.append(e)}}else if(e==CKEDITOR.TRISTATE_ON){d=[];for(k={};e=l.getNextParagraph();){for(f=j=null;e.getParent();){if(e.getParent().getName()=="blockquote"){j=e.getParent();f=e;break}e=e.getParent()}if(j&&f&&!f.getCustomData("blockquote_moveout")){d.push(f);CKEDITOR.dom.element.setMarker(k,f,"blockquote_moveout",true)}}CKEDITOR.dom.element.clearAllMarkers(k);e=
[];f=[];for(k={};d.length>0;){l=d.shift();j=l.getParent();if(l.getPrevious())if(l.getNext()){l.breakParent(l.getParent());f.push(l.getNext())}else l.remove().insertAfter(j);else l.remove().insertBefore(j);if(!j.getCustomData("blockquote_processed")){f.push(j);CKEDITOR.dom.element.setMarker(k,j,"blockquote_processed",true)}e.push(l)}CKEDITOR.dom.element.clearAllMarkers(k);for(d=f.length-1;d>=0;d--){j=f[d];a:{k=j;l=0;for(var m=k.getChildCount(),p=void 0;l<m&&(p=k.getChild(l));l++)if(p.type==CKEDITOR.NODE_ELEMENT&&
p.isBlockBoundary()){k=false;break a}k=true}k&&j.remove()}if(c.config.enterMode==CKEDITOR.ENTER_BR)for(j=true;e.length;){l=e.shift();if(l.getName()=="div"){d=new CKEDITOR.dom.documentFragment(c.document);j&&l.getPrevious()&&!(l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary())&&d.append(c.document.createElement("br"));for(j=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(d);j&&d.append(c.document.createElement("br"));
d.replace(l);j=false}}}h.selectBookmarks(g);c.focus()}}};CKEDITOR.plugins.add("blockquote",{init:function(c){c.addCommand("blockquote",b);c.ui.addButton("Blockquote",{label:c.lang.blockquote,command:"blockquote"});c.on("selectionChange",a)},requires:["domiterator"]})})();CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON=1;
CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,className:a.className||a.command&&"cke_button_"+a.command||"",click:a.click||function(b){b.execCommand(a.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}};
CKEDITOR.ui.button._={instances:[],keydown:function(a,b){var c=CKEDITOR.ui.button._.instances[a];if(c.onkey){b=new CKEDITOR.dom.event(b);return c.onkey(c,b.getKeystroke())!==false}},focus:function(a,b){var c=CKEDITOR.ui.button._.instances[a],e;if(c.onfocus)e=c.onfocus(c,new CKEDITOR.dom.event(b))!==false;CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&b.preventBubble();return e}};
(function(){var a=CKEDITOR.tools.addFunction(CKEDITOR.ui.button._.keydown,CKEDITOR.ui.button._),b=CKEDITOR.tools.addFunction(CKEDITOR.ui.button._.focus,CKEDITOR.ui.button._);CKEDITOR.ui.button.prototype={canGroup:true,render:function(c,e){var h=CKEDITOR.env,j=this._.id=CKEDITOR.tools.getNextId(),g="",f=this.command,d,k;this._.editor=c;var l={id:j,button:this,editor:c,focus:function(){CKEDITOR.document.getById(j).focus()},execute:function(){this.editor.fire("buttonClick",{button:this.button});this.button.click(c)}};
l.clickFn=d=CKEDITOR.tools.addFunction(l.execute,l);l.index=k=CKEDITOR.ui.button._.instances.push(l)-1;if(this.modes){var m={};c.on("beforeModeUnload",function(){m[c.mode]=this._.state},this);c.on("mode",function(){var p=c.mode;this.setState(this.modes[p]?m[p]!=undefined?m[p]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},this)}else if(f)if(f=c.getCommand(f)){f.on("state",function(){RTE.loaded?this.setState(f.state):this.setState(CKEDITOR.TRISTATE_DISABLED)},this);g+="cke_"+(f.state==CKEDITOR.TRISTATE_ON?
"on":f.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off")}f||(g+="cke_off");if(this.className)g+=" "+this.className;if(this.wrapperClassName)g+=" "+this.wrapperClassName;e.push('<span class="cke_button '+g+(this.icon&&this.icon.indexOf(".png")==-1?" cke_noalphafix":"")+'">','<a id="',j,'" class="',g,'"',h.gecko&&h.version>=10900&&!h.hc?"":'" href="javascript:void(\''+(this.title||"").replace("'","")+"')\"",' title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+j+
'_label"'+(this.hasArrow?' aria-haspopup="true"':""));if(h.opera||h.gecko&&h.mac)e.push(' onkeypress="return false;"');h.gecko&&e.push(' onblur="this.style.cssText = this.style.cssText;"');e.push(' onkeydown="return CKEDITOR.tools.callFunction(',a,", ",k,', event);" onfocus="return CKEDITOR.tools.callFunction(',b,", ",k,', event);" onclick="CKEDITOR.tools.callFunction(',d,', this); return false;"><span class="cke_icon"');if(this.icon){h=(this.iconOffset||0)*-16;e.push(' style="background-image:url(',
CKEDITOR.getUrl(this.icon),");background-position:0 "+h+'px;"')}e.push('>&nbsp;</span><span id="',j,'_label" class="cke_label">',this.label,"</span>");if(this.hasArrow)e.push('<span class="cke_buttonarrow">'+(CKEDITOR.env.hc?"&#9660;":"&nbsp;")+"</span>");e.push("</a>","</span>");if(this.onRender)this.onRender();return l},setState:function(c){if(this._.state==c)return false;this._.state=c;var e=CKEDITOR.document.getById(this._.id);if(e){e.setState(c);c==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",
true):e.removeAttribute("aria-disabled");c==CKEDITOR.TRISTATE_ON?e.setAttribute("aria-pressed",true):e.removeAttribute("aria-pressed");return true}else return false}}})();CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)};CKEDITOR.on("reset",function(){CKEDITOR.ui.button._.instances=[]});
(function(){function a(l){if(!(!CKEDITOR.env.ie||CKEDITOR.env.quirks)){var m=l.getSelection(),p;if(m.getType()==CKEDITOR.SELECTION_ELEMENT&&(p=m.getSelectedElement())){var r=m.getRanges()[0],u=l.document.createText("");u.insertBefore(p);r.setStartBefore(u);r.setEndAfter(p);m.selectRanges([r]);setTimeout(function(){if(p.getParent()){u.remove();m.selectElement(p)}},0)}}}function b(l,m){CKEDITOR.env.ie&&(d=1);var p=m.document.$.queryCommandEnabled(l)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;
d=0;return p}function c(){if(this.mode=="wysiwyg"){this.getCommand("cut").setState(k?CKEDITOR.TRISTATE_DISABLED:b("Cut",this));this.getCommand("copy").setState(b("Copy",this));this.fire("pasteState",k?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.env.webkit?CKEDITOR.TRISTATE_OFF:b("Paste",this))}}var e=function(l,m){var p=l.document,r=p.getBody(),u=0,n=function(){u=1};r.on(m,n);(CKEDITOR.env.version>7?p.$:p.$.selection.createRange()).execCommand(m);r.removeListener(m,n);return u},h=CKEDITOR.env.ie?function(l,
m){return e(l,m)}:function(l,m){try{return l.document.$.execCommand(m,false,null)}catch(p){return false}},j=function(l){this.type=l;this.canUndo=this.type=="cut";this.startDisabled=true};j.prototype={exec:function(l){this.type=="cut"&&a(l);var m=h(l,this.type);m||alert(l.lang.clipboard[this.type+"Error"]);return m}};var g={canUndo:false,exec:CKEDITOR.env.ie?function(l){l.focus();if(!l.document.getBody().fire("beforepaste")&&!e(l,"paste")){l.fire("pasteDialog");return false}}:function(l){try{if(!l.document.getBody().fire("beforepaste")&&
!l.document.$.execCommand("Paste",false,null))throw 0;}catch(m){setTimeout(function(){l.fire("pasteDialog")},0);return false}}},f=function(l){if(this.mode=="wysiwyg")switch(l.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:var m=this.document.getBody();if(m.fire("beforepasteonkey")){l.cancel();break}if(!CKEDITOR.env.ie&&m.fire("beforepaste"))l.cancel();else if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)m.fire("paste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+
46:var p=this;this.fire("saveSnapshot");setTimeout(function(){p.fire("saveSnapshot")},0)}},d,k;CKEDITOR.plugins.add("clipboard",{requires:["dialog","htmldataprocessor"],init:function(l){function m(p,r,u,n){var s=l.lang[r];l.addCommand(r,u);l.ui.addButton(p,{label:s,command:r});l.addMenuItems&&l.addMenuItem(r,{label:s,command:r,group:"clipboard",order:n})}l.on("paste",function(p){p=p.data;if(p.html)l.insertHtml(p.html);else p.text&&l.insertText(p.text)},null,null,1E3);l.on("pasteDialog",function(){setTimeout(function(){l.openDialog(l.config.forcePasteAsPlainText?
"pastetext":"paste")},0)});l.on("pasteState",function(p){l.getCommand("paste").setState(p.data)});m("Cut","cut",new j("cut"),1);m("Copy","copy",new j("copy"),4);m("Paste","paste",g,8);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));l.on("key",f,l);l.on("contentDom",function(){l.document.getBody().on("beforepaste",function(p){d||l.fire("beforepaste",{originalEvent:p})})});l.on("selectionChange",function(p){k=p.data.selection.getRanges()[0].checkReadOnly();c.call(l)});l.contextMenu&&
l.contextMenu.addListener(function(p,r){var u=r.getRanges()[0].checkReadOnly();return{cut:!u&&b("Cut",l),copy:b("Copy",l),paste:!u&&(CKEDITOR.env.webkit?CKEDITOR.TRISTATE_OFF:b("Paste",l))}})}})})();
CKEDITOR.plugins.add("colorbutton",{requires:["panelbutton","floatpanel","styles"],init:function(a){function b(g,f,d){var k=CKEDITOR.tools.getNextId()+"_colorBox";a.ui.add(g,CKEDITOR.UI_PANELBUTTON,{label:d,title:d,className:"cke_button_"+g.toLowerCase(),modes:{wysiwyg:1},panel:{css:a.skin.editor.css,attributes:{role:"listbox","aria-label":j.panelTitle}},onBlock:function(l,m){m.autoSize=true;m.element.addClass("cke_colorblock");m.element.setHtml(c(l,f,k));m.element.getDocument().getBody().setStyle("overflow",
"hidden");CKEDITOR.ui.fire("ready",this);var p=m.keys,r=a.lang.dir=="rtl";p[r?37:39]="next";p[40]="next";p[9]="next";p[r?39:37]="prev";p[38]="prev";p[CKEDITOR.SHIFT+9]="prev";p[32]="click"},onOpen:function(){var l=a.getSelection();l=l&&l.getStartElement();l=new CKEDITOR.dom.elementPath(l);var m;l=l.block||l.blockLimit;do m=l&&l.getComputedStyle(f=="back"?"background-color":"color")||"transparent";while(f=="back"&&m=="transparent"&&l&&(l=l.getParent()));if(!m||m=="transparent")m="#ffffff";this._.panel._.iframe.getFrameDocument().getById(k).setStyle("background-color",
m)}})}function c(g,f,d){var k=[],l=h.colorButton_colors.split(","),m=l.length+(h.colorButton_enableMore?2:1),p=CKEDITOR.tools.addFunction(function(s,q){if(s=="?"){var w=arguments.callee,y=function(D){this.removeListener("ok",y);this.removeListener("cancel",y);D.name=="ok"&&w(this.getContentElement("picker","selectedColor").getValue(),q)};a.openDialog("colordialog",function(){this.on("ok",y);this.on("cancel",y)})}else{a.focus();g.hide();a.fire("saveSnapshot");(new CKEDITOR.style(h["colorButton_"+q+
"Style"],{color:"inherit"})).remove(a.document);if(s){var H=h["colorButton_"+q+"Style"];H.childRule=q=="back"?function(D){return e(D)}:function(D){return D.getName()!="a"||e(D)};(new CKEDITOR.style(H,{color:s})).apply(a.document)}a.fire("saveSnapshot")}});k.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',j.auto,'" onclick="CKEDITOR.tools.callFunction(',p,",null,'",f,"');return false;\" href=\"javascript:void('",j.auto,'\')" role="option" aria-posinset="1" aria-setsize="',m,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',
d,'"></span></td><td colspan=7 align=center>',j.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(d=0;d<l.length;d++){d%8===0&&k.push("</tr><tr>");var r=l[d].split("/"),u=r[0],n=r[1]||u;r[1]||(u="#"+u.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));r=a.lang.colors[n]||n;k.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',r,'" onclick="CKEDITOR.tools.callFunction(',p,",'",u,"','",f,"'); return false;\" href=\"javascript:void('",r,'\')" role="option" aria-posinset="',
d+2,'" aria-setsize="',m,'"><span class="cke_colorbox" style="background-color:#',n,'"></span></a></td>')}if(h.colorButton_enableMore===undefined||h.colorButton_enableMore)k.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',j.more,'" onclick="CKEDITOR.tools.callFunction(',p,",'?','",f,"');return false;\" href=\"javascript:void('",j.more,"')\"",' role="option" aria-posinset="',m,'" aria-setsize="',m,'">',j.more,"</a></td>");k.push("</tr></table>");
return k.join("")}function e(g){return g.getAttribute("contentEditable")=="false"||g.getAttribute("data-nostyle")}var h=a.config,j=a.lang.colorButton;if(!CKEDITOR.env.hc){b("TextColor","fore",j.textColorTitle);b("BGColor","back",j.bgColorTitle)}}});CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";
CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};(function(){CKEDITOR.plugins.colordialog={init:function(a){a.addCommand("colordialog",new CKEDITOR.dialogCommand("colordialog"));CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js")}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog)})();
CKEDITOR.plugins.add("contextmenu",{requires:["menu"],onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:a.skinClass+" cke_contextmenu",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,b){if(CKEDITOR.env.opera&&!("oncontextmenu"in document.body)){var c;a.on("mousedown",function(j){j=j.data;if(j.$.button!=2)j.getKeystroke()==CKEDITOR.CTRL+1&&a.fire("contextmenu",j);else if(!(b&&
(CKEDITOR.env.mac?j.$.metaKey:j.$.ctrlKey))){var g=j.getTarget();if(!c){g=g.getDocument();c=g.createElement("input");c.$.type="button";g.getBody().append(c)}c.setAttribute("style","position:absolute;top:"+(j.$.clientY-2)+"px;left:"+(j.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}});a.on("mouseup",function(j){if(c){c.remove();c=undefined;a.fire("contextmenu",j.data)}})}a.on("contextmenu",function(j){j=j.data;if(!(b&&(CKEDITOR.env.webkit?e:CKEDITOR.env.mac?j.$.metaKey:j.$.ctrlKey))){this.originalEvent=
new CKEDITOR.dom.event(j.$);j.preventDefault();var g=j.getTarget().getDocument().getDocumentElement(),f=j.$.clientX,d=j.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(g,null,f,d)},0,this)}},this);if(CKEDITOR.env.opera)a.on("keypress",function(j){j=j.data;j.$.keyCode===0&&j.preventDefault()});if(CKEDITOR.env.webkit){var e,h=function(){e=0};a.on("keydown",function(j){e=CKEDITOR.env.mac?j.data.$.metaKey:j.data.$.ctrlKey});a.on("keyup",h);a.on("contextmenu",h)}},open:function(a,b,c,e){this.editor.fire("contextMenuOnOpen",
{menu:this});this.editor.focus();a=a||CKEDITOR.document.getDocumentElement();this.show(a,b,c,e)}}})},beforeInit:function(a){a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}});var b=a.contextMenu._;b.onClickOriginal=b.onClick;b.onClick=function(c){a.fire("contextMenuOnClick",{menu:a.contextMenu,item:c});b.onClickOriginal(c)}}});
(function(){function a(c){var e=this.att;c=c&&c.hasAttribute(e)&&c.getAttribute(e)||"";c!==undefined&&this.setValue(c)}function b(){for(var c,e=0;e<arguments.length;e++)if(arguments[e]instanceof CKEDITOR.dom.element){c=arguments[e];break}if(c){e=this.att;var h=this.getValue();if(e=="dir")if(c.getAttribute(e)!=h&&c.getParent())this._.dialog._.editor.fire("dirChanged",{node:c,dir:h||c.getDirection(1)});h?c.setAttribute(e,h):c.removeAttribute(e,h)}}CKEDITOR.plugins.add("dialogadvtab",{createAdvancedTab:function(c,
e){e||(e={id:1,dir:1,classes:1,styles:1});var h=c.lang.common,j={id:"advanced",label:h.advancedTab,title:h.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},g=[];if(e.id||e.dir){e.id&&g.push({id:"advId",att:"id",type:"text",label:h.id,setup:a,commit:b});e.dir&&g.push({id:"advLangDir",att:"dir",type:"select",label:h.langDir,"default":"",style:"width:100%",items:[[h.notSet,""],[h.langDirLTR,"ltr"],[h.langDirRTL,"rtl"]],setup:a,commit:b});j.elements[0].children.push({type:"hbox",widths:["50%",
"50%"],children:[].concat(g)})}if(e.styles||e.classes){g=[];e.styles&&g.push({id:"advStyles",att:"style",type:"text",label:h.styles,"default":"",getStyle:function(f,d){var k=this.getValue().match(RegExp(f+"\\s*:s*([^;]*)","i"));return k?k[1]:d},updateStyle:function(f,d){var k=this.getValue();if(k)k=k.replace(RegExp("\\s*"+f+"s*:[^;]*(?:$|;s*)","i"),"").replace(/^[;\s]+/,"").replace(/\s+$/,"");if(d){k&&!/;\s*$/.test(k)&&(k+="; ");k+=f+": "+d}this.setValue(k,1)},setup:a,commit:b});e.classes&&g.push({type:"hbox",
widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",label:h.cssClasses,"default":"",setup:a,commit:b}]});j.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(g)})}return j}})})();
(function(){CKEDITOR.plugins.add("div",{requires:["editingblock","domiterator","styles"],init:function(a){var b=a.lang.div;a.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv"));a.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv"));a.addCommand("removediv",{exec:function(c){function e(k){k=(new CKEDITOR.dom.elementPath(k)).blockLimit;if((k=k.is("div")&&k)&&!k.data("cke-div-added")){f.push(k);k.data("cke-div-added")}}for(var h=(c=c.getSelection())&&c.getRanges(),j,g=c.createBookmarks(),
f=[],d=0;d<h.length;d++){j=h[d];if(j.collapsed)e(c.getStartElement());else{j=new CKEDITOR.dom.walker(j);j.evaluator=e;j.lastForward()}}for(d=0;d<f.length;d++)f[d].remove(true);c.selectBookmarks(g)}});a.ui.addButton("CreateDiv",{label:b.toolbar,command:"creatediv"});if(a.addMenuItems){a.addMenuItems({editdiv:{label:b.edit,command:"editdiv",group:"div",order:1},removediv:{label:b.remove,command:"removediv",group:"div",order:5}});a.contextMenu&&a.contextMenu.addListener(function(c){if(!c||c.isReadOnly())return null;
if((c=(new CKEDITOR.dom.elementPath(c)).blockLimit)&&c.getAscendant("div",true))return{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF};return null})}CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}})})();
(function(){function a(g,f,d){d=g.config.forceEnterMode||d;if(g.mode!="wysiwyg")return false;if(!f)f=g.config.enterMode;setTimeout(function(){g.fire("saveSnapshot");f==CKEDITOR.ENTER_BR||g.getSelection().getStartElement().hasAscendant("pre",1)?e(g,f,null,d):h(g,f,null,d)},0);return true}function b(g){var f=g.getSelection().getRanges(true);if(f.length==0){f=g.getSelection().getRanges(false);f=f[0];var d=new CKEDITOR.dom.elementPath(f.startContainer),k=new CKEDITOR.dom.elementPath(f.endContainer);if(!k.isContentEditable()){d=
f.endContainer.isReadOnly();d.is("p","div")?f.setEndAt(d,CKEDITOR.POSITION_BEFORE_END):f.setEndAfter(d)}f.collapse(false);f=new CKEDITOR.dom.rangeList([f]);g.getSelection().selectRanges(f);g.getSelection().reset();CKEDITOR.env.ie||(f=g.getSelection().getRanges(false))}if(f.length==0){f=g.getSelection().getRanges(false);f=f[0];d=new CKEDITOR.dom.elementPath(f.startContainer);k=new CKEDITOR.dom.elementPath(f.endContainer);if(!d.isContentEditable()||!k.isContentEditable()){d=f.endContainer.isReadOnly();
d.is("p","div")?f.setEndAt(d,CKEDITOR.POSITION_BEFORE_END):f.setEndAfter(d);f.collapse(false)}g.getSelection().selectRanges(new CKEDITOR.dom.rangeList([f]));f=g.getSelection().getRanges(false)}for(g=f.length-1;g>0;g--)f[g].deleteContents();return f[0]}CKEDITOR.plugins.add("enterkey",{requires:["keystrokes","indent"],init:function(g){g=g.specialKeys;g[13]=a;g[CKEDITOR.SHIFT+13]=a}});CKEDITOR.plugins.enterkey={enterBlock:function(g,f,d,k){d=d||b(g);var l=d.document;if(d.checkStartOfBlock()&&d.checkEndOfBlock()){var m=
(new CKEDITOR.dom.elementPath(d.startContainer)).block;if(m&&(m.is("li")||m.getParent().is("li"))){g.execCommand("outdent");return}}var p=f==CKEDITOR.ENTER_DIV?"div":"p",r=d.splitBlock(p);if(r){g=r.previousBlock;f=r.nextBlock;m=r.wasStartOfBlock;var u=r.wasEndOfBlock,n;if(f){n=f.getParent();if(n.is("li")){f.breakParent(n);f.move(f.getNext(),1)}}else if(g&&(n=g.getParent())&&n.is("li")){g.breakParent(n);d.moveToElementEditStart(g.getNext());g.move(g.getPrevious())}if(!m&&!u){if(f.is("li")&&(n=f.getFirst(CKEDITOR.dom.walker.invisible(true)))&&
n.is&&n.is("ul","ol"))(CKEDITOR.env.ie?l.createText(""):l.createElement("br")).insertBefore(n);if(f){if(f.is("p")){f.getFirst().$.nodeType!=CKEDITOR.NODE_COMMENT&&f.setAttribute("data-rte-empty-lines-before",1);f.setAttribute("data-rte-fromparser",1)}d.moveToElementEditStart(f)}}else{var s,q;if(g){if(g.is("li")||!j.test(g.getName()))s=g.clone();if(g.isReadOnly())s=null}else if(f){s=f.clone();if(f.isReadOnly())s=null}if(s)k&&!s.is("li")&&s.renameNode(p);else{s=l.createElement(p);if(g&&(q=g.getDirection()))s.setAttribute("dir",
q)}if(s.is("dl"))s=new CKEDITOR.dom.element("p");if(k=r.elementPath){n=-1;for(q=k.elements.length-1;q>=0;q--)if(k.elements[q].$.contentEditable=="false"){n=q;break}$().log({elementPath:k,elementPathBlock:k.block,elementPathBlockLimit:k.blockLimit,notEditableIndex:n},"RTE-enterkey");q=0;for(p=k.elements.length;q<p;q++){r=k.elements[q];if(r.equals(k.block)||r.equals(k.blockLimit))break;if(!(q<=n))if(CKEDITOR.dtd.$removeEmpty[r.getName()]){r=r.clone();s.moveChildren(r);s.append(r)}}}CKEDITOR.env.ie||
s.appendBogus();s.setAttribute("data-rte-new-node",true);d.insertNode(s);if(CKEDITOR.env.ie&&m&&(!u||!g.getChildCount())){d.moveToElementEditStart(u?g:s);d.select()}d.moveToElementEditStart(m&&!u?f:s)}if(!CKEDITOR.env.ie)if(f){l=l.createElement("span");l.setHtml("&nbsp;");d.insertNode(l);l.scrollIntoView();d.deleteContents()}else s.scrollIntoView();d.select()}},enterBr:function(g,f,d,k){if(d=d||b(g))if(d){var l=d.document,m=d.checkEndOfBlock(),p=new CKEDITOR.dom.elementPath(g.getSelection().getStartElement()),
r=p.block,u=r&&p.block.getName();p=false;if(!k&&u=="li")h(g,f,d,k);else{if(!k&&m&&j.test(u))if(m=r.getDirection()){l=l.createElement("div");l.setAttribute("dir",m);l.insertAfter(r);d.setStart(l,0)}else{l.createElement("br").insertAfter(r);CKEDITOR.env.gecko&&l.createText("").insertAfter(r);d.setStartAt(r.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)}else{if((p=u=="pre")&&!CKEDITOR.env.gecko)r=l.createText(CKEDITOR.env.ie?"\r":"\n");else{r=l.createElement("br");
r.setAttribute("data-rte-shift-enter",true);if(j.test(u))return}d.deleteContents();d.insertNode(r);CKEDITOR.env.ie||l.createText("").insertAfter(r);m&&!CKEDITOR.env.ie&&r.getParent().appendBogus();if(!CKEDITOR.env.ie)r.getNext().$.nodeValue="";CKEDITOR.env.ie?d.setStartAt(r,CKEDITOR.POSITION_AFTER_END):d.setStartAt(r.getNext(),CKEDITOR.POSITION_AFTER_START);if(!CKEDITOR.env.ie){m=null;if(CKEDITOR.env.gecko)m=l.createElement("br");else{m=l.createElement("span");m.setHtml("&nbsp;")}m.insertBefore(r.getNext());
m.scrollIntoView();m.remove()}}d.collapse(true);d.select(p)}}}};var c=CKEDITOR.plugins.enterkey,e=c.enterBr,h=c.enterBlock,j=/^h[1-6]$/})();
(function(){function a(b,c){var e={},h=[],j={nbsp:"",shy:"",gt:">",lt:"<"};b=b.replace(/\b(nbsp|shy|gt|lt|amp)(?:,|$)/g,function(k,l){var m=c?"&"+l+";":j[l];e[m]=c?j[l]:"&"+l+";";h.push(m);return""});if(!c&&b){b=b.split(",");var g=document.createElement("div"),f;g.innerHTML="&"+b.join(";&")+";";f=g.innerHTML;g=null;for(g=0;g<f.length;g++){var d=f.charAt(g);e[d]="&"+b[g]+";";h.push(d)}}e.regex=h.join(c?"|":"");return e}CKEDITOR.plugins.add("entities",{afterInit:function(b){var c=b.config;if(b=(b=
b.dataProcessor)&&b.htmlFilter){var e="nbsp,gt,lt";if(c.entities){e+=",quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro";
if(c.entities_latin)e+=",Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml";if(c.entities_greek)e+=",Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv";
if(c.entities_additional)e+=","+c.entities_additional}var h=a(e),j="["+h.regex+"]";delete h.regex;if(c.entities&&c.entities_processNumerical)j="[^ -~]|"+j;j=RegExp(j,"g");var g=function(l){return c.entities_processNumerical=="force"||!h[l]?"&#"+l.charCodeAt(0)+";":h[l]},f=a("nbsp,gt,lt,shy",true),d=RegExp(f.regex,"g"),k=function(l){return f[l]};b.addRules({text:function(l){return l.replace(d,k).replace(j,g)}})}}})})();CKEDITOR.config.entities=true;CKEDITOR.config.entities_latin=true;
CKEDITOR.config.entities_greek=true;CKEDITOR.config.entities_additional="#39";
CKEDITOR.plugins.add("find",{init:function(a){a.ui.addButton("Find",{label:a.lang.findAndReplace.find,command:"find"});a.addCommand("find",new CKEDITOR.dialogCommand("find")).canUndo=false;a.ui.addButton("Replace",{label:a.lang.findAndReplace.replace,command:"replace"});a.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=false;CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+"dialogs/find.js")},requires:["styles"]});
CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};
(function(){function a(b,c,e,h,j,g,f){var d=b.config,k=j.split(";"),l={};for(j=0;j<k.length;j++){var m=k[j];if(m){m=m.split("/");var p={},r=k[j]=m[0];p[e]=m[1]||r;l[r]=new CKEDITOR.style(f,p);l[r]._.definition.name=r}else k.splice(j--,1)}b.ui.addRichCombo(c,{label:h.label,title:h.panelTitle,className:"cke_"+(e=="size"?"fontSize":"font"),panel:{css:b.skin.editor.css.concat(d.contentsCss),multiSelect:false,attributes:{"aria-label":h.panelTitle}},init:function(){this.startGroup(h.panelTitle);for(var u=
0;u<k.length;u++){var n=k[u];this.add(n,l[n].buildPreview(),n)}},onClick:function(u){b.focus();b.fire("saveSnapshot");var n=l[u];this.getValue()==u?n.remove(b.document):n.apply(b.document);b.fire("saveSnapshot")},onRender:function(){b.on("selectionChange",function(u){var n=this.getValue();u=u.data.path.elements;for(var s=0,q;s<u.length;s++){q=u[s];for(var w in l)if(l[w].checkElementRemovable(q,true)){w!=n&&this.setValue(w);return}}this.setValue("",g)},this)}})}CKEDITOR.plugins.add("font",{requires:["richcombo",
"styles"],init:function(b){var c=b.config;a(b,"Font","family",b.lang.font,c.font_names,c.font_defaultLabel,c.font_style);a(b,"FontSize","size",b.lang.fontSize,c.fontSize_sizes,c.fontSize_defaultLabel,c.fontSize_style)}})})();CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";
CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};
CKEDITOR.plugins.add("format",{requires:["richcombo","styles"],init:function(a){for(var b=a.config,c=a.lang.format,e=b.format_tags.split(";"),h={},j=0;j<e.length;j++){var g=e[j];h[g]=new CKEDITOR.style(b["format_"+g]);h[g]._.enterMode=a.config.enterMode}var f=b.format_disabled.split(";");a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,className:"cke_format",panel:{css:a.skin.editor.css.concat(b.contentsCss),multiSelect:false,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);
for(var d in h){var k=c["tag_"+d];this.add(d,"<"+d+">"+k+"</"+d+">",k)}},onClick:function(d){a.focus();a.fire("saveSnapshot");d=h[d];var k=new CKEDITOR.dom.elementPath(a.getSelection().getStartElement());d[d.checkActive(k)?"remove":"apply"](a.document);setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(d){var k=this.getValue();d=d.data.path;if(jQuery.inArray(k,f)>-1)this.setState(CKEDITOR.TRISTATE_DISABLED);else{this.setState(CKEDITOR.TRISTATE_OFF);
for(var l in h)if(h[l].checkActive(d)){l!=k&&this.setValue(l,a.lang.format["tag_"+l]);return}this.setValue("")}},this)}})}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};
CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};CKEDITOR.config.format_disabled="li;dt;dd";
(function(){function a(o){for(var z=o.children.length,v=o.children[z-1];v&&v.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(v.value);)v=o.children[--z];return v}function b(o,z){var v=o.children,x=a(o);if(x){if((z||!CKEDITOR.env.ie)&&x.type==CKEDITOR.NODE_ELEMENT&&x.name=="br"&&typeof x.attributes["data-rte-washtml"]=="undefined")v.pop();x.type==CKEDITOR.NODE_TEXT&&m.test(x.value)&&v.pop()}}function c(o,z){return function(v){b(v,!o);var x;x=!o;if(!x&&(!z||typeof z=="function"&&z(v)===false))x=false;
else if(x&&CKEDITOR.env.ie&&(document.documentMode>7||v.name in CKEDITOR.dtd.tr||v.name in CKEDITOR.dtd.$listItem))x=false;else{x=a(v);x=!x||x&&v.name=="form"&&x.name=="input"}if(x)o||CKEDITOR.env.ie?v.add(new CKEDITOR.htmlParser.text("")):v.add(new CKEDITOR.htmlParser.element("br",{}))}}function e(o){o=o.attributes;if(o.contenteditable!="false")o["data-cke-editable"]=o.contenteditable?"true":1;o.contenteditable="false"}function h(o){o=o.attributes;switch(o["data-cke-editable"]){case "true":o.contenteditable=
"true";break;case "1":delete o.contenteditable}}function j(o){return o.replace(H,function(z,v,x){return"<"+v+x.replace(D,function(A,E){if(x.indexOf("data-cke-saved-"+E)==-1)return" data-cke-saved-"+A+" "+A;return A})+">"})}function g(o){return o.replace(B,function(z){return"<cke:encoded>"+encodeURIComponent(z)+"</cke:encoded>"})}function f(o){return o.replace(G,function(z,v){return decodeURIComponent(v)})}function d(o){return o.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(z){return"<\!--"+
p+"{C}"+encodeURIComponent(z).replace(/--/g,"%2D%2D")+"--\>"})}function k(o){return o.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(z,v){return decodeURIComponent(v)})}function l(o,z){var v=[],x=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,A=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(z);o=o.replace(/<\!--[\s\S]*?--\>/g,function(C){return"<\!--{cke_tempcomment}"+(v.push(C)-1)+"--\>"});for(var E=0;E<A.length;E++)o=o.replace(A[E],function(C){C=C.replace(x,function(F,
J,M){return v[M]});return"<\!--{cke_temp}"+(v.push(C)-1)+"--\>"});return o=o.replace(x,function(C,F,J){return"<\!--"+p+(F?"{C}":"")+encodeURIComponent(v[J]).replace(/--/g,"%2D%2D")+"--\>"})}var m=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,p="{cke_protected}",r=CKEDITOR.dtd,u=["caption","colgroup","col","thead","tfoot","tbody"],n=CKEDITOR.tools.extend({},r.$block,r.$listItem,r.$tableContent),s;for(s in n)"br"in r[s]||delete n[s];delete n.pre;var q={elements:{a:function(o){if((o=o.attributes)&&o["data-cke-saved-name"])o["class"]=
(o["class"]?o["class"]+" ":"")+"cke_anchor"}},attributeNames:[[/^on/,"data-cke-pa-on"]]},w={elements:{}};for(s in n)w.elements[s]=c();var y={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(o){var z=o.attributes;if(z){if(z["data-cke-temp"])return false;for(var v=["name","href","src"],x,A=0;A<v.length;A++){x="data-cke-saved-"+v[A];x in z&&delete z[v[A]]}}return o},table:function(o){o.children.sort(function(z,
v){return z.type==CKEDITOR.NODE_ELEMENT&&v.type==z.type?u.indexOf(z.name)>u.indexOf(v.name)?1:-1:0})},embed:function(o){var z=o.parent;if(z&&z.name=="object"){var v=z.attributes.width;z=z.attributes.height;v&&(o.attributes.width=v);z&&(o.attributes.height=z)}},param:function(o){o.children=[];o.isEmpty=true;return o},a:function(o){if(!(o.children.length||o.attributes.name||o.attributes["data-cke-saved-name"]))return false},span:function(o){o.attributes["class"]=="Apple-style-span"&&delete o.name},
pre:function(o){CKEDITOR.env.ie&&b(o)},html:function(o){delete o.attributes.contenteditable;delete o.attributes["class"]},body:function(o){delete o.attributes.spellcheck;delete o.attributes.contenteditable},style:function(o){var z=o.children[0];z&&z.value&&(z.value=CKEDITOR.tools.trim(z.value));if(!o.attributes.type)o.attributes.type="text/css"},title:function(o){var z=o.children[0];z&&(z.value=o.attributes["data-cke-title"]||"")}},attributes:{"class":function(o){return CKEDITOR.tools.ltrim(o.replace(/(?:^|\s+)cke_[^\s]*/g,
""))||false}},comment:function(o){if(o.substr(0,p.length)==p){o=o.substr(p.length,3)=="{C}"?o.substr(p.length+3):o.substr(p.length);return new CKEDITOR.htmlParser.cdata(decodeURIComponent(o))}return o}};if(CKEDITOR.env.ie)y.attributes.style=function(o){return o.replace(/(^|;)([^\:]+)/g,function(z){return z.toLowerCase()})};for(s in{input:1,textarea:1}){q.elements[s]=e;y.elements[s]=h}var H=/<(a|area|img|input)\b([^>]*)>/gi,D=/\b(href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,B=/(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,
G=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,I=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,K=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,L=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;CKEDITOR.plugins.add("htmldataprocessor",{requires:["htmlwriter"],init:function(o){var z=o.dataProcessor=new CKEDITOR.htmlDataProcessor(o);z.writer.forceSimpleAmpersand=o.config.forceSimpleAmpersand;z.dataFilter.addRules(q);z.dataFilter.addRules(w);z.htmlFilter.addRules(y);var v={elements:{}};
for(s in n)v.elements[s]=c(true,o.config.fillEmptyBlocks);z.htmlFilter.addRules(v)},onLoad:function(){!("fillEmptyBlocks"in CKEDITOR.config)&&(CKEDITOR.config.fillEmptyBlocks=1)}});CKEDITOR.htmlDataProcessor=function(o){this.editor=o;this.writer=new CKEDITOR.htmlWriter;this.dataFilter=new CKEDITOR.htmlParser.filter;this.htmlFilter=new CKEDITOR.htmlParser.filter};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(o,z){o=l(o,this.editor.config.protectedSource);o=j(o);o=g(o);o=o.replace(I,"$1cke:$2");
o=o.replace(L,"<cke:$1$2></cke:$1>");o=o.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2");var v=new CKEDITOR.dom.element("div");v.setHtml("a"+o);o=v.getHtml().substr(1);o=o.replace(K,"$1$2");o=f(o);o=k(o);v=CKEDITOR.htmlParser.fragment.fromHtml(o,z);var x=new CKEDITOR.htmlParser.basicWriter;v.writeHtml(x,this.dataFilter);o=x.getHtml(true);return o=d(o)},toDataFormat:function(o,z){var v=this.writer,x=CKEDITOR.htmlParser.fragment.fromHtml(o,z);v.reset();x.writeHtml(v,this.htmlFilter);return v.getHtml(true)}}})();
(function(){CKEDITOR.plugins.add("iframe",{requires:["dialog","fakeobjects"],init:function(a){var b=a.lang.iframe;CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");a.addCommand("iframe",new CKEDITOR.dialogCommand("iframe"));a.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}");a.ui.addButton("Iframe",{label:b.toolbar,command:"iframe"});
a.on("doubleclick",function(c){var e=c.data.element;if(e.is("img")&&e.data("cke-real-element-type")=="iframe")c.data.dialog="iframe"});a.addMenuItems&&a.addMenuItems({iframe:{label:b.title,command:"iframe",group:"image"}});a.contextMenu&&a.contextMenu.addListener(function(c){if(c&&c.is("img")&&c.data("cke-real-element-type")=="iframe")return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{iframe:function(c){var e=a.createFakeParserElement(c,
"cke_iframe","iframe",true),h=e.attributes.style||"",j=c.attributes.width;c=c.attributes.height;if(typeof j!="undefined")h+="width:"+CKEDITOR.tools.cssLength(j)+";";if(typeof c!="undefined")h+="height:"+CKEDITOR.tools.cssLength(c)+";";e.attributes.style=h;return e}}})}})})();
(function(){function a(f){var d=f.editor,k=f.data.path,l=k.block?k.block.getName():"";if(/h\d/.test(l))return this.setState(CKEDITOR.TRISTATE_DISABLED);if(l=="p"){k=k.block.getStyle("text-align");if(k=="center"||k=="right")return this.setState(CKEDITOR.TRISTATE_DISABLED)}if((k=f.data.path)&&k.contains(h))return this.setState(CKEDITOR.TRISTATE_OFF);if(!this.useIndentClasses&&this.name=="indent")return this.setState(CKEDITOR.TRISTATE_OFF);k=f.data.path;f=k.block||k.blockLimit;if(!f)return this.setState(CKEDITOR.TRISTATE_DISABLED);
if(this.useIndentClasses){f=f.$.className.match(this.classNameRegex);k=0;if(f){f=f[1];k=this.indentClassMap[f]}if(this.name=="outdent"&&!k||this.name=="indent"&&k==d.config.indentClasses.length)return this.setState(CKEDITOR.TRISTATE_DISABLED)}else{d=parseInt(f.getStyle(c(f)),10);if(isNaN(d))d=0;if(d<=0)return this.setState(CKEDITOR.TRISTATE_DISABLED)}return this.setState(CKEDITOR.TRISTATE_OFF)}function b(f,d){this.name=d;if(this.useIndentClasses=f.config.indentClasses&&f.config.indentClasses.length>
0){this.classNameRegex=RegExp("(?:^|\\s+)("+f.config.indentClasses.join("|")+")(?=$|\\s)");this.indentClassMap={};for(var k=0;k<f.config.indentClasses.length;k++)this.indentClassMap[f.config.indentClasses[k]]=k+1}this.startDisabled=d=="outdent"}function c(f,d){return(d||f.getComputedStyle("direction"))=="ltr"?"margin-left":"margin-right"}function e(f){return f.type=CKEDITOR.NODE_ELEMENT&&f.is("li")}var h={ol:1,ul:1},j=CKEDITOR.dom.walker.whitespaces(true),g=CKEDITOR.dom.walker.bookmark(false,true);
b.prototype={exec:function(f){function d(D){for(var B=n.startContainer,G=n.endContainer;B&&!B.getParent().equals(D);)B=B.getParent();for(;G&&!G.getParent().equals(D);)G=G.getParent();if(B&&G){var I=B;B=[];for(var K=false;!K;){if(I.equals(G))K=true;B.push(I);I=I.getNext()}if(!(B.length<1)){I=D.getParents(true);for(G=0;G<I.length;G++)if(I[G].getName&&h[I[G].getName()]){D=I[G];break}I=m.name=="indent"?1:-1;G=B[0];B=B[B.length-1];K=CKEDITOR.plugins.list.listToArray(D,p);K[B.getCustomData("listarray_index")].toIndent=
true;var L=K[B.getCustomData("listarray_index")].indent;for(G=G.getCustomData("listarray_index");G<=B.getCustomData("listarray_index");G++){K[G].indent+=I;var o=K[G].parent;K[G].parent=new CKEDITOR.dom.element(o.getName(),o.getDocument())}for(G=B.getCustomData("listarray_index")+1;G<K.length&&K[G].indent>L;G++)K[G].indent+=I;B=CKEDITOR.plugins.list.arrayToList(K,p,null,f.config.enterMode,D.getDirection());if(m.name=="outdent"){var z;if((z=D.getParent())&&z.is("li")){I=B.listNode.getChildren();var v=
[],x;for(G=I.count()-1;G>=0;G--)if((x=I.getItem(G))&&x.is&&x.is("li"))v.push(x)}}B&&B.listNode.replace(D);if(v&&v.length)for(G=0;G<v.length;G++){for(x=D=v[G];(x=x.getNext())&&x.is&&x.getName()in h;){CKEDITOR.env.ie&&!D.getFirst(function(A){return j(A)&&g(A)})&&D.append(n.document.createText(""));D.append(x)}D.insertAfter(z)}}}}function k(){var D=n.createIterator(),B=f.config.enterMode;D.enforceRealBlocks=true;D.enlargeBr=B!=CKEDITOR.ENTER_BR;for(var G;G=D.getNextParagraph(B==CKEDITOR.ENTER_P?"p":
"div");)l(G)}function l(D,B){if(D.getCustomData("indent_processed"))return false;if(m.useIndentClasses){var G=D.$.className.match(m.classNameRegex),I=0;if(G){G=G[1];I=m.indentClassMap[G]}if(m.name=="outdent")I--;else I++;if(I<0)return false;I=Math.min(I,f.config.indentClasses.length);I=Math.max(I,0);D.$.className=CKEDITOR.tools.ltrim(D.$.className.replace(m.classNameRegex,""));I>0&&D.addClass(f.config.indentClasses[I-1])}else{G=c(D,B);I=parseInt(D.getStyle(G),10);if(isNaN(I))I=0;var K=f.config.indentOffset||
40;I+=(m.name=="indent"?1:-1)*K;if(I<0)return false;I=Math.max(I,0);I=Math.ceil(I/K)*K;D.setStyle(G,I?I+(f.config.indentUnit||"px"):"");D.getAttribute("style")===""&&D.removeAttribute("style")}CKEDITOR.dom.element.setMarker(p,D,"indent_processed",1);return true}for(var m=this,p={},r=f.getSelection(),u=r.createBookmarks(1),n,s=(r&&r.getRanges(1)).createIterator();n=s.getNextRange();){for(var q=n.getCommonAncestor();q&&!(q.type==CKEDITOR.NODE_ELEMENT&&h[q.getName()]);)q=q.getParent();if(!q){var w=n.getEnclosedNode();
if(w&&w.type==CKEDITOR.NODE_ELEMENT&&w.getName()in h){n.setStartAt(w,CKEDITOR.POSITION_AFTER_START);n.setEndAt(w,CKEDITOR.POSITION_BEFORE_END);q=w}}if(q&&n.startContainer.type==CKEDITOR.NODE_ELEMENT&&n.startContainer.getName()in h){w=new CKEDITOR.dom.walker(n);w.evaluator=e;n.startContainer=w.next()}if(q&&n.endContainer.type==CKEDITOR.NODE_ELEMENT&&n.endContainer.getName()in h){w=new CKEDITOR.dom.walker(n);w.evaluator=e;n.endContainer=w.previous()}if(q){w=q.getFirst(e);var y=!!w.getNext(e),H=n.startContainer;
(w.equals(H)||w.contains(H))&&(m.name=="indent"||m.useIndentClasses||parseInt(q.getStyle(c(q)),10))&&l(q,!y&&w.getDirection())||d(q)}else k()}CKEDITOR.dom.element.clearAllMarkers(p);f.forceNextSelectionCheck();r.selectBookmarks(u)}};CKEDITOR.plugins.add("indent",{init:function(f){var d=f.addCommand("indent",new b(f,"indent")),k=f.addCommand("outdent",new b(f,"outdent"));f.ui.addButton("Indent",{label:f.lang.indent,command:"indent"});f.ui.addButton("Outdent",{label:f.lang.outdent,command:"outdent"});
f.on("selectionChange",CKEDITOR.tools.bind(a,d));f.on("selectionChange",CKEDITOR.tools.bind(a,k));if(CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat)f.addCss("ul,ol{\tmargin-left: 0px;\tpadding-left: 40px;}");f.on("dirChanged",function(l){var m=new CKEDITOR.dom.range(f.document);m.setStartBefore(l.data.node);m.setEndAfter(l.data.node);for(var p=new CKEDITOR.dom.walker(m),r;r=p.next();)if(r.type==CKEDITOR.NODE_ELEMENT)if(!r.equals(l.data.node)&&r.getDirection()){m.setStartAfter(r);p=new CKEDITOR.dom.walker(m)}else{var u=
f.config.indentClasses;if(u)for(var n=l.data.dir=="ltr"?["_rtl",""]:["","_rtl"],s=0;s<u.length;s++)if(r.hasClass(u[s]+n[0])){r.removeClass(u[s]+n[0]);r.addClass(u[s]+n[1])}u=r.getStyle("margin-right");n=r.getStyle("margin-left");u?r.setStyle("margin-left",u):r.removeStyle("margin-left");n?r.setStyle("margin-right",n):r.removeStyle("margin-right")}})},requires:["domiterator","list"]})})();
CKEDITOR.plugins.add("keystrokes",{beforeInit:function(a){a.keystrokeHandler=new CKEDITOR.keystrokeHandler(a);a.specialKeys={}},init:function(a){var b=a.config.keystrokes,c=a.config.blockedKeystrokes,e=a.keystrokeHandler.keystrokes;a=a.keystrokeHandler.blockedKeystrokes;for(var h=0;h<b.length;h++)e[b[h][0]]=b[h][1];for(h=0;h<c.length;h++)a[c[h]]=1}});
CKEDITOR.keystrokeHandler=function(a){if(a.keystrokeHandler)return a.keystrokeHandler;this.keystrokes={};this.blockedKeystrokes={};this._={editor:a};return this};
(function(){var a,b=function(e){e=e.data;var h=e.getKeystroke(),j=this.keystrokes[h],g=this._.editor;a=g.fire("key",{keyCode:h})===true;if(!a){if(j)a=g.execCommand(j,{from:"keystrokeHandler"})!==false;if(!a)(a=(j=g.specialKeys[h])&&j(g)===true)||(a=!!this.blockedKeystrokes[h])}a&&e.preventDefault(true);return!a},c=function(e){if(a){a=false;e.data.preventDefault(true)}};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",b,this);if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)e.on("keypress",
c,this)}}})();CKEDITOR.config.blockedKeystrokes=[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85];
CKEDITOR.config.keystrokes=[[CKEDITOR.ALT+121,"toolbarFocus"],[CKEDITOR.ALT+122,"elementsPathFocus"],[CKEDITOR.SHIFT+121,"contextMenu"],[CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu"],[CKEDITOR.CTRL+90,"undo"],[CKEDITOR.CTRL+89,"redo"],[CKEDITOR.CTRL+CKEDITOR.SHIFT+90,"redo"],[CKEDITOR.CTRL+76,"link"],[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"],[CKEDITOR.ALT+109,"toolbarCollapse"],[CKEDITOR.ALT+48,"a11yHelp"]];
(function(){function a(s){var q=s.data.path;s=q.blockLimit;var w=q.elements,y;if(/h\d/.test(q.block?q.block.getName():""))return this.setState(CKEDITOR.TRISTATE_DISABLED);for(q=0;q<w.length&&(y=w[q])&&!y.equals(s);q++)if(g[w[q].getName()])return this.setState(this.type==w[q].getName()?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);return this.setState(CKEDITOR.TRISTATE_OFF)}function b(s,q,w,y){for(var H=CKEDITOR.plugins.list.listToArray(q.root,w),D=[],B=0;B<q.contents.length;B++){var G=q.contents[B];
G=G.getAscendant("li",true);if(!(!G||G.getCustomData("list_item_processed"))){D.push(G);CKEDITOR.dom.element.setMarker(w,G,"list_item_processed",true)}}B=q.root;G=B.getDocument().createElement(this.type);B.copyAttributes(G,{start:1,type:1});G.removeStyle("list-style-type");for(B=0;B<D.length;B++){var I=D[B].getCustomData("listarray_index");H[I].parent=G}s=CKEDITOR.plugins.list.arrayToList(H,w,null,s.config.enterMode);var K;w=s.listNode.getChildCount();for(B=0;B<w&&(K=s.listNode.getChild(B));B++)K.getName()==
this.type&&y.push(K);s.listNode.replace(q.root)}function c(s,q,w){var y=q.contents,H=q.root.getDocument(),D=[];if(y.length==1&&y[0].equals(q.root)){var B=H.createElement("div");y[0].moveChildren&&y[0].moveChildren(B);y[0].append(B);y[0]=B}q=q.contents[0].getParent();for(B=0;B<y.length;B++)q=q.getCommonAncestor(y[B].getParent());var G=s.config.useComputedState,I,K;G=G===undefined||G;for(B=0;B<y.length;B++)for(var L=y[B],o;o=L.getParent();){if(o.equals(q)){D.push(L);if(!K&&L.getDirection())K=1;L=L.getDirection(G);
if(I!==null)I=I&&I!=L?null:L;break}L=o}if(!(D.length<1)){y=D[D.length-1].getNext();B=H.createElement(this.type);s.fire("listCreated",{listNode:B});for(w.push(B);D.length;){s=D.shift();w=H.createElement("li");if(s.is("pre")||l.test(s.getName()))s.appendTo(w);else{if(I&&s.getDirection()){s.removeStyle("direction");s.removeAttribute("dir")}s.copyAttributes(w);s.moveChildren(w);s.remove()}w.appendTo(B)}I&&K&&B.setAttribute("dir",I);y?B.insertBefore(y):B.appendTo(q)}}function e(s,q,w){function y(o){if((K=
I[o?"getFirst":"getLast"]())&&!(K.is&&K.isBlockBoundary())&&(L=q.root[o?"getPrevious":"getNext"](CKEDITOR.dom.walker.whitespaces(true)))&&!(L.is&&L.isBlockBoundary({br:1})))s.document.createElement("br")[o?"insertBefore":"insertAfter"](K)}for(var H=CKEDITOR.plugins.list.listToArray(q.root,w),D=[],B=0;B<q.contents.length;B++){var G=q.contents[B];G=G.getAscendant("li",true);if(!(!G||G.getCustomData("list_item_processed"))){D.push(G);CKEDITOR.dom.element.setMarker(w,G,"list_item_processed",true)}}G=
null;for(B=0;B<D.length;B++){G=D[B].getCustomData("listarray_index");H[G].indent=-1}for(B=G+1;B<H.length;B++)if(H[B].indent>H[B-1].indent+1){D=H[B-1].indent+1-H[B].indent;for(G=H[B].indent;H[B]&&H[B].indent>=G;){H[B].indent+=D;B++}B--}var I=CKEDITOR.plugins.list.arrayToList(H,w,null,s.config.enterMode,q.root.getAttribute("dir")).listNode,K,L;y(true);y();I.replace(q.root)}function h(s,q){this.name=s;this.type=q}function j(s){return function(q){var w=q.children;a:{for(var y=q.children,H=y.length,D=
0;D<H;D++){q=y[D];if(q.name&&q.name in m.$list){q=D;break a}}q=H}y=(y=w[q])&&y.previous;var B;if(y&&(y.name&&y.name=="br"||y.value&&(B=y.value.match(p))))if(!(B&&B.index)&&y==w[0])w[0]=s||CKEDITOR.env.ie?new CKEDITOR.htmlParser.text(""):new CKEDITOR.htmlParser.element("br",{});else if(y.name=="br")w.splice(q-1,1);else y.value=y.value.replace(p,"")}}var g={ol:1,ul:1},f=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(),k=function(s){return!(f(s)||d(s))};CKEDITOR.plugins.list={listToArray:function(s,
q,w,y,H){if(!g[s.getName()])return[];y||(y=0);w||(w=[]);for(var D=0,B=s.getChildCount();D<B;D++){var G=s.getChild(D);if(G.$.nodeName.toLowerCase()=="li"){var I={parent:s,indent:y,element:G,contents:[]};if(H)I.grandparent=H;else{I.grandparent=s.getParent();if(I.grandparent&&I.grandparent.$.nodeName.toLowerCase()=="li")I.grandparent=I.grandparent.getParent()}q&&CKEDITOR.dom.element.setMarker(q,G,"listarray_index",w.length);w.push(I);for(var K=0,L=G.getChildCount(),o;K<L;K++){o=G.getChild(K);o.type==
CKEDITOR.NODE_ELEMENT&&g[o.getName()]?CKEDITOR.plugins.list.listToArray(o,q,w,y+1,I.grandparent):I.contents.push(o)}}}return w},arrayToList:function(s,q,w,y,H){w||(w=0);if(!s||s.length<w+1)return null;for(var D=s[w].parent.getDocument(),B=new CKEDITOR.dom.documentFragment(D),G=null,I=w,K=Math.max(s[w].indent,0),L=null,o=y==CKEDITOR.ENTER_P?"p":"div";;){var z=s[I];if(z.indent==K){if(!G||s[I].parent.getName()!=G.getName()){G=s[I].parent.clone(false,1);if(z.toIndent){G.removeAttribute("data-rte-empty-lines-before");
G.setAttribute("data-rte-new-node",true)}H&&G.setAttribute("dir",H);B.append(G)}L=G.append(z.element.clone(0,1));for(var v=0;v<z.contents.length;v++)L.append(z.contents[v].clone(1,1));I++}else if(z.indent==Math.max(K,0)+1){I=CKEDITOR.plugins.list.arrayToList(s,null,I,y);!L.getChildCount()&&CKEDITOR.env.ie&&!(D.$.documentMode>7)&&L.append(D.createText(""));L.append(I.listNode);I=I.nextIndex}else if(z.indent==-1&&!w&&z.grandparent){if(g[z.grandparent.getName()])L=z.element.clone(false,true);else if(H||
z.element.hasAttributes()||y!=CKEDITOR.ENTER_BR){L=D.createElement(o);z.element.copyAttributes(L,{type:1,value:1});(G=z.element.getDirection()||H)&&L.setAttribute("dir",G);if(!H&&y==CKEDITOR.ENTER_BR&&!L.hasAttributes())L=new CKEDITOR.dom.documentFragment(D)}else L=new CKEDITOR.dom.documentFragment(D);for(v=0;v<z.contents.length;v++)L.append(z.contents[v].clone(1,1));if(L.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&I!=s.length-1){(G=L.getLast())&&G.type==CKEDITOR.NODE_ELEMENT&&G.getAttribute("type")==
"_moz"&&G.remove();L.getLast(k)&&G.type==CKEDITOR.NODE_ELEMENT&&G.getName()in CKEDITOR.dtd.$block||L.append(D.createElement("br"))}if(L.type==CKEDITOR.NODE_ELEMENT&&L.getName()==o&&L.$.firstChild){L.trim();G=L.getFirst();if(G.type==CKEDITOR.NODE_ELEMENT&&G.isBlockBoundary()){G=new CKEDITOR.dom.documentFragment(D);L.moveChildren(G);L=G}}G=L.$.nodeName.toLowerCase();if(!CKEDITOR.env.ie&&(G=="div"||G=="p"))L.appendBogus();B.append(L);G=null;I++}else return null;if(s.length<=I||Math.max(s[I].indent,0)<
K)break}if(q)for(s=B.getFirst();s;){s.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dom.element.clearMarkers(q,s);s=s.getNextSourceNode()}return{listNode:B,nextIndex:I}}};var l=/^h[1-6]$/;h.prototype={exec:function(s){s.focus();var q=s.document,w=s.getSelection(),y=w&&w.getRanges(CKEDITOR.ONLY_FORMATTABLES);if(!(!y||y.length<1)){if(this.state==CKEDITOR.TRISTATE_OFF){var H=q.getBody();H.trim();if(H.getFirst()){var D=y.length==1&&y[0];(q=D&&D.getEnclosedNode())&&q.is&&this.type==q.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else{var B=
q.createElement(s.config.enterMode==CKEDITOR.ENTER_P?"p":s.config.enterMode==CKEDITOR.ENTER_DIV?"div":"br");B.appendTo(H);y=new CKEDITOR.dom.rangeList([new CKEDITOR.dom.range(q)]);if(B.is("br")){y[0].setStartBefore(B);y[0].setEndAfter(B)}else y[0].selectNodeContents(B);w.selectRanges(y)}}q=w.createBookmarks(true);B=[];H={};y=y.createIterator();for(var G=0;(D=y.getNextRange())&&++G;){var I=D.getBoundaryNodes(),K=I.startNode,L=I.endNode;K.type==CKEDITOR.NODE_ELEMENT&&K.getName()=="td"&&D.setStartAt(I.startNode,
CKEDITOR.POSITION_AFTER_START);L.type==CKEDITOR.NODE_ELEMENT&&L.getName()=="td"&&D.setEndAt(I.endNode,CKEDITOR.POSITION_BEFORE_END);D=D.createIterator();for(D.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;I=D.getNextParagraph();)if(!I.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(H,I,"list_block",1);K=new CKEDITOR.dom.elementPath(I);L=K.elements;var o=null,z=0,v=K.blockLimit,x;for(K=L.length-1;K>=0&&(x=L[K]);K--)if(g[x.getName()]&&v.contains(x)){v.removeCustomData("list_group_object_"+
G);if(K=x.getCustomData("list_group_object"))K.contents.push(I);else{K={root:x,contents:[I]};B.push(K);CKEDITOR.dom.element.setMarker(H,x,"list_group_object",K)}z=1;break}if(!z){L=v;if(L.getCustomData("list_group_object_"+G))L.getCustomData("list_group_object_"+G).contents.push(I);else{K={root:L,contents:[I]};CKEDITOR.dom.element.setMarker(H,L,"list_group_object_"+G,K);B.push(K)}}}}for(x=[];B.length>0;){K=B.shift();if(this.state==CKEDITOR.TRISTATE_OFF)g[K.root.getName()]?b.call(this,s,K,H,x):c.call(this,
s,K,x);else this.state==CKEDITOR.TRISTATE_ON&&g[K.root.getName()]&&e.call(this,s,K,H)}for(K=0;K<x.length;K++){o=x[K];var A=this;(B=function(E){var C=o[E?"getPrevious":"getNext"](CKEDITOR.dom.walker.whitespaces(true));if(C&&C.getName&&C.getName()==A.type){C.remove();C.moveChildren(o,E)}})();B(1)}CKEDITOR.dom.element.clearAllMarkers(H);w.selectBookmarks(q);s.focus()}}};var m=CKEDITOR.dtd,p=/[\t\r\n ]*(?:&nbsp;|\xa0)$/,r={elements:{}},u;for(u in m.$listItem)r.elements[u]=j();var n={elements:{}};for(u in m.$listItem)n.elements[u]=
j(true);CKEDITOR.plugins.add("list",{init:function(s){var q=s.addCommand("numberedlist",new h("numberedlist","ol")),w=s.addCommand("bulletedlist",new h("bulletedlist","ul"));s.ui.addButton("NumberedList",{label:s.lang.numberedlist,command:"numberedlist"});s.ui.addButton("BulletedList",{label:s.lang.bulletedlist,command:"bulletedlist"});s.on("selectionChange",CKEDITOR.tools.bind(a,q));s.on("selectionChange",CKEDITOR.tools.bind(a,w))},afterInit:function(s){if(s=s.dataProcessor){s.dataFilter.addRules(r);
s.htmlFilter.addRules(n)}},requires:["domiterator"]})})();
(function(){CKEDITOR.plugins.add("pastefromword",{init:function(a){var b=0,c=function(){setTimeout(function(){b=0},0)};a.addCommand("pastefromword",{canUndo:false,exec:function(){b=1;if(a.execCommand("paste")===false)a.on("dialogHide",function(e){e.removeListener();c()});else c()}});a.ui.addButton("PasteFromWord",{label:a.lang.pastefromword.toolbar,command:"pastefromword"});a.on("pasteState",function(e){a.getCommand("pastefromword").setState(e.data)});a.on("paste",function(e){var h=e.data,j;if((j=
h.html)&&(b||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(j))){var g=this.loadFilterRules(function(){if(g)a.fire("paste",h);else if(!a.config.pasteFromWordPromptCleanup||b||confirm(a.lang.pastefromword.confirmCleanup))h.html=CKEDITOR.cleanWord(j,a)});g&&e.cancel()}},this)},loadFilterRules:function(a){var b=CKEDITOR.cleanWord;if(b)a();else{var c=CKEDITOR.getUrl(CKEDITOR.config.pasteFromWordCleanupFile||this.path+"filter/default.js");CKEDITOR.scriptLoader.load(c,a,null,true)}return!b},
requires:["clipboard"]})})();
(function(){var a={exec:function(b){var c=CKEDITOR.tools.tryThese(function(){var e=window.clipboardData.getData("Text");if(!e)throw 0;return e});if(c)b.fire("paste",{text:c});else{b.openDialog("pastetext");return false}return true}};CKEDITOR.plugins.add("pastetext",{init:function(b){b.addCommand("pastetext",a);b.ui.addButton("PasteText",{label:b.lang.pasteText.button,command:"pastetext"});CKEDITOR.dialog.add("pastetext",CKEDITOR.getUrl(this.path+"dialogs/pastetext.js"));if(b.config.forcePasteAsPlainText)b.on("beforeCommandExec",
function(c){if(c.data.name=="paste"){b.execCommand("pastetext");c.cancel()}},null,null,0);b.on("pasteState",function(c){b.getCommand("pastetext").setState(c.data)})},requires:["clipboard"]})})();CKEDITOR.plugins.add("popup");
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(a,b,c,e){b=b||"80%";c=c||"70%";if(typeof b=="string"&&b.length>1&&b.substr(b.length-1,1)=="%")b=parseInt(window.screen.width*parseInt(b,10)/100,10);if(typeof c=="string"&&c.length>1&&c.substr(c.length-1,1)=="%")c=parseInt(window.screen.height*parseInt(c,10)/100,10);if(b<640)b=640;if(c<420)c=420;var h=parseInt((window.screen.height-c)/2,10),j=parseInt((window.screen.width-b)/2,10);e=(e||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+
",width="+b+",height="+c+",top="+h+",left="+j;var g=window.open("",null,e,true);if(!g)return false;try{g.moveTo(j,h);g.resizeTo(b,c);g.focus();g.location.href=a}catch(f){window.open(a,null,e,true)}return true}});
(function(){var a={modes:{wysiwyg:1,source:1},canUndo:false,exec:function(b){var c=b.config,e=c.baseHref?'<base href="'+c.baseHref+'"/>':"",h=CKEDITOR.env.isCustomDomain();if(c.fullPage)b=b.getData().replace(/<head>/,"$&"+e).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+b.lang.preview);else{c="<body ";var j=b.document&&b.document.getBody();if(j){if(j.getAttribute("id"))c+='id="'+j.getAttribute("id")+'" ';if(j.getAttribute("class"))c+='class="'+j.getAttribute("class")+'" '}c+=">";b=b.config.docType+'<html dir="'+
b.config.contentsLangDirection+'"><head>'+e+"<title>"+b.lang.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(b.config.contentsCss)+"</head>"+c+b.getData()+"</body></html>"}e=640;c=420;j=80;try{var g=window.screen;e=Math.round(g.width*0.8);c=Math.round(g.height*0.7);j=Math.round(g.width*0.1)}catch(f){}g="";if(h){window._cke_htmlToLoad=b;g='javascript:void( (function(){document.open();document.domain="'+document.domain+'";document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )'}g=
window.open(g,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+e+",height="+c+",left="+j);if(!h){g.document.open();g.document.write(b);g.document.close()}}};CKEDITOR.plugins.add("preview",{init:function(b){b.addCommand("preview",a);b.ui.addButton("Preview",{label:b.lang.preview,command:"preview"})}})})();CKEDITOR.plugins.add("print",{init:function(a){a.addCommand("print",CKEDITOR.plugins.print);a.ui.addButton("Print",{label:a.lang.print,command:"print"})}});
CKEDITOR.plugins.print={exec:function(a){CKEDITOR.env.opera||(CKEDITOR.env.gecko?a.window.$.print():a.document.$.execCommand("Print"))},canUndo:false,modes:{wysiwyg:!CKEDITOR.env.opera}};CKEDITOR.plugins.add("removeformat",{requires:["selection"],init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);a.ui.addButton("RemoveFormat",{label:a.lang.removeFormat,command:"removeFormat"});a._.removeFormat={filters:[]}}});
CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var b=a._.removeFormatRegex||(a._.removeFormatRegex=RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),c=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),e=CKEDITOR.plugins.removeformat.filter,h=a.getSelection().getRanges(1),j=h.createIterator(),g;g=j.getNextRange();){g.collapsed||g.enlarge(CKEDITOR.ENLARGE_ELEMENT);var f=g.createBookmark(),d=f.startNode,k=f.endNode,
l=function(m){for(var p=new CKEDITOR.dom.elementPath(m),r=p.elements,u=1,n;n=r[u];u++){if(n.equals(p.block)||n.equals(p.blockLimit))break;b.test(n.getName())&&e(a,n)&&m.breakParent(n)}};l(d);if(k){l(k);for(d=d.getNextSourceNode(true,CKEDITOR.NODE_ELEMENT);d;){if(d.equals(k))break;l=d.getNextSourceNode(false,CKEDITOR.NODE_ELEMENT);if(!(d.getName()=="img"&&d.data("cke-realelement"))&&e(a,d))if(b.test(d.getName()))d.remove(1);else{d.removeAttributes(c);a.fire("removeFormatCleanup",d)}d=l}}g.moveToBookmark(f)}a.getSelection().selectRanges(h)}}},
filter:function(a,b){for(var c=a._.removeFormat.filters,e=0;e<c.length;e++)if(c[e](b)===false)return false;return true}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormat.filters.push(a)};CKEDITOR.config.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var";CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";
CKEDITOR.plugins.add("resize",{init:function(a){var b=a.config;!b.resize_dir&&(b.resize_dir="both");b.resize_maxWidth==undefined&&(b.resize_maxWidth=3E3);b.resize_maxHeight==undefined&&(b.resize_maxHeight=3E3);b.resize_minWidth==undefined&&(b.resize_minWidth=750);b.resize_minHeight==undefined&&(b.resize_minHeight=250);if(b.resize_enabled!==false){var c=null,e,h,j=(b.resize_dir=="both"||b.resize_dir=="horizontal")&&b.resize_minWidth!=b.resize_maxWidth,g=(b.resize_dir=="both"||b.resize_dir=="vertical")&&
b.resize_minHeight!=b.resize_maxHeight,f=function(l){var m=h.width,p=h.height,r=m+(l.data.$.screenX-e.x)*(a.lang.dir=="rtl"?-1:1);l=p+(l.data.$.screenY-e.y);if(j)m=Math.max(b.resize_minWidth,Math.min(r,b.resize_maxWidth));if(g)p=Math.max(b.resize_minHeight,Math.min(l,b.resize_maxHeight));a.resize(m,p)},d=function(){CKEDITOR.document.removeListener("mousemove",f);CKEDITOR.document.removeListener("mouseup",d);if(a.document){a.document.removeListener("mousemove",f);a.document.removeListener("mouseup",
d)}},k=CKEDITOR.tools.addFunction(function(l){c||(c=a.getResizable());h={width:c.$.offsetWidth||0,height:c.$.offsetHeight||0};e={x:l.screenX,y:l.screenY};b.resize_minWidth>h.width&&(b.resize_minWidth=h.width);b.resize_minHeight>h.height&&(b.resize_minHeight=h.height);CKEDITOR.document.on("mousemove",f);CKEDITOR.document.on("mouseup",d);if(a.document){a.document.on("mousemove",f);a.document.on("mouseup",d)}});a.on("destroy",function(){CKEDITOR.tools.removeFunction(k)});a.on("themeSpace",function(l){if(l.data.space==
"bottom"){var m="";if(j&&!g)m=" cke_resizer_horizontal";if(!j&&g)m=" cke_resizer_vertical";l.data.html+='<div class="cke_resizer'+m+'" title="'+CKEDITOR.tools.htmlEncode(a.lang.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+k+', event)"></div>'}},a,null,100)}}});
CKEDITOR.plugins.add("smiley",{requires:["dialog"],init:function(a){a.config.smiley_path=a.config.smiley_path||this.path+"images/";a.addCommand("smiley",new CKEDITOR.dialogCommand("smiley"));a.ui.addButton("Smiley",{label:a.lang.smiley.toolbar,command:"smiley"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}});
CKEDITOR.config.smiley_images=["regular_smile.gif","sad_smile.gif","wink_smile.gif","teeth_smile.gif","confused_smile.gif","tounge_smile.gif","embaressed_smile.gif","omg_smile.gif","whatchutalkingabout_smile.gif","angry_smile.gif","angel_smile.gif","shades_smile.gif","devil_smile.gif","cry_smile.gif","lightbulb.gif","thumbs_down.gif","thumbs_up.gif","heart.gif","broken_heart.gif","kiss.gif","envelope.gif"];
CKEDITOR.config.smiley_descriptions=["smiley","sad","wink","laugh","frown","cheeky","blush","surprise","indecision","angry","angel","cool","devil","crying","enlightened","no","yes","heart","broken heart","kiss","mail"];
(function(){var a=/%1/g,b=/%2/g,c=/%3/g,e={preserveState:true,editorFocus:false,exec:function(h){this.toggleState();this.refresh(h)},refresh:function(h){var j=this.state==CKEDITOR.TRISTATE_ON?"addClass":"removeClass";h.document.getBody()[j]("cke_show_blocks")}};CKEDITOR.plugins.add("showblocks",{requires:["wysiwygarea"],init:function(h){var j=h.addCommand("showblocks",e);j.canUndo=false;h.config.startupOutlineBlocks&&j.setState(CKEDITOR.TRISTATE_ON);h.addCss(".%2 p,.%2 div,.%2 pre,.%2 address,.%2 blockquote,.%2 h1,.%2 h2,.%2 h3,.%2 h4,.%2 h5,.%2 h6{background-repeat: no-repeat;background-position: top %3;border: 1px dotted gray;padding-top: 8px;padding-%3: 8px;}.%2 p{%1p.png);}.%2 div{%1div.png);}.%2 pre{%1pre.png);}.%2 address{%1address.png);}.%2 blockquote{%1blockquote.png);}.%2 h1{%1h1.png);}.%2 h2{%1h2.png);}.%2 h3{%1h3.png);}.%2 h4{%1h4.png);}.%2 h5{%1h5.png);}.%2 h6{%1h6.png);}".replace(a,
"background-image: url("+CKEDITOR.getUrl(this.path)+"images/block_").replace(b,"cke_show_blocks ").replace(c,h.lang.dir=="rtl"?"right":"left"));h.ui.addButton("ShowBlocks",{label:h.lang.showBlocks,command:"showblocks"});h.on("mode",function(){j.state!=CKEDITOR.TRISTATE_DISABLED&&j.refresh(h)});h.on("contentDom",function(){j.state!=CKEDITOR.TRISTATE_DISABLED&&j.refresh(h)})}})})();
(function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th,","{","border : #d3d3d3 1px dotted","}"]:[".%1 table.%2,",".%1 table.%2 > tr > td, .%1 table.%2 > tr > th,",".%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,",".%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,",".%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th","{","border : #d3d3d3 1px dotted","}"]).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders ");
var b={preserveState:true,editorFocus:false,exec:function(c){this.toggleState();this.refresh(c)},refresh:function(c){var e=this.state==CKEDITOR.TRISTATE_ON?"addClass":"removeClass";c.document.getBody()[e]("cke_show_borders")}};CKEDITOR.plugins.add("showborders",{requires:["wysiwygarea"],modes:{wysiwyg:1},init:function(c){var e=c.addCommand("showborders",b);e.canUndo=false;c.config.startupShowBorders!==false&&e.setState(CKEDITOR.TRISTATE_ON);c.addCss(a);c.on("mode",function(){e.state!=CKEDITOR.TRISTATE_DISABLED&&
e.refresh(c)},null,null,100);c.on("contentDom",function(){e.state!=CKEDITOR.TRISTATE_DISABLED&&e.refresh(c)});c.on("removeFormatCleanup",function(h){h=h.data;if(c.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&h.is("table")&&(!h.hasAttribute("border")||parseInt(h.getAttribute("border"),10)<=0))h.addClass("cke_show_border")})},afterInit:function(c){var e=c.dataProcessor;c=e&&e.dataFilter;e=e&&e.htmlFilter;c&&c.addRules({elements:{table:function(h){h=h.attributes;var j=h["class"],g=parseInt(h.border,
10);if(!g||g<=0)h["class"]=(j||"")+" cke_show_border"}}});e&&e.addRules({elements:{table:function(h){h=h.attributes;var j=h["class"];j&&(h["class"]=j.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}});CKEDITOR.on("dialogDefinition",function(c){var e=c.data.name;if(e=="table"||e=="tableProperties"){c=c.data.definition;e=c.getContents("info").get("txtBorder");e.commit=CKEDITOR.tools.override(e.commit,function(h){return function(j,g){h.apply(this,arguments);var f=parseInt(this.getValue(),
10);g[!f||f<=0?"addClass":"removeClass"]("cke_show_border")}});if(c=(c=c.getContents("advanced"))&&c.get("advCSSClasses")){c.setup=CKEDITOR.tools.override(c.setup,function(h){return function(){h.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}});c.commit=CKEDITOR.tools.override(c.commit,function(h){return function(j,g){h.apply(this,arguments);parseInt(g.getAttribute("border"),10)||g.addClass("cke_show_border")}})}}})})();
CKEDITOR.plugins.add("sourcearea",{requires:["editingblock"],init:function(a){var b=CKEDITOR.plugins.sourcearea,c=CKEDITOR.document.getWindow();a.on("editingBlockReady",function(){var e,h;a.addMode("source",{load:function(j,g){CKEDITOR.env.ie&&CKEDITOR.env.version<8&&j.setStyle("position","relative");a.textarea=e=new CKEDITOR.dom.element("textarea");e.setAttributes({dir:"ltr",tabIndex:CKEDITOR.env.webkit?-1:a.tabIndex,role:"textbox","aria-label":a.lang.editorTitle.replace("%1",a.name)});e.addClass("cke_source");
e.addClass("cke_enable_context_menu");var f={width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"};if(CKEDITOR.env.ie){h=function(){e.hide();e.setStyle("height",j.$.clientHeight+"px");e.setStyle("width",j.$.clientWidth+"px");e.show()};a.on("resize",h);c.on("resize",h);setTimeout(h,0)}j.setHtml("");j.append(e);e.setStyles(f);a.fire("ariaWidget",e);e.on("blur",function(){a.focusManager.blur()});e.on("focus",function(){a.focusManager.focus()});a.mayBeDirty=
true;this.loadData(g);(f=a.keystrokeHandler)&&f.attach(e);setTimeout(function(){a.mode="source";a.fire("mode")},CKEDITOR.env.gecko||CKEDITOR.env.webkit?100:0)},loadData:function(j){e.setValue(j);a.fire("dataReady")},getData:function(){return e.getValue()},getSnapshotData:function(){return e.getValue()},unload:function(j){e.clearCustomData();a.textarea=e=null;if(h){a.removeListener("resize",h);c.removeListener("resize",h)}CKEDITOR.env.ie&&CKEDITOR.env.version<8&&j.removeStyle("position")},focus:function(){e.focus()}})});
a.addCommand("source",b.commands.source);a.ui.addButton&&a.ui.addButton("Source",{label:a.lang.source,command:"source"});a.on("mode",function(){a.getCommand("source").setState(a.mode=="source"?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)})}});
CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:false,exec:function(a){a.mode=="wysiwyg"&&a.fire("saveSnapshot");a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);a.setMode(a.mode=="source"?"wysiwyg":"source")},canUndo:false}}};
(function(){function a(b,c){var e=b.type,h=c.type;return e==h?0:e==CKEDITOR.STYLE_OBJECT?-1:h==CKEDITOR.STYLE_OBJECT?1:h==CKEDITOR.STYLE_BLOCK?1:-1}CKEDITOR.plugins.add("stylescombo",{requires:["richcombo","styles"],init:function(b){function c(f){b.getStylesSet(function(d){if(!g.length){for(var k,l,m=0,p=d.length;m<p;m++){k=d[m];l=k.name;k=j[l]=new CKEDITOR.style(k);k._name=l;k._.enterMode=e.enterMode;g.push(k)}g.sort(a)}f&&f()})}var e=b.config,h=b.lang.stylesCombo,j={},g=[];b.ui.addRichCombo("Styles",
{label:h.label,title:h.panelTitle,className:"cke_styles",panel:{css:b.skin.editor.css.concat(e.contentsCss),multiSelect:true,attributes:{"aria-label":h.panelTitle}},init:function(){var f=this;c(function(){for(var d,k,l,m=0,p=g.length;m<p;m++){d=g[m];k=d._name;var r=d.type;if(r!=l){f.startGroup(h["panelTitle"+String(r)]);l=r}f.add(k,d.type==CKEDITOR.STYLE_OBJECT?k:d.buildPreview(),k)}f.commit();f.onOpen()})},onClick:function(f){b.focus();b.fire("saveSnapshot");f=j[f];var d=b.getSelection();d=new CKEDITOR.dom.elementPath(d.getStartElement());
f[f.checkActive(d)?"remove":"apply"](b.document);b.fire("saveSnapshot")},onRender:function(){b.on("selectionChange",function(f){var d=this.getValue();f=f.data.path.elements;for(var k=0,l=f.length,m;k<l;k++){m=f[k];for(var p in j)if(j[p].checkElementRemovable(m,true)){p!=d&&this.setValue(p);return}}this.setValue("")},this)},onOpen:function(){if(CKEDITOR.env.ie||CKEDITOR.env.webkit)b.focus();var f=b.getSelection(),d=f.getSelectedElement();f=new CKEDITOR.dom.elementPath(d||f.getStartElement());d=[0,
0,0,0];this.showAll();this.unmarkAll();for(var k in j){var l=j[k],m=l.type;if(l.checkActive(f))this.mark(k);else if(m==CKEDITOR.STYLE_OBJECT&&!l.checkApplicable(f)){this.hideItem(k);d[m]--}d[m]++}d[CKEDITOR.STYLE_BLOCK]||this.hideGroup(h["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);d[CKEDITOR.STYLE_INLINE]||this.hideGroup(h["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);d[CKEDITOR.STYLE_OBJECT]||this.hideGroup(h["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])}});b.on("instanceReady",function(){c()})}})})();
CKEDITOR.plugins.add("table",{init:function(a){var b=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table"));a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties"));a.ui.addButton("Table",{label:b.toolbar,command:"table"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");a.addMenuItems&&a.addMenuItems({table:{label:b.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:b.deleteTable,
command:"tableDelete",group:"table",order:1}});a.on("doubleclick",function(c){if(c.data.element.is("table"))c.data.dialog="tableProperties"});a.contextMenu&&a.contextMenu.addListener(function(c){if(!c||c.isReadOnly())return null;if(c.hasAscendant("table",1))return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF};return null})}});
(function(){function a(n){function s(I){if(!(y.length>0))if(I.type==CKEDITOR.NODE_ELEMENT&&r.test(I.getName())&&!I.getCustomData("selected_cell")){CKEDITOR.dom.element.setMarker(H,I,"selected_cell",true);y.push(I)}}for(var q=n.createBookmarks(),w=n.getRanges(),y=[],H={},D=0;D<w.length;D++){var B=w[D];if(B.collapsed){B=B.getCommonAncestor();(B=B.getAscendant("td",true)||B.getAscendant("th",true))&&y.push(B)}else{B=new CKEDITOR.dom.walker(B);var G;for(B.guard=s;G=B.next();)if((G=G.getParent())&&r.test(G.getName())&&
!G.getCustomData("selected_cell")){CKEDITOR.dom.element.setMarker(H,G,"selected_cell",true);y.push(G)}}}CKEDITOR.dom.element.clearAllMarkers(H);n.selectBookmarks(q);return y}function b(n){for(var s=0,q=n.length-1,w={},y,H;y=n[s++];)CKEDITOR.dom.element.setMarker(w,y,"delete_cell",true);for(s=0;y=n[s++];)if((H=y.getPrevious())&&!H.getCustomData("delete_cell")||(H=y.getNext())&&!H.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(w);return H}CKEDITOR.dom.element.clearAllMarkers(w);
s=n[0].getParent();if(s=s.getPrevious())return s.getLast();s=n[q].getParent();if(s=s.getNext())return s.getChild(0);return null}function c(n,s){var q=a(n),w=q[0],y=w.getAscendant("table");w=w.getDocument();var H=q[0].getParent(),D=H.$.rowIndex;q=q[q.length-1];var B=q.getParent().$.rowIndex+q.$.rowSpan-1;q=new CKEDITOR.dom.element(y.$.rows[B]);D=s?D:B;H=s?H:q;q=CKEDITOR.tools.buildTableMap(y);y=q[D];D=s?q[D-1]:q[D+1];q=q[0].length;w=w.createElement("tr");for(B=0;B<q;B++){var G;if(y[B].rowSpan>1&&D&&
y[B]==D[B]){G=y[B];G.rowSpan+=1}else{G=(new CKEDITOR.dom.element(y[B])).clone();G.removeAttribute("rowSpan");!CKEDITOR.env.ie&&G.appendBogus();w.append(G);G=G.$}B+=G.colSpan-1}s?w.insertBefore(H):w.insertAfter(H)}function e(n){if(n instanceof CKEDITOR.dom.selection){var s=a(n),q=s[0].getAscendant("table"),w=CKEDITOR.tools.buildTableMap(q);n=s[0].getParent().$.rowIndex;s=s[s.length-1];var y=s.getParent().$.rowIndex+s.$.rowSpan-1;s=[];for(var H=n;H<=y;H++){for(var D=w[H],B=new CKEDITOR.dom.element(q.$.rows[H]),
G=0;G<D.length;G++){var I=new CKEDITOR.dom.element(D[G]),K=I.getParent().$.rowIndex;if(I.$.rowSpan==1)I.remove();else{I.$.rowSpan-=1;if(K==H){K=w[H+1];K[G-1]?I.insertAfter(new CKEDITOR.dom.element(K[G-1])):(new CKEDITOR.dom.element(q.$.rows[H+1])).append(I,1)}}G+=I.$.colSpan-1}s.push(B)}w=q.$.rows;q=new CKEDITOR.dom.element(w[n]||w[n-1]||q.$.parentNode);for(H=s.length;H>=0;H--)e(s[H]);return q}else if(n instanceof CKEDITOR.dom.element){q=n.getAscendant("table");q.$.rows.length==1?q.remove():n.remove()}return null}
function h(n,s){for(var q=s?Infinity:0,w=0;w<n.length;w++){var y;y=n[w];for(var H=s,D=y.getParent().$.cells,B=0,G=0;G<D.length;G++){var I=D[G];B+=H?1:I.colSpan;if(I==y.$)break}y=B-1;if(s?y<q:y>q)q=y}return q}function j(n,s){var q=a(n),w=q[0].getAscendant("table"),y=h(q,1);q=h(q);y=s?y:q;var H=CKEDITOR.tools.buildTableMap(w);w=[];q=[];for(var D=H.length,B=0;B<D;B++){w.push(H[B][y]);var G=s?H[B][y-1]:H[B][y+1];G&&q.push(G)}for(B=0;B<D;B++){if(w[B].colSpan>1&&q.length&&q[B]==w[B]){y=w[B];y.colSpan+=
1}else{y=(new CKEDITOR.dom.element(w[B])).clone();y.removeAttribute("colSpan");!CKEDITOR.env.ie&&y.appendBogus();y[s?"insertBefore":"insertAfter"].call(y,new CKEDITOR.dom.element(w[B]));y=y.$}B+=y.rowSpan-1}}function g(n,s){var q=n.getStartElement();if(q=q.getAscendant("td",1)||q.getAscendant("th",1)){var w=q.clone();CKEDITOR.env.ie||w.appendBogus();s?w.insertBefore(q):w.insertAfter(q)}}function f(n){if(n instanceof CKEDITOR.dom.selection){n=a(n);for(var s=n[0]&&n[0].getAscendant("table"),q=b(n),
w=n.length-1;w>=0;w--)f(n[w]);if(q)d(q,true);else s&&s.remove()}else if(n instanceof CKEDITOR.dom.element){s=n.getParent();s.getChildCount()==1?s.remove():n.remove()}}function d(n,s){var q=new CKEDITOR.dom.range(n.getDocument());if(!q["moveToElementEdit"+(s?"End":"Start")](n)){q.selectNodeContents(n);q.collapse(s?false:true)}q.select(true)}function k(n,s,q){n=n[s];if(typeof q=="undefined")return n;for(s=0;n&&s<n.length;s++)if(q.is&&n[s]==q.$)return s;else if(s==q)return new CKEDITOR.dom.element(n[s]);
return q.is?-1:null}function l(n,s,q){var w=a(n),y;if((s?w.length!=1:w.length<2)||(y=n.getCommonAncestor())&&y.type==CKEDITOR.NODE_ELEMENT&&y.is("table"))return false;var H;n=w[0];y=n.getAscendant("table");var D=CKEDITOR.tools.buildTableMap(y),B=D.length,G=D[0].length,I=n.getParent().$.rowIndex,K=k(D,I,n);if(s){var L;try{var o=parseInt(n.getAttribute("rowspan"),10)||1;H=parseInt(n.getAttribute("colspan"),10)||1;L=D[s=="up"?I-o:s=="down"?I+o:I][s=="left"?K-H:s=="right"?K+H:K]}catch(z){return false}if(!L||
n.$==L)return false;w[s=="up"||s=="left"?"unshift":"push"](new CKEDITOR.dom.element(L))}s=n.getDocument();var v=I;o=L=0;var x=!q&&new CKEDITOR.dom.documentFragment(s),A=0;for(s=0;s<w.length;s++){H=w[s];var E=H.getParent(),C=H.getFirst(),F=H.$.colSpan,J=H.$.rowSpan;E=E.$.rowIndex;var M=k(D,E,H);A+=F*J;o=Math.max(o,M-K+F);L=Math.max(L,E-I+J);if(!q){F=H;(J=F.getBogus())&&J.remove();F.trim();if(H.getChildren().count()){if(E!=v&&C&&!(C.isBlockBoundary&&C.isBlockBoundary({br:1})))(v=x.getLast(CKEDITOR.dom.walker.whitespaces(true)))&&
!(v.is&&v.is("br"))&&x.append("br");H.moveChildren(x)}s?H.remove():H.setHtml("")}v=E}if(q)return L*o==A;else{x.moveChildren(n);CKEDITOR.env.ie||n.appendBogus();if(o>=G)n.removeAttribute("rowSpan");else n.$.rowSpan=L;if(L>=B)n.removeAttribute("colSpan");else n.$.colSpan=o;q=new CKEDITOR.dom.nodeList(y.$.rows);w=q.count();for(s=w-1;s>=0;s--){y=q.getItem(s);if(!y.$.cells.length){y.remove();w++}}return n}}function m(n,s){var q=a(n);if(q.length>1)return false;else if(s)return true;q=q[0];var w=q.getParent(),
y=w.getAscendant("table"),H=CKEDITOR.tools.buildTableMap(y),D=w.$.rowIndex,B=k(H,D,q),G=q.$.rowSpan,I;if(G>1){I=Math.ceil(G/2);G=Math.floor(G/2);w=D+I;y=new CKEDITOR.dom.element(y.$.rows[w]);H=k(H,w);var K;w=q.clone();for(D=0;D<H.length;D++){K=H[D];if(K.parentNode==y.$&&D>B){w.insertBefore(new CKEDITOR.dom.element(K));break}else K=null}K||y.append(w,true)}else{G=I=1;y=w.clone();y.insertAfter(w);y.append(w=q.clone());K=k(H,D);for(B=0;B<K.length;B++)K[B].rowSpan++}CKEDITOR.env.ie||w.appendBogus();q.$.rowSpan=
I;w.$.rowSpan=G;I==1&&q.removeAttribute("rowSpan");G==1&&w.removeAttribute("rowSpan");return w}function p(n,s){var q=a(n);if(q.length>1)return false;else if(s)return true;q=q[0];var w=q.getParent(),y=w.getAscendant("table");y=CKEDITOR.tools.buildTableMap(y);var H=k(y,w.$.rowIndex,q),D=q.$.colSpan;if(D>1){w=Math.ceil(D/2);D=Math.floor(D/2)}else{D=w=1;for(var B=[],G=0;G<y.length;G++)B.push(y[G][H]);for(y=0;y<B.length;y++)B[y].colSpan++}y=q.clone();y.insertAfter(q);CKEDITOR.env.ie||y.appendBogus();q.$.colSpan=
w;y.$.colSpan=D;w==1&&q.removeAttribute("colSpan");D==1&&y.removeAttribute("colSpan");return y}var r=/^(?:td|th)$/,u={thead:1,tbody:1,tfoot:1,td:1,tr:1,th:1};CKEDITOR.plugins.tabletools={init:function(n){var s=n.lang.table;n.addCommand("cellProperties",new CKEDITOR.dialogCommand("cellProperties"));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");n.addCommand("tableDelete",{exec:function(q){var w=(q=q.getSelection())&&q.getStartElement();if(w=w&&w.getAscendant("table",1)){q.selectElement(w);
var y=q.getRanges()[0];y.collapse();q.selectRanges([y]);q=w.getParent();q.getChildCount()==1&&!q.is("body","td","th")?q.remove():w.remove()}}});n.addCommand("rowDelete",{exec:function(q){q=q.getSelection();d(e(q))}});n.addCommand("rowInsertBefore",{exec:function(q){q=q.getSelection();c(q,true)}});n.addCommand("rowInsertAfter",{exec:function(q){q=q.getSelection();c(q)}});n.addCommand("columnDelete",{exec:function(q){q=q.getSelection();q=a(q);var w=q[0],y=q[q.length-1];q=w.getAscendant("table");for(var H=
CKEDITOR.tools.buildTableMap(q),D,B,G=[],I=0,K=H.length;I<K;I++)for(var L=0,o=H[I].length;L<o;L++){if(H[I][L]==w.$)D=L;if(H[I][L]==y.$)B=L}for(I=D;I<=B;I++)for(L=0;L<H.length;L++){y=H[L];w=new CKEDITOR.dom.element(q.$.rows[L]);y=new CKEDITOR.dom.element(y[I]);if(y.$.colSpan==1)y.remove();else y.$.colSpan-=1;L+=y.$.rowSpan-1;w.$.cells.length||G.push(w)}B=q.$.rows[0]&&q.$.rows[0].cells;D=new CKEDITOR.dom.element(B[D]||(D?B[D-1]:q.$.parentNode));G.length==K&&q.remove();D&&d(D,true)}});n.addCommand("columnInsertBefore",
{exec:function(q){q=q.getSelection();j(q,true)}});n.addCommand("columnInsertAfter",{exec:function(q){q=q.getSelection();j(q)}});n.addCommand("cellDelete",{exec:function(q){q=q.getSelection();f(q)}});n.addCommand("cellMerge",{exec:function(q){d(l(q.getSelection()),true)}});n.addCommand("cellMergeRight",{exec:function(q){d(l(q.getSelection(),"right"),true)}});n.addCommand("cellMergeDown",{exec:function(q){d(l(q.getSelection(),"down"),true)}});n.addCommand("cellVerticalSplit",{exec:function(q){d(m(q.getSelection()))}});
n.addCommand("cellHorizontalSplit",{exec:function(q){d(p(q.getSelection()))}});n.addCommand("cellInsertBefore",{exec:function(q){q=q.getSelection();g(q,true)}});n.addCommand("cellInsertAfter",{exec:function(q){q=q.getSelection();g(q)}});n.addMenuItems&&n.addMenuItems({tablecell:{label:s.cell.menu,group:"tablecell",order:1,getItems:function(){var q=n.getSelection(),w=a(q);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,
tablecell_merge:l(q,null,true)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:l(q,"right",true)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:l(q,"down",true)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:m(q,true)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:p(q,true)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:w.length>0?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},
tablecell_insertBefore:{label:s.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:s.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:s.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:s.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:s.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:s.cell.mergeDown,
group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:s.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:s.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:s.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:s.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,
tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:s.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:s.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:s.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:s.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,
tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:s.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:s.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:s.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});n.contextMenu&&n.contextMenu.addListener(function(q){if(!q||q.isReadOnly())return null;
for(;q;){if(q.getName()in u)return{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF};q=q.getParent()}return null})},getSelectedCells:a};CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)})();
CKEDITOR.tools.buildTableMap=function(a){a=a.$.rows;for(var b=-1,c=[],e=0;e<a.length;e++){b++;!c[b]&&(c[b]=[]);for(var h=-1,j=0;j<a[e].cells.length;j++){var g=a[e].cells[j];for(h++;c[b][h];)h++;var f=isNaN(g.colSpan)?1:g.colSpan;g=isNaN(g.rowSpan)?1:g.rowSpan;for(var d=0;d<g;d++){c[b+d]||(c[b+d]=[]);for(var k=0;k<f;k++)c[b+d][h+k]=a[e].cells[j]}h+=f-1}}return c};
CKEDITOR.plugins.add("specialchar",{availableLangs:{en:1},init:function(a){var b=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");a.addCommand("specialchar",{exec:function(){var c=a.langCode;c=b.availableLangs[c]?c:"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(b.path+"lang/"+c+".js"),function(){CKEDITOR.tools.extend(a.lang.specialChar,b.langEntries[c]);a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:false});a.ui.addButton("SpecialChar",{label:a.lang.specialChar.toolbar,
command:"specialchar"})}});
CKEDITOR.config.specialChars=["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&lt;","=","&gt;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;",
"&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;",
"&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;",
"&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"];
(function(){function a(h){return{editorFocus:false,canUndo:false,modes:{wysiwyg:1},exec:function(j){if(j.focusManager.hasFocus){var g=j.getSelection().getCommonAncestor(),f;if(f=g.getAscendant("td",true)||g.getAscendant("th",true)){g=new CKEDITOR.dom.range(j.document);var d=CKEDITOR.tools.tryThese(function(){return f.getParent().$.cells[f.$.cellIndex+(h?-1:1)]},function(){var r=f.getParent();r=r.getAscendant("table").$.rows[r.$.rowIndex+(h?-1:1)];return r.cells[h?r.cells.length-1:0]});if(d||h)if(d){d=
new CKEDITOR.dom.element(d);g.moveToElementEditStart(d);g.checkStartOfBlock()&&g.checkEndOfBlock()||g.selectNodeContents(d)}else return true;else{var k=f.getAscendant("table").$;d=f.getParent().$.cells;k=new CKEDITOR.dom.element(k.insertRow(-1),j.document);for(var l=0,m=d.length;l<m;l++){var p=k.append((new CKEDITOR.dom.element(d[l],j.document)).clone(false,false));!CKEDITOR.env.ie&&p.appendBogus()}g.moveToElementEditStart(k)}g.select(true);return true}}return false}}}var b={editorFocus:false,modes:{wysiwyg:1,
source:1}},c={exec:function(h){h.container.focusNext(true,h.tabIndex)}},e={exec:function(h){h.container.focusPrevious(true,h.tabIndex)}};CKEDITOR.plugins.add("tab",{requires:["keystrokes"],init:function(h){for(var j=h.config.enableTabKeyTools!==false,g=h.config.tabSpaces||0,f="";g--;)f+="";if(f)h.on("key",function(d){if(d.data.keyCode==9){h.insertHtml(f);d.cancel()}});if(j)h.on("key",function(d){if(d.data.keyCode==9&&h.execCommand("selectNextCell")||d.data.keyCode==CKEDITOR.SHIFT+9&&h.execCommand("selectPreviousCell"))d.cancel()});
if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)h.on("key",function(d){var k=d.data.keyCode;if(k==9&&!f){d.cancel();h.execCommand("blur")}if(k==CKEDITOR.SHIFT+9){h.execCommand("blurBack");d.cancel()}});h.addCommand("blur",CKEDITOR.tools.extend(c,b));h.addCommand("blurBack",CKEDITOR.tools.extend(e,b));h.addCommand("selectNextCell",a());h.addCommand("selectPreviousCell",a(true))}})})();
CKEDITOR.dom.element.prototype.focusNext=function(a,b){var c=b===undefined?this.getTabIndex():b,e,h,j,g,f,d;if(c<=0)for(f=this.getNextSourceNode(a,CKEDITOR.NODE_ELEMENT);f;){if(f.isVisible()&&f.getTabIndex()===0){j=f;break}f=f.getNextSourceNode(false,CKEDITOR.NODE_ELEMENT)}else for(f=this.getDocument().getBody().getFirst();f=f.getNextSourceNode(false,CKEDITOR.NODE_ELEMENT);){if(!e)if(!h&&f.equals(this)){h=true;if(a){if(!(f=f.getNextSourceNode(true,CKEDITOR.NODE_ELEMENT)))break;e=1}}else if(h&&!this.contains(f))e=
1;if(!(!f.isVisible()||(d=f.getTabIndex())<0)){if(e&&d==c){j=f;break}if(d>c&&(!j||!g||d<g)){j=f;g=d}else if(!j&&d===0){j=f;g=d}}}j&&j.focus()};
CKEDITOR.dom.element.prototype.focusPrevious=function(a,b){for(var c=b===undefined?this.getTabIndex():b,e,h,j,g=0,f,d=this.getDocument().getBody().getLast();d=d.getPreviousSourceNode(false,CKEDITOR.NODE_ELEMENT);){if(!e)if(!h&&d.equals(this)){h=true;if(a){if(!(d=d.getPreviousSourceNode(true,CKEDITOR.NODE_ELEMENT)))break;e=1}}else if(h&&!this.contains(d))e=1;if(!(!d.isVisible()||(f=d.getTabIndex())<0))if(c<=0){if(e&&f===0){j=d;break}if(f>g){j=d;g=f}}else{if(e&&f==c){j=d;break}if(f<c&&(!j||f>g)){j=
d;g=f}}}j&&j.focus()};
(function(){CKEDITOR.plugins.add("templates",{requires:["dialog"],init:function(c){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));c.addCommand("templates",new CKEDITOR.dialogCommand("templates"));c.ui.addButton("Templates",{label:c.lang.templates.button,command:"templates"})}});var a={},b={};CKEDITOR.addTemplates=function(c,e){a[c]=e};CKEDITOR.getTemplates=function(c){return a[c]};CKEDITOR.loadTemplates=function(c,e){for(var h=[],j=0,g=c.length;j<g;j++)if(!b[c[j]]){h.push(c[j]);
b[c[j]]=1}h.length?CKEDITOR.scriptLoader.load(h,e):setTimeout(e,0)}})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=true;
(function(){function a(g){this.editor=g;this.reset()}CKEDITOR.plugins.add("undo",{requires:["selection","wysiwygarea"],init:function(g){function f(m){d.enabled&&m.data.command.canUndo!==false&&d.save()}var d=new a(g),k=g.addCommand("undo",{exec:function(){if(d.undo()){g.selectionChange();this.fire("afterUndo")}},state:CKEDITOR.TRISTATE_DISABLED,canUndo:false}),l=g.addCommand("redo",{exec:function(){if(d.redo()){g.selectionChange();this.fire("afterRedo")}},state:CKEDITOR.TRISTATE_DISABLED,canUndo:false});
d.onChange=function(){k.setState(d.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);l.setState(d.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};g.on("beforeCommandExec",f);g.on("afterCommandExec",f);g.on("saveSnapshot",function(){d.save()});g.on("contentDom",function(){g.document.on("keydown",function(m){!m.data.$.ctrlKey&&!m.data.$.metaKey&&d.type(m)})});g.on("beforeModeUnload",function(){g.mode=="wysiwyg"&&d.save(true)});g.on("mode",function(){d.enabled=g.mode=="wysiwyg";
d.onChange()});g.ui.addButton("Undo",{label:g.lang.undo,command:"undo"});g.ui.addButton("Redo",{label:g.lang.redo,command:"redo"});g.resetUndo=function(){d.reset();g.fire("saveSnapshot")};g.on("updateSnapshot",function(){d.currentImage&&(new b(g)).equals(d.currentImage)&&setTimeout(function(){d.update()},0)})}});CKEDITOR.plugins.undo={};var b=CKEDITOR.plugins.undo.Image=function(g){this.editor=g;g.fire("beforeCreateUndoSnapshot");var f=g.getSnapshot(),d=f&&g.getSelection();CKEDITOR.env.ie&&f&&(f=
f.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=f;this.bookmarks=d&&d.createBookmarks2(true);g.fire("afterCreateUndoSnapshot")},c=/\b(?:href|src|name)="[^"]*?"/gi;b.prototype={equals:function(g,f){var d=this.contents,k=g.contents;if(CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)){d=d.replace(c,"");k=k.replace(c,"")}if(d!=k)return false;if(f)return true;d=this.bookmarks;k=g.bookmarks;if(d||k){if(!d||!k||d.length!=k.length)return false;for(var l=0;l<d.length;l++){var m=
d[l],p=k[l];if(m.startOffset!=p.startOffset||m.endOffset!=p.endOffset||!CKEDITOR.tools.arrayCompare(m.start,p.start)||!CKEDITOR.tools.arrayCompare(m.end,p.end))return false}}return true}};var e={8:1,46:1},h={16:1,17:1,18:1},j={37:1,38:1,39:1,40:1};a.prototype={type:function(g){g=g&&g.data.getKey();var f=g in e,d=this.lastKeystroke in e,k=f&&g==this.lastKeystroke,l=g in j,m=this.lastKeystroke in j;if(!(g in h||this.typing)||!f&&!l&&(d||m)||f&&!k){var p=new b(this.editor);CKEDITOR.tools.setTimeout(function(){var r=
this.editor.getSnapshot();if(CKEDITOR.env.ie)r=r.replace(/\s+data-cke-expando=".*?"/g,"");if(p.contents!=r){this.typing=true;this.save(false,p,false)||this.snapshots.splice(this.index+1,this.snapshots.length-this.index-1);this.hasUndo=true;this.hasRedo=false;this.modifiersCount=this.typesCount=1;this.onChange()}},0,this)}this.lastKeystroke=g;if(f){this.typesCount=0;this.modifiersCount++;if(this.modifiersCount>25){this.save(false,null,false);this.modifiersCount=1}}else if(!l){this.modifiersCount=0;
this.typesCount++;if(this.typesCount>25){this.save(false,null,false);this.typesCount=1}}},reset:function(){this.lastKeystroke=0;this.snapshots=[];this.index=-1;this.limit=this.editor.config.undoStackSize||20;this.currentImage=null;this.hasRedo=this.hasUndo=false;this.resetType()},resetType:function(){this.typing=false;delete this.lastKeystroke;this.modifiersCount=this.typesCount=0},fireChange:function(){this.hasUndo=!!this.getNextImage(true);this.hasRedo=!!this.getNextImage(false);this.resetType();
this.onChange()},save:function(g,f,d){var k=this.snapshots;RTE.log("undo save");f||(f=new b(this.editor));if(f.contents===false)return false;if(this.currentImage&&f.equals(this.currentImage,g))return false;k.splice(this.index+1,k.length-this.index-1);k.length==this.limit&&k.shift();this.index=k.push(f)-1;this.currentImage=f;d!==false&&this.fireChange();return true},restoreImage:function(g){this.editor.loadSnapshot(g.contents);if(g.bookmarks)this.editor.getSelection().selectBookmarks(g.bookmarks);
else if(CKEDITOR.env.ie){var f=this.editor.document.getBody().$.createTextRange();f.collapse(true);f.select()}this.index=g.index;this.update();this.fireChange();this.editor.fire("wysiwygModeReady")},getNextImage:function(g){var f=this.snapshots,d=this.currentImage,k;if(d)if(g)for(k=this.index-1;k>=0;k--){g=f[k];if(!d.equals(g,true)){g.index=k;return g}}else for(k=this.index+1;k<f.length;k++){g=f[k];if(!d.equals(g,true)){g.index=k;return g}}return null},redoable:function(){return this.enabled&&this.hasRedo},
undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(true);var g=this.getNextImage(true);if(g)return this.restoreImage(g),true}return false},redo:function(){if(this.redoable()){this.save(true);if(this.redoable()){var g=this.getNextImage(false);if(g)return this.restoreImage(g),true}}return false},update:function(){this.snapshots.splice(this.index,1,this.currentImage=new b(this.editor))}}})();
(function(){function a(n){return n.getName()in l||n.isBlockBoundary()&&CKEDITOR.dtd.$empty[n.getName()]}function b(n){return function(s){if(this.mode=="wysiwyg"){this.focus();this.fire("saveSnapshot");var q=this.getSelection(),w={selection:q,ranges:q&&q.getRanges(),data:s.data};this.fire("beforeInsertContent",w);n.call(this,s.data);CKEDITOR.tools.setTimeout(function(){this.fire("afterInsertContent",w);this.fire("saveSnapshot")},0,this)}}}function c(n){if(this.dataProcessor)n=this.dataProcessor.toHtml(n);
var s=this.getSelection(),q=s.getRanges()[0];if(!q.checkReadOnly()){if(CKEDITOR.env.ie){var w=s.isLocked;w&&s.unlock();var y=s.getNative();if(y.type=="Control")y.clear();else if(s.getType()==CKEDITOR.SELECTION_TEXT)if((s=(q=s.getRanges()[0])&&q.endContainer)&&s.type==CKEDITOR.NODE_ELEMENT&&s.getAttribute("contenteditable")=="false"&&q.checkBoundaryOfElement(s,CKEDITOR.END)){q.setEndAfter(q.endContainer);q.deleteContents()}try{y.createRange().pasteHTML(n)}catch(H){}w&&this.getSelection().lock()}else this.document.$.execCommand("inserthtml",
false,n);if(CKEDITOR.env.webkit){s=this.getSelection();s.scrollIntoView()}}}function e(n){var s=this.getSelection(),q=s.getStartElement().hasAscendant("pre",true)?CKEDITOR.ENTER_BR:this.config.enterMode,w=q==CKEDITOR.ENTER_BR;n=CKEDITOR.tools.htmlEncode(n.replace(/\r\n|\r/g,"\n"));n=n.replace(/^[ \t]+|[ \t]+$/g,function(D,B){return D.length==1?"&nbsp;":B?" "+CKEDITOR.tools.repeat("&nbsp;",D.length-1):CKEDITOR.tools.repeat("&nbsp;",D.length-1)+" "});n=n.replace(/[ \t]{2,}/g,function(D){return CKEDITOR.tools.repeat("&nbsp;",
D.length-1)+" "});var y=q==CKEDITOR.ENTER_P?"p":"div";w||(n=n.replace(/(\n{2})([\s\S]*?)(?:$|\1)/g,function(D,B,G){return"<"+y+">"+G+"</"+y+">"}));n=n.replace(/\n/g,"<br>");w||CKEDITOR.env.ie||(n=n.replace(RegExp("<br>(?=</"+y+">)"),function(D){return CKEDITOR.tools.repeat(D,2)}));if(CKEDITOR.env.gecko||CKEDITOR.env.webkit){s=new CKEDITOR.dom.elementPath(s.getStartElement());q=[];for(w=0;w<s.elements.length;w++){var H=s.elements[w].getName();if(H in CKEDITOR.dtd.$inline)q.unshift(s.elements[w].getOuterHtml().match(/^<.*?>/));
else if(H in CKEDITOR.dtd.$block)break}n=q.join("")+n}c.call(this,n)}function h(n){var s=this.getSelection(),q=s.getRanges(),w=n.getName(),y=CKEDITOR.dtd.$block[w],H=s.isLocked;H&&s.unlock();for(var D,B,G,I=q.length-1;I>=0;I--){D=q[I];if(!D.checkReadOnly()){D.deleteContents(1);B=!I&&n||n.clone(1);var K,L;if(y)for(;(K=D.getCommonAncestor(0,1))&&(L=CKEDITOR.dtd[K.getName()])&&!(L&&L[w]);)if(K.getName()in CKEDITOR.dtd.span)D.splitElement(K);else if(D.checkStartOfBlock()&&D.checkEndOfBlock()){D.setStartBefore(K);
D.collapse(true);K.remove()}else D.splitBlock();D.insertNode(B);G||(G=B)}}if(G){D.moveToPosition(G,CKEDITOR.POSITION_AFTER_END);if(y)(q=(n=G.getNext(p))&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName())&&CKEDITOR.dtd.$block[q]&&CKEDITOR.dtd[q]["#"]&&D.moveToElementEditStart(n)}s.selectRanges([D]);H&&this.getSelection().lock()}function j(n){n.checkDirty()||setTimeout(function(){n.resetDirty()},0)}function g(n){return r(n)&&u(n)}function f(n){if(n.isLocked){n.unlock();setTimeout(function(){n.lock()},0)}}
function d(n){var s=n.window,q=n.document,w=n.document.getBody(),y=w.getChildren().count();if(!y||y==1&&w.getFirst().hasAttribute("_moz_editor_bogus_node")){j(n);n=n.element.getDocument();var H=n.getDocumentElement(),D=H.$.scrollTop,B=H.$.scrollLeft,G=q.$.createEvent("KeyEvents");G.initKeyEvent("keypress",true,true,s.$,false,false,false,false,0,32);q.$.dispatchEvent(G);if(D!=H.$.scrollTop||B!=H.$.scrollLeft)n.getWindow().$.scrollTo(B,D);y&&w.getFirst().remove();q.getBody().appendBogus();s=new CKEDITOR.dom.range(q);
s.setStartAt(w,CKEDITOR.POSITION_AFTER_START);s.select()}}function k(n){var s=n.editor,q=n.data.path,w=q.blockLimit;n=n.data.selection;var y=n.getRanges()[0],H=s.document.getBody(),D=s.config.enterMode;if(CKEDITOR.env.gecko){d(s);var B=q.block||q.blockLimit;if(B&&!B.getBogus()){s.fire("updateSnapshot");j(s);B.appendBogus()}}if(D!=CKEDITOR.ENTER_BR&&y.collapsed&&w.getName()=="body"&&!q.block){s.fire("updateSnapshot");j(s);CKEDITOR.env.ie&&f(n);q=y.fixBlock(true,s.config.enterMode==CKEDITOR.ENTER_DIV?
"div":"p");if(CKEDITOR.env.ie)(w=q.getFirst(g))&&w.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(w.getText()).match(/^(?:&nbsp;|\xa0)$/)&&w.remove();if(q.getOuterHtml().match(m))if((w=q.getNext(r))&&w.type==CKEDITOR.NODE_ELEMENT&&!a(w)){y.moveToElementEditStart(w);q.remove()}else if((w=q.getPrevious(r))&&w.type==CKEDITOR.NODE_ELEMENT&&!a(w)){y.moveToElementEditEnd(w);q.remove()}y.select();if(!CKEDITOR.env.ie){s.forceNextSelectionCheck();s.selectionChange()}}y=new CKEDITOR.dom.range(s.document);q=
new CKEDITOR.dom.walker(y);y.selectNodeContents(H);q.evaluator=function(G){return G.type==CKEDITOR.NODE_ELEMENT&&G.getName()in l};q.guard=function(G,I){return!(G.type==CKEDITOR.NODE_TEXT&&r(G)||I)};if(q.previous()){s.fire("updateSnapshot");j(s);CKEDITOR.env.ie&&f(n);s=D!=CKEDITOR.ENTER_BR?H.append(new CKEDITOR.dom.element(D==CKEDITOR.ENTER_P?"p":"div")):H;CKEDITOR.env.ie||s.appendBogus()}}var l={table:1,pre:1},m=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,
p=CKEDITOR.dom.walker.whitespaces(true),r=CKEDITOR.dom.walker.whitespaces(true),u=CKEDITOR.dom.walker.bookmark(false,true);r=CKEDITOR.dom.walker.whitespaces(true);CKEDITOR.plugins.add("wysiwygarea",{requires:["editingblock"],init:function(n){function s(G){CKEDITOR.tools.tryThese(function(){n.document.$.designMode="on";setTimeout(function(){n.document.$.designMode="off";CKEDITOR.currentInstance==n&&n.document.getBody().focus()},50)},function(){n.document.$.designMode="off";var I=n.document.getBody();
I.setAttribute("contentEditable",false);I.setAttribute("contentEditable",true);!G&&s(1)})}var q=n.config.enterMode!=CKEDITOR.ENTER_BR?n.config.enterMode==CKEDITOR.ENTER_DIV?"div":"p":false,w=n.lang.editorTitle.replace("%1",n.name),y;n.on("editingBlockReady",function(){function G(C){if(z){z=0;n.fire("ariaWidget",K);var F=C.document,J=F.body,M=F.getElementById("cke_actscrpt");M&&M.parentNode.removeChild(M);J.spellcheck=!n.config.disableNativeSpellChecker;if(CKEDITOR.env.ie){J.hideFocus=true;J.disabled=
true;J.contentEditable=true;J.removeAttribute("disabled")}else setTimeout(function(){if(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900||CKEDITOR.env.opera)F.$.body.contentEditable=true;else if(CKEDITOR.env.webkit)F.$.body.parentNode.contentEditable=true;else F.$.designMode="on"},0);CKEDITOR.env.gecko&&CKEDITOR.tools.setTimeout(d,0,null,n);C=n.window=new CKEDITOR.dom.window(C);F=n.document=new CKEDITOR.dom.document(F);F.on("dblclick",function(N){N={element:N.data.getTarget(),dialog:""};n.fire("doubleclick",
N);N.dialog&&n.openDialog(N.dialog)});CKEDITOR.env.ie&&F.on("click",function(N){var P=N.data.getTarget();if(P.is("input")){P=P.getAttribute("type");if(P=="submit"||P=="reset")N.data.preventDefault()}});if(!(CKEDITOR.env.ie||CKEDITOR.env.opera))F.on("mousedown",function(N){N=N.data.getTarget();N.is("img","hr","input","textarea","select")&&n.getSelection().selectElement(N)});if(CKEDITOR.env.gecko)F.on("mouseup",function(N){if(N.data.$.button==2){N=N.data.getTarget();if(!N.getOuterHtml().replace(m,"")){var P=
new CKEDITOR.dom.range(F);P.moveToElementEditStart(N);P.select(true)}}});F.on("click",function(N){N=N.data;N.getTarget().is("a")&&N.$.button!=2&&N.preventDefault()});if(CKEDITOR.env.webkit){F.on("mousedown",function(){T=1});F.on("click",function(N){N.data.getTarget().is("input","select")&&N.data.preventDefault()});F.on("mouseup",function(N){N.data.getTarget().is("input","textarea")&&N.data.preventDefault()})}if(CKEDITOR.env.ie&&F.$.compatMode=="CSS1Compat"||CKEDITOR.env.opera){var S=F.getDocumentElement();
S.on("mousedown",function(N){N.data.getTarget().equals(S)&&B.focus()})}C=CKEDITOR.env.ie?K:C;C.on("blur",function(){n.focusManager.blur()});var T;C.on("focus",function(){var N=n.document;if(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900)s();else if(CKEDITOR.env.opera)N.getBody().focus();else if(CKEDITOR.env.webkit)if(!T){n.document.getDocumentElement().focus();T=1}n.focusManager.focus()});(C=n.keystrokeHandler)&&C.attach(F);if(CKEDITOR.env.ie){F.getDocumentElement().addClass(F.$.compatMode);F.on("keydown",
function(N){if(N.data.getKeystroke()in{8:1,46:1}){var P=n.getSelection(),U=P.getSelectedElement();if(U){n.fire("saveSnapshot");var Q=P.getRanges()[0].createBookmark();U.remove();P.selectBookmarks([Q]);n.fire("saveSnapshot");N.data.preventDefault()}}});if(F.$.compatMode=="CSS1Compat"){var O={33:1,34:1};F.on("keydown",function(N){N.data.getKeystroke()in O&&setTimeout(function(){n.getSelection().scrollIntoView()},0)})}}n.contextMenu&&n.contextMenu.addTarget(F,n.config.browserContextMenuOnCtrl!==false);
setTimeout(function(){n.fire("contentDom");if(v){n.mode="wysiwyg";n.fire("mode");v=false}L=false;if(o){n.focus();o=false}setTimeout(function(){n.fire("dataReady")},0);try{n.document.$.execCommand("enableInlineTableEditing",false,!n.config.disableNativeTableHandles)}catch(N){}if(n.config.disableObjectResizing)try{n.document.$.execCommand("enableObjectResizing",false,false)}catch(P){n.document.getBody().on(CKEDITOR.env.ie?"resizestart":"resize",function(U){U.data.preventDefault()})}CKEDITOR.env.ie&&
setTimeout(function(){if(n.document){var U=n.document.$.body;U.runtimeStyle.marginBottom="0px";U.runtimeStyle.marginBottom=""}},1E3)},0)}}var I,K,L,o,z,v,x=CKEDITOR.env.isCustomDomain(),A=function(C){K&&K.remove();var F="document.open();"+(x?'document.domain="'+document.domain+'";':"")+"document.close();";F=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(F)+"}())":"";K=CKEDITOR.dom.element.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" title="'+
w+'" src="'+F+'" tabIndex="'+(CKEDITOR.env.webkit?-1:n.tabIndex)+'" allowTransparency="true"></iframe>');if(document.location.protocol=="chrome:")CKEDITOR.event.useCapture=true;K.on("load",function(S){z=1;S.removeListener();S=K.getFrameDocument();S.write(C);CKEDITOR.env.air&&G(S.getWindow().$)});if(document.location.protocol=="chrome:")CKEDITOR.event.useCapture=false;var J=n.element;F=CKEDITOR.env.gecko&&!J.isVisible();var M={};if(F){J.show();M={position:J.getStyle("position"),top:J.getStyle("top")};
J.setStyles({position:"absolute",top:"-3000px"})}I.append(K);F&&setTimeout(function(){J.hide();J.setStyles(M)},1E3)};y=CKEDITOR.tools.addFunction(G);var E='<script id="cke_actscrpt" type="text/javascript" data-cke-temp="1">'+(x?'document.domain="'+document.domain+'";':"")+"window.parent.CKEDITOR.tools.callFunction( "+y+", window );<\/script>";n.addMode("wysiwyg",{load:function(C,F,J){I=C;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&C.setStyle("position","relative");v=n.mayBeDirty=true;J?this.loadSnapshotData(F):
this.loadData(F)},loadData:function(C){L=true;var F=n.config,J=F.fullPage,M=F.docType,S='<style type="text/css" data-cke-temp="1">'+n._.styles.join("\n")+"</style>";!J&&(S=CKEDITOR.tools.buildStyleHtml(n.config.contentsCss)+S);var T=F.baseHref?'<base href="'+F.baseHref+'" data-cke-temp="1" />':"";if(J)C=C.replace(/<!DOCTYPE[^>]*>/i,function(O){n.docType=M=O;return""});if(n.dataProcessor)C=n.dataProcessor.toHtml(C,q);if(J){/<body[\s|>]/.test(C)||(C="<body>"+C);/<html[\s|>]/.test(C)||(C="<html>"+C+
"</html>");if(/<head[\s|>]/.test(C))/<title[\s|>]/.test(C)||(C=C.replace(/<head[^>]*>/,"$&<title></title>"));else C=C.replace(/<html[^>]*>/,"$&<head><title></title></head>");T&&(C=C.replace(/<head>/,"$&"+T));C=C.replace(/<\/head\s*>/,S+"$&");C=M+C}else C=F.docType+'<html dir="'+F.contentsLangDirection+'" lang="'+(F.contentsLanguage||n.langCode)+'"><head><title>'+w+"</title>"+T+S+"</head><body"+(F.bodyId?' id="'+F.bodyId+'"':"")+(F.bodyClass?' class="'+F.bodyClass+'"':"")+">"+C+"</html>";C+=E;this.onDispose();
A(C)},getData:function(){var C=n.config,F=C.fullPage,J=F&&n.docType,M=K.getFrameDocument();F=F?M.getDocumentElement().getOuterHtml():M.getBody().getHtml();if(n.dataProcessor)F=n.dataProcessor.toDataFormat(F,q);if(C.ignoreEmptyParagraph)F=F.replace(m,function(S,T){return T});if(J)F=J+"\n"+F;return F},getSnapshotData:function(){return K.getFrameDocument().getBody().getHtml()},loadSnapshotData:function(C){K.getFrameDocument().getBody().setHtml(C)},onDispose:function(){if(n.document){n.document.getDocumentElement().clearCustomData();
n.document.getBody().clearCustomData();n.window.clearCustomData();n.document.clearCustomData();K.clearCustomData();K.remove()}},unload:function(){this.onDispose();n.window=n.document=K=I=o=null;n.fire("contentDomUnload")},focus:function(){var C=n.window;if(L)o=true;else if(CKEDITOR.env.opera&&n.document){var F=n.window.$.frameElement;F.blur();F.focus();n.document.getBody().focus();n.selectionChange()}else if(!CKEDITOR.env.opera&&C){CKEDITOR.env.air?setTimeout(function(){C.focus()},0):C.focus();n.selectionChange()}}});
n.on("insertHtml",b(c),null,null,20);n.on("insertElement",b(h),null,null,20);n.on("insertText",b(e),null,null,20);n.on("selectionChange",k,null,null,1)});n.on("contentDom",function(){n.document.getElementsByTag("title").getItem(0).data("cke-title",n.document.$.title);n.document.$.title=w});if(CKEDITOR.document.$.documentMode>=8){n.addCss("html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}");var H=[],D;for(D in CKEDITOR.dtd.$removeEmpty)H.push("html.CSS1Compat "+D+"[contenteditable=false]");
n.addCss(H.join(",")+"{ display:inline-block;}")}else CKEDITOR.env.gecko&&n.addCss("html { height: 100% !important; }");if(CKEDITOR.env.ie||CKEDITOR.env.opera){var B;n.on("uiReady",function(){B=n.container.append(CKEDITOR.dom.element.createFromHtml('<span tabindex="-1" style="position:absolute;" role="presentation"></span>'));B.on("focus",function(){n.focus()});n.focusGrabber=B});n.on("destroy",function(){CKEDITOR.tools.removeFunction(y);B.clearCustomData();delete n.focusGrabber})}n.on("insertElement",
function(G){G=G.data;if(G.type==CKEDITOR.NODE_ELEMENT&&(G.is("input")||G.is("textarea"))){G.isReadOnly()||G.data("cke-editable",G.hasAttribute("contenteditable")?"true":"1");G.setAttribute("contentEditable",false)}})}});CKEDITOR.env.gecko&&function(){var n=document.body;if(n){var s=n.getAttribute("onpageshow");n.setAttribute("onpageshow",(s?s+";":"")+'event.persisted && (function(){var allInstances = CKEDITOR.instances, editor, doc;for ( var i in allInstances ){\teditor = allInstances[ i ];\tdoc = editor.document;\tif ( doc )\t{\t\tdoc.$.designMode = "off";\t\tdoc.$.designMode = "on";\t}}})();')}else window.addEventListener("load",
arguments.callee,false)}()})();CKEDITOR.config.disableObjectResizing=false;CKEDITOR.config.disableNativeTableHandles=true;CKEDITOR.config.disableNativeSpellChecker=true;CKEDITOR.config.ignoreEmptyParagraph=true;CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;
(function(){function a(){for(var o=this._.tabIdList.length,z=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+o,v=z-1;v>z-o;v--)if(this._.tabs[this._.tabIdList[v%o]][0].$.offsetHeight)return this._.tabIdList[v%o];return null}function b(){for(var o=this._.tabIdList.length,z=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),v=z+1;v<z+o;v++)if(this._.tabs[this._.tabIdList[v%o]][0].$.offsetHeight)return this._.tabIdList[v%o];return null}function c(o,z){for(var v=o.$.getElementsByTagName("input"),
x=0,A=v.length;x<A;x++){var E=new CKEDITOR.dom.element(v[x]);if(E.getAttribute("type").toLowerCase()=="text")if(z){E.setAttribute("value",E.getCustomData("fake_value")||"");E.removeCustomData("fake_value")}else{E.setCustomData("fake_value",E.getAttribute("value"));E.setAttribute("value","")}}}function e(o,z,v){this.element=z;this.focusIndex=v;this.tabIndex=0;this.isFocusable=function(){return!z.getAttribute("disabled")&&z.isVisible()};this.focus=function(){o._.currentFocusIndex=this.focusIndex;this.element.focus()};
z.on("keydown",function(x){x.data.getKeystroke()in{32:1,13:1}&&this.fire("click")});z.on("focus",function(){this.fire("mouseover")});z.on("blur",function(){this.fire("mouseout")})}function h(o,z){this._={dialog:o};CKEDITOR.tools.extend(this,z)}function j(o){function z(J){var M=o.getSize(),S=CKEDITOR.document.getWindow().getViewPaneSize(),T=J.data.$.screenX,O=J.data.$.screenY,N=T-x.x,P=O-x.y;x={x:T,y:O};A.x+=N;A.y+=P;o.move(A.x+F[3]<C?-F[3]:A.x-F[1]>S.width-M.width-C?S.width-M.width+(E.lang.dir=="rtl"?
0:F[1]):A.x,A.y+F[0]<C?-F[0]:A.y-F[2]>S.height-M.height-C?S.height-M.height+F[2]:A.y,1);J.data.preventDefault()}function v(){CKEDITOR.document.removeListener("mousemove",z);CKEDITOR.document.removeListener("mouseup",v);if(CKEDITOR.env.ie6Compat){var J=q.getChild(0).getFrameDocument();J.removeListener("mousemove",z);J.removeListener("mouseup",v)}}var x=null,A=null;o.getElement().getFirst();var E=o.getParentEditor(),C=E.config.dialog_magnetDistance,F=E.skin.margins||[0,0,0,0];if(typeof C=="undefined")C=
20;o.parts.title.on("mousedown",function(J){x={x:J.data.$.screenX,y:J.data.$.screenY};CKEDITOR.document.on("mousemove",z);CKEDITOR.document.on("mouseup",v);A=o.getPosition();if(CKEDITOR.env.ie6Compat){var M=q.getChild(0).getFrameDocument();M.on("mousemove",z);M.on("mouseup",v)}J.data.preventDefault()},o)}function g(o){function z(N){var P=E.lang.dir=="rtl",U=(N.data.$.screenX-M.x)*(P?-1:1),Q=S.width,R=S.height,V=Q+U*(o._.moved?1:2),X=R+(N.data.$.screenY-M.y)*(o._.moved?1:2),W=o._.element.getFirst(),
Z=P&&W.getComputedStyle("right"),Y=o.getPosition();if(Z)Z=Z=="auto"?J.width-(Y.x||0)-W.getSize("width"):parseInt(Z,10);if(Y.y+X>J.height)X=J.height-Y.y;if((P?Z:Y.x)+V>J.width)V=J.width-(P?Z:Y.x);if((A==CKEDITOR.DIALOG_RESIZE_WIDTH||A==CKEDITOR.DIALOG_RESIZE_BOTH)&&!(P&&U>0&&!Y.x))Q=Math.max(x.minWidth||0,V-C);if(A==CKEDITOR.DIALOG_RESIZE_HEIGHT||A==CKEDITOR.DIALOG_RESIZE_BOTH)R=Math.max(x.minHeight||0,X-F);o.resize(Q,R);P=Z;if(o._.moved&&E.lang.dir=="rtl"){U=o._.element.getFirst();U.setStyle("right",
P+"px");U.removeStyle("left")}else o._.moved||o.layout();N.data.preventDefault()}function v(){CKEDITOR.document.removeListener("mouseup",v);CKEDITOR.document.removeListener("mousemove",z);if(T){T.remove();T=null}if(CKEDITOR.env.ie6Compat){var N=q.getChild(0).getFrameDocument();N.removeListener("mouseup",v);N.removeListener("mousemove",z)}if(E.lang.dir=="rtl"){N=o._.element.getFirst();var P=N.getComputedStyle("left");P=P=="auto"?J.width-parseInt(N.getStyle("right"),10)-o.getSize().width:parseInt(P,
10);N.removeStyle("right");o._.position.x+=1;o.move(P,o._.position.y)}}var x=o.definition,A=x.resizable;if(A!=CKEDITOR.DIALOG_RESIZE_NONE){var E=o.getParentEditor(),C,F,J,M,S,T,O=CKEDITOR.tools.addFunction(function(N){S=o.getSize();var P=o.parts.contents;if(P.$.getElementsByTagName("iframe").length){T=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>');P.append(T)}F=S.height-o.parts.contents.getSize("height",!(CKEDITOR.env.gecko||
CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks));C=S.width-o.parts.contents.getSize("width",1);M={x:N.screenX,y:N.screenY};J=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",z);CKEDITOR.document.on("mouseup",v);if(CKEDITOR.env.ie6Compat){P=q.getChild(0).getFrameDocument();P.on("mousemove",z);P.on("mouseup",v)}N.preventDefault&&N.preventDefault()});o.on("load",function(){var N="";if(A==CKEDITOR.DIALOG_RESIZE_WIDTH)N=" cke_resizer_horizontal";else if(A==CKEDITOR.DIALOG_RESIZE_HEIGHT)N=
" cke_resizer_vertical";N=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+N+'" title="'+CKEDITOR.tools.htmlEncode(E.lang.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+O+', event )"></div>');o.parts.footer.append(N,1)});E.on("destroy",function(){CKEDITOR.tools.removeFunction(O)})}}function f(o){var z=CKEDITOR.document.getWindow(),v=o.config,x=v.dialog_backgroundCoverColor||"white";o=v.dialog_backgroundCoverOpacity;var A=v.baseFloatZIndex;v=CKEDITOR.tools.genKey(x,o,A);var E=s[v];
if(E)E.show();else{A=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",A,"; top: 0px; left: 0px; ",!CKEDITOR.env.ie6Compat?"background-color: "+x:"",'" class="cke_dialog_background_cover blackout">'];if(CKEDITOR.env.ie6Compat){var C=CKEDITOR.env.isCustomDomain();x="<html><body style=\\'background-color:"+x+";\\'></body></html>";A.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');A.push("void((function(){document.open();"+
(C?"document.domain='"+document.domain+"';":"")+"document.write( '"+x+"' );document.close();})())");A.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}A.push("</div>");E=CKEDITOR.dom.element.createFromHtml(A.join(""));E.setOpacity(o!=undefined?o:0.5);E.appendTo(CKEDITOR.document.getBody());s[v]=E}q=E;o=function(){var M=z.getViewPaneSize();E.setStyles({width:M.width+"px",height:M.height+"px"})};var F=function(){var M=
z.getScrollPosition(),S=CKEDITOR.dialog._.currentTop;E.setStyles({left:M.x+"px",top:M.y+"px"});if(S){do{M=S.getPosition();S.move(M.x,M.y)}while(S=S._.parentDialog)}};n=o;z.on("resize",o);o();CKEDITOR.env.mac&&CKEDITOR.env.webkit||E.focus();if(CKEDITOR.env.ie6Compat){var J=function(){F();arguments.callee.prevScrollHandler.apply(this,arguments)};z.$.setTimeout(function(){J.prevScrollHandler=window.onscroll||function(){};window.onscroll=J},0);F()}}function d(){if(q){var o=CKEDITOR.document.getWindow();
q.hide();o.removeListener("resize",n);CKEDITOR.env.ie6Compat&&o.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0);n=null}}var k=CKEDITOR.tools.cssLength;CKEDITOR.dialog=function(o,z){function v(){var Q=O._.focusList;Q.sort(function(X,W){return X.tabIndex!=W.tabIndex?W.tabIndex-X.tabIndex:X.focusIndex-W.focusIndex});for(var R=Q.length,V=0;V<R;V++)Q[V].focusIndex=V}function x(Q){var R=O._.focusList;Q=Q?1:-1;if(!(R.length<1)){var V=O._.currentFocusIndex;
try{R[V].getInputElement().$.blur()}catch(X){}for(var W=V=(V+Q+R.length)%R.length;!R[W].isFocusable();){W=(W+Q+R.length)%R.length;if(W==V)break}R[W].focus();R[W].type=="text"&&R[W].select()}}function A(Q){if(O==CKEDITOR.dialog._.currentTop){var R=Q.data.getKeystroke(),V=o.lang.dir=="rtl";P=0;if(R==9||R==CKEDITOR.SHIFT+9){R=R==CKEDITOR.SHIFT+9;if(O._.tabBarMode){R=R?a.call(O):b.call(O);O.selectPage(R);O._.tabs[R][0].focus()}else x(!R);P=1}else if(R==CKEDITOR.ALT+121&&!O._.tabBarMode&&O.getPageCount()>
1){O._.tabBarMode=true;O._.tabs[O._.currentTabId][0].focus();P=1}else if((R==37||R==39)&&O._.tabBarMode){R=R==(V?39:37)?a.call(O):b.call(O);O.selectPage(R);O._.tabs[R][0].focus();P=1}else if((R==13||R==32)&&O._.tabBarMode){this.selectPage(this._.currentTabId);this._.tabBarMode=false;this._.currentFocusIndex=-1;x(true);P=1}if(P){Q.stop();Q.data.preventDefault()}}}function E(Q){P&&Q.data.preventDefault()}var C=CKEDITOR.dialog._.dialogDefinitions[z],F=CKEDITOR.tools.clone(l),J=o.config.dialog_buttonsOrder||
"OS",M=o.lang.dir;if(J=="OS"&&CKEDITOR.env.mac||J=="rtl"&&M=="ltr"||J=="ltr"&&M=="rtl")F.buttons.reverse();C=CKEDITOR.tools.extend(C(o),F);C=CKEDITOR.tools.clone(C);C=new u(this,C);F=o.theme.buildDialog(o);this._={editor:o,element:F.element,name:z,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:false,focusList:[],currentFocusIndex:0,hasFocus:false};this.parts=
F.parts;CKEDITOR.tools.setTimeout(function(){o.fire("ariaWidget",this.parts.contents)},0,this);this.parts.dialog.setStyles({position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"});CKEDITOR.event.call(this);this.definition=C=CKEDITOR.fire("dialogDefinition",{name:z,definition:C},o).definition;J={};if(!("removeDialogTabs"in o._)&&o.config.removeDialogTabs){M=o.config.removeDialogTabs.split(";");for(F=0;F<M.length;F++){var S=M[F].split(":");if(S.length==2){var T=S[0];J[T]||
(J[T]=[]);J[T].push(S[1])}}o._.removeDialogTabs=J}if(o._.removeDialogTabs&&(J=o._.removeDialogTabs[z]))for(F=0;F<J.length;F++)C.removeContents(J[F]);if(C.onLoad)this.on("load",C.onLoad);if(C.onShow)this.on("show",C.onShow);if(C.onHide)this.on("hide",C.onHide);if(C.onOk)this.on("ok",function(Q){o.fire("saveSnapshot");setTimeout(function(){o.fire("saveSnapshot")},0);if(C.onOk.call(this,Q)===false)Q.data.hide=false});if(C.onCancel)this.on("cancel",function(Q){if(C.onCancel.call(this,Q)===false)Q.data.hide=
false});var O=this,N=function(Q){var R=O._.contents,V=false,X;for(X in R)for(var W in R[X])if(V=Q.call(this,R[X][W]))return};this.on("ok",function(Q){N(function(R){if(R.validate){var V=R.validate(this);if(typeof V=="string"){var X=this.getDialog()._.editor;RTE.tools.alert(X.lang.errorPopupTitle,V);V=false}if(V===false){R.getDialog().fire("notvalid",{item:R});R.select?R.select():R.focus();Q.data.hide=false;Q.stop();return true}}})},this,null,0);this.on("cancel",function(Q){if(this._.name=="link")return false;
N(function(R){if(R.isChanged()){if(!confirm(o.lang.common.confirmCancel))Q.data.hide=false;return true}})},this,null,0);this.parts.close.on("click",function(Q){this.fire("close",{close:true});this.fire("cancel",{hide:true}).hide!==false&&this.hide();Q.data.preventDefault()},this);this.changeFocus=x;var P,U=this._.element;this.on("show",function(){U.on("keydown",A,this,null,0);if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)U.on("keypress",E,this)});this.on("hide",function(){U.removeListener("keydown",
A);if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)U.removeListener("keypress",E)});this.on("iframeAdded",function(Q){(new CKEDITOR.dom.document(Q.data.iframe.$.contentWindow.document)).on("keydown",A,this,null,0)});this.on("show",function(){v();if(o.config.dialog_startupFocusTab&&O._.pageCount>1){O._.tabBarMode=true;O._.tabs[O._.currentTabId][0].focus()}else if(!this._.hasFocus){this._.currentFocusIndex=-1;if(C.onFocus){var Q=C.onFocus.call(this);Q&&Q.focus()}else x(true);if(this._.editor.mode==
"wysiwyg"&&CKEDITOR.env.ie)if(Q=o.document.$.selection.createRange())if(Q.parentElement&&Q.parentElement().ownerDocument==o.document.$||Q.item&&Q.item(0).ownerDocument==o.document.$){Q=document.body.createTextRange();Q.moveToElementText(this.getElement().getFirst().$);Q.collapse(true);Q.select()}}},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on("load",function(){var Q=this.getElement(),R=Q.getFirst();R.remove();R.appendTo(Q)},this);j(this);g(this);(new CKEDITOR.dom.text(C.title,CKEDITOR.document)).appendTo(this.parts.title);
for(F=0;F<C.contents.length;F++)(J=C.contents[F])&&this.addPage(J);this.parts.tabs.on("click",function(Q){var R=Q.data.getTarget();if(R.hasClass("cke_dialog_tab")){R=R.$.id;this.selectPage(R.substring(4,R.lastIndexOf("_")));if(this._.tabBarMode){this._.tabBarMode=false;this._.currentFocusIndex=-1;x(true)}Q.data.preventDefault()}},this);F=[];J=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:C.buttons},F).getChild();this.parts.footer.setHtml(F.join(""));
for(F=0;F<J.length;F++)this._.buttons[J[F].id]=J[F]};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(o,z){if(!(this._.contentSize&&this._.contentSize.width==o&&this._.contentSize.height==z)){CKEDITOR.dialog.fire("resize",{dialog:this,skin:this._.editor.skinName,width:o,height:z},this._.editor);this._.contentSize={width:o,height:z}}}}(),getSize:function(){var o=this._.element.getFirst();return{width:o.$.offsetWidth||0,height:o.$.offsetHeight||
0}},move:function(){var o;return function(z,v,x){var A=this._.element.getFirst();if(o===undefined)o=A.getComputedStyle("position")=="fixed";if(!(o&&this._.position&&this._.position.x==z&&this._.position.y==v)){this._.position={x:z,y:v};if(!o){var E=CKEDITOR.document.getWindow().getScrollPosition();z+=E.x;v+=E.y}A.setStyles({left:(z>0?z:0)+"px",top:(v>0?v:0)+"px"});x&&(this._.moved=1)}}}(),getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var o=this._.element,
z=this.definition;o.getParent()&&o.getParent().equals(CKEDITOR.document.getBody())?o.setStyle("display","block"):o.appendTo(CKEDITOR.document.getBody());if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900){var v=this.parts.dialog;v.setStyle("position","absolute");setTimeout(function(){v.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||z.minWidth,this._.contentSize&&this._.contentSize.height||z.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);
if(CKEDITOR.dialog._.currentZIndex===null)CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex;this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);if(CKEDITOR.dialog._.currentTop===null){CKEDITOR.dialog._.currentTop=this;this._.parentDialog=null;f(this._.editor);o.on("keydown",y);o.on(CKEDITOR.env.opera?"keypress":"keyup",H);for(var x in{keyup:1,keydown:1,keypress:1})o.on(x,L)}else{this._.parentDialog=CKEDITOR.dialog._.currentTop;this._.parentDialog.getElement().getFirst().$.style.zIndex-=
Math.floor(this._.editor.config.baseFloatZIndex/2);CKEDITOR.dialog._.currentTop=this}D(this,this,"",null,function(){this.fireOnce("close",{esc:true});this.getButton("cancel")&&this.getButton("cancel").click()});this._.hasFocus=false;CKEDITOR.tools.setTimeout(function(){this.layout();this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this.foreach(function(A){A.setInitValue&&A.setInitValue()})},
100,this)},layout:function(){var o=CKEDITOR.document.getWindow().getViewPaneSize(),z=this.getSize();this.move(this._.moved?this._.position.x:(o.width-z.width)/2,this._.moved?this._.position.y:(o.height-z.height)/2)},foreach:function(o){for(var z in this._.contents)for(var v in this._.contents[z])o(this._.contents[z][v]);return this},reset:function(){var o=function(z){z.reset&&z.reset(1)};return function(){this.foreach(o);return this}}(),setupContent:function(){var o=arguments;this.foreach(function(z){z.setup&&
z.setup.apply(z,o)})},commitContent:function(){var o=arguments;this.foreach(function(z){z.commit&&z.commit.apply(z,o)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);var o=this._.element;o.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(B(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var z=this._.parentDialog.getElement().getFirst();z.setStyle("z-index",
parseInt(z.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else d();if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;o.removeListener("keydown",y);o.removeListener(CKEDITOR.env.opera?"keypress":"keyup",H);for(var v in{keyup:1,keydown:1,keypress:1})o.removeListener(v,L);o=this._.editor;o.focus();if(o.mode=="wysiwyg"&&CKEDITOR.env.ie)(o=o.getSelection())&&o.unlock(true)}delete this._.parentDialog;
this.foreach(function(x){x.resetInitValue&&x.resetInitValue()})}},addPage:function(o){var z=[],v=o.label?' title="'+CKEDITOR.tools.htmlEncode(o.label)+'"':"",x=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:o.elements,expand:!!o.expand,padding:o.padding,style:o.style||"width: 100%;"},z);z=CKEDITOR.dom.element.createFromHtml(z.join(""));z.setAttribute("role","tabpanel");var A=CKEDITOR.env,E="cke_"+o.id+"_"+CKEDITOR.tools.getNextNumber();
v=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',this._.pageCount>0?" cke_last":"cke_first",v,o.hidden?' style="display:none"':"",' id="',E,'"',A.gecko&&A.version>=10900&&!A.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',o.label,'<img class="chevron" src="'+window.wgBlankImgUrl+'" />',"</a>"].join(""));z.setAttribute("aria-labelledby",E);this._.tabs[o.id]=[v,z];this._.tabIdList.push(o.id);!o.hidden&&this._.pageCount++;this._.lastTab=v;this.updateStyle();
E=this._.contents[o.id]={};for(A=x.getChild();x=A.shift();){E[x.id]=x;typeof x.getChild=="function"&&A.push.apply(A,x.getChild())}z.setAttribute("name",o.id);z.appendTo(this.parts.contents);v.unselectable();this.parts.tabs.append(v);if(o.accessKey){D(this,this,"CTRL+"+o.accessKey,I,G);this._.accessKeyMap["CTRL+"+o.accessKey]=o.id}},selectPage:function(o){if(this._.currentTabId!=o)if(this.fire("selectPage",{page:o,currentPage:this._.currentTabId})!==true){for(var z in this._.tabs){var v=this._.tabs[z][0],
x=this._.tabs[z][1];if(z!=o){v.removeClass("cke_dialog_tab_selected");x.hide()}x.setAttribute("aria-hidden",z!=o)}var A=this._.tabs[o];A[0].addClass("cke_dialog_tab_selected");if(CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat){c(A[1]);A[1].show();setTimeout(function(){c(A[1],1)},0)}else A[1].show();this._.currentTabId=o;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,o)}},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(o){var z=
this._.tabs[o]&&this._.tabs[o][0];if(!(!z||this._.pageCount==1||!z.isVisible())){o==this._.currentTabId&&this.selectPage(a.call(this));z.hide();this._.pageCount--;this.updateStyle()}},showPage:function(o){if(o=this._.tabs[o]&&this._.tabs[o][0]){o.show();this._.pageCount++;this.updateStyle()}},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(o,z){var v=this._.contents[o];return v&&v[z]},getValueOf:function(o,z){return this.getContentElement(o,
z).getValue()},setValueOf:function(o,z,v){return this.getContentElement(o,z).setValue(v)},getButton:function(o){return this._.buttons[o]},click:function(o){return this._.buttons[o].click()},disableButton:function(o){return this._.buttons[o].disable()},enableButton:function(o){return this._.buttons[o].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},
addFocusable:function(o,z){if(typeof z=="undefined"){z=this._.focusList.length;this._.focusList.push(new e(this,o,z))}else{this._.focusList.splice(z,0,new e(this,o,z));for(var v=z+1;v<this._.focusList.length;v++)this._.focusList[v].focusIndex++}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(o,z){if(!this._.dialogDefinitions[o]||typeof z=="function")this._.dialogDefinitions[o]=z},exists:function(o){return!!this._.dialogDefinitions[o]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},
okButton:function(){var o=function(z,v){v=v||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:z.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(x){x=x.data.dialog;x.fire("ok",{hide:true}).hide!==false&&x.hide()}},v,true)};o.type="button";o.override=function(z){return CKEDITOR.tools.extend(function(v){return o(v,z)},{type:"button"},true)};return o}(),cancelButton:function(){var o=function(z,v){v=v||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:z.lang.common.cancel,
"class":"cke_dialog_ui_button_cancel",onClick:function(x){x=x.data.dialog;x.fireOnce("cancelClicked");x.fire("cancel",{hide:true}).hide!==false&&x.hide()}},v,true)};o.type="button";o.override=function(z){return CKEDITOR.tools.extend(function(v){return o(v,z)},{type:"button"},true)};return o}(),addUIElement:function(o,z){this._.uiElementBuilders[o]=z}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype,
true);var l={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton]},m=function(o,z,v){for(var x=0,A;A=o[x];x++){if(A.id==z)return A;if(v&&A[v])if(A=m(A[v],z,v))return A}return null},p=function(o,z,v,x,A){if(v){for(var E=0,C;C=o[E];E++){if(C.id==v){o.splice(E,0,z);return z}if(x&&C[x])if(C=p(C[x],z,v,x,true))return C}if(A)return null}o.push(z);return z},r=function(o,z,v){for(var x=0,A;A=o[x];x++){if(A.id==z)return o.splice(x,1);if(v&&A[v])if(A=r(A[v],z,
v))return A}return null},u=function(o,z){this.dialog=o;for(var v=z.contents,x=0,A;A=v[x];x++)v[x]=A&&new h(o,A);CKEDITOR.tools.extend(this,z)};u.prototype={getContents:function(o){return m(this.contents,o)},getButton:function(o){return m(this.buttons,o)},addContents:function(o,z){return p(this.contents,o,z)},addButton:function(o,z){return p(this.buttons,o,z)},removeContents:function(o){r(this.contents,o)},removeButton:function(o){r(this.buttons,o)}};h.prototype={get:function(o){return m(this.elements,
o,"children")},add:function(o,z){return p(this.elements,o,z,"children")},remove:function(o){r(this.elements,o,"children")}};var n,s={},q,w={},y=function(o){var z=o.data.$.ctrlKey||o.data.$.metaKey,v=o.data.$.altKey,x=o.data.$.shiftKey,A=String.fromCharCode(o.data.$.keyCode);if((z=w[(z?"CTRL+":"")+(v?"ALT+":"")+(x?"SHIFT+":"")+A])&&z.length){z=z[z.length-1];z.keydown&&z.keydown.call(z.uiElement,z.dialog,z.key);o.data.preventDefault()}},H=function(o){var z=o.data.$.ctrlKey||o.data.$.metaKey,v=o.data.$.altKey,
x=o.data.$.shiftKey,A=String.fromCharCode(o.data.$.keyCode);if((z=w[(z?"CTRL+":"")+(v?"ALT+":"")+(x?"SHIFT+":"")+A])&&z.length){z=z[z.length-1];if(z.keyup){z.keyup.call(z.uiElement,z.dialog,z.key);o.data.preventDefault()}}},D=function(o,z,v,x,A){(w[v]||(w[v]=[])).push({uiElement:o,dialog:z,key:v,keyup:A||o.accessKeyUp,keydown:x||o.accessKeyDown})},B=function(o){for(var z in w){for(var v=w[z],x=v.length-1;x>=0;x--)if(v[x].dialog==o||v[x].uiElement==o)v.splice(x,1);v.length===0&&delete w[z]}},G=function(o,
z){o._.accessKeyMap[z]&&o.selectPage(o._.accessKeyMap[z])},I=function(){},K={27:1,13:1},L=function(o){o.data.getKeystroke()in K&&o.data.stopPropagation()};(function(){CKEDITOR.ui.dialog={uiElement:function(o,z,v,x,A,E,C){if(!(arguments.length<4)){var F=(x.call?x(z):x)||"div",J=["<",F," "],M=(A&&A.call?A(z):A)||{},S=(E&&E.call?E(z):E)||{},T=(C&&C.call?C.call(this,o,z):C)||"",O=this.domId=S.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=z.id;S.id=O;var N={};if(z.type)N["cke_dialog_ui_"+z.type]=
1;if(z.className)N[z.className]=1;var P=S["class"]&&S["class"].split?S["class"].split(" "):[];for(O=0;O<P.length;O++)if(P[O])N[P[O]]=1;P=[];for(O in N)P.push(O);S["class"]=P.join(" ");if(z.title)S.title=z.title;N=(z.style||"").split(";");for(O in M)N.push(O+":"+M[O]);z.hidden&&N.push("display:none");for(O=N.length-1;O>=0;O--)N[O]===""&&N.splice(O,1);if(N.length>0)S.style=(S.style?S.style+"; ":"")+N.join("; ");for(O in S)J.push(O+'="'+CKEDITOR.tools.htmlEncode(S[O])+'" ');J.push(">",T,"</",F,">");
v.push(J.join(""));(this._||(this._={})).dialog=o;if(typeof z.isChanged=="boolean")this.isChanged=function(){return z.isChanged};if(typeof z.isChanged=="function")this.isChanged=z.isChanged;CKEDITOR.event.implementOn(this);this.registerEvents(z);this.accessKeyUp&&this.accessKeyDown&&z.accessKey&&D(this,o,"CTRL+"+z.accessKey);var U=this;o.on("load",function(){if(U.getInputElement())U.getInputElement().on("focus",function(){o._.tabBarMode=false;o._.hasFocus=true;U.fire("focus")},U)});if(this.keyboardFocusable){this.tabIndex=
z.tabIndex||0;this.focusIndex=o._.focusList.push(this)-1;this.on("focus",function(){o._.currentFocusIndex=U.focusIndex})}CKEDITOR.tools.extend(this,z)}},hbox:function(o,z,v,x,A){if(!(arguments.length<4)){this._||(this._={});this._.children=z;var E=A&&A.widths||null,C=A&&A.height||null,F,J={role:"presentation"};A&&A.align&&(J.align=A.align);CKEDITOR.ui.dialog.uiElement.call(this,o,A||{type:"hbox"},x,"table",{},J,function(){var M=['<tbody><tr class="cke_dialog_ui_hbox">'];for(F=0;F<v.length;F++){var S=
"cke_dialog_ui_hbox_child",T=[];if(F===0)S="cke_dialog_ui_hbox_first";if(F==v.length-1)S="cke_dialog_ui_hbox_last";M.push('<td class="',S,'" role="presentation" ');if(E)E[F]&&T.push("width:"+k(E[F]));else T.push("width:"+Math.floor(100/v.length)+"%");C&&T.push("height:"+k(C));A&&A.padding!=undefined&&T.push("padding:"+k(A.padding));T.length>0&&M.push('style="'+T.join("; ")+'" ');M.push(">",v[F],"</td>")}M.push("</tr></tbody>");return M.join("")})}},vbox:function(o,z,v,x,A){if(!(arguments.length<3)){this._||
(this._={});this._.children=z;var E=A&&A.width||null,C=A&&A.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,o,A||{type:"vbox"},x,"div",null,{role:"presentation"},function(){var F=['<table role="presentation" cellspacing="0" border="0" '];F.push('style="');A&&A.expand&&F.push("height:100%;");F.push("width:"+k(E||"100%"),";");F.push('"');F.push('align="',CKEDITOR.tools.htmlEncode(A&&A.align||(o.getParentEditor().lang.dir=="ltr"?"left":"right")),'" ');F.push("><tbody>");for(var J=0;J<v.length;J++){var M=
[];F.push('<tr><td role="presentation" ');if(E)M.push("width:"+k(E||"100%"));if(C)M.push("height:"+k(C[J]));else A&&A.expand&&M.push("height:"+Math.floor(100/v.length)+"%");A&&A.padding!=undefined&&M.push("padding:"+k(A.padding));M.length>0&&F.push('style="',M.join("; "),'" ');F.push(' class="cke_dialog_ui_vbox_child">',v[J],"</td></tr>")}F.push("</tbody></table>");return F.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},
getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(o,z){this.getInputElement().setValue(o);!z&&this.fire("change",{value:o});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return false},selectParentTab:function(){for(var o=this.getInputElement();(o=o.getParent())&&o.$.className.search("cke_dialog_page_contents")==-1;);if(!o)return this;o=o.getAttribute("name");this._.dialog._.currentTabId!=
o&&this._.dialog.selectPage(o);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(o){var z=/^on([A-Z]\w+)/,v,x=function(E,C,F,J){C.on("load",function(){E.getInputElement().on(F,J,E)})},A;for(A in o)if(v=A.match(z))this.eventProcessors[A]?this.eventProcessors[A].call(this,this._.dialog,o[A]):x(this,this._.dialog,v[1].toLowerCase(),o[A]);return this},eventProcessors:{onLoad:function(o,z){o.on("load",z,this)},onShow:function(o,z){o.on("show",
z,this)},onHide:function(o,z){o.on("hide",z,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var o=this.getInputElement();o.setAttribute("disabled","true");o.addClass("cke_disabled")},enable:function(){var o=this.getInputElement();o.removeAttribute("disabled");o.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){if(!this.isEnabled()||
!this.isVisible())return false;return true}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(o){if(arguments.length<1)return this._.children.concat();o.splice||(o=[o]);return o.length<2?this._.children[o[0]]:this._.children[o[0]]&&this._.children[o[0]].getChild?this._.children[o[0]].getChild(o.slice(1,o.length)):null}},true);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var o={build:function(z,v,x){for(var A=v.children,
E,C=[],F=[],J=0;J<A.length&&(E=A[J]);J++){var M=[];C.push(M);F.push(CKEDITOR.dialog._.uiElementBuilders[E.type].build(z,E,M))}return new CKEDITOR.ui.dialog[v.type](z,F,C,x,v)}};CKEDITOR.dialog.addUIElement("hbox",o);CKEDITOR.dialog.addUIElement("vbox",o)})();CKEDITOR.dialogCommand=function(o){this.dialogName=o};CKEDITOR.dialogCommand.prototype={exec:function(o){o.openDialog(this.dialogName)},canUndo:false,editorFocus:CKEDITOR.env.ie||CKEDITOR.env.webkit};(function(){var o=/^([a]|[^a])+$/,z=/^\d*$/,
v=/^\d*(?:\.\d+)?$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){return function(){var x=this&&this.getValue?this.getValue():arguments[0],A=undefined,E=CKEDITOR.VALIDATE_AND,C=[],F;for(F=0;F<arguments.length;F++)if(typeof arguments[F]=="function")C.push(arguments[F]);else break;if(F<arguments.length&&typeof arguments[F]=="string"){A=arguments[F];F++}if(F<arguments.length&&typeof arguments[F]=="number")E=arguments[F];var J=E==CKEDITOR.VALIDATE_AND?true:
false;for(F=0;F<C.length;F++)J=E==CKEDITOR.VALIDATE_AND?J&&C[F](x):J||C[F](x);if(!J){if(A!==undefined){x=this.getDialog()._.editor;RTE.tools.alert(x.lang.errorPopupTitle,A)}if(this&&(this.select||this.focus))(this.select||this.focus)();return false}return true}},regex:function(x,A){return function(E){E=this&&this.getValue?this.getValue():E;if(!x.test(E)){if(A!==undefined){E=this.getDialog()._.editor;RTE.tools.alert(E.lang.errorPopupTitle,A)}if(this&&(this.select||this.focus))this.select?this.select():
this.focus();return false}return true}},notEmpty:function(x){return this.regex(o,x)},integer:function(x){return this.regex(z,x)},number:function(x){return this.regex(v,x)},equals:function(x,A){return this.functions(function(E){return E==x},A)},notEqual:function(x,A){return this.functions(function(E){return E!=x},A)}};CKEDITOR.on("instanceDestroyed",function(x){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var A;A=CKEDITOR.dialog._.currentTop;)A.hide();for(var E in s)s[E].remove();s={}}x=x.editor._.storedDialogs;
for(var C in x)x[C].destroy()})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(o,z){function v(F){if(!(!E.skin.dialog._isLoaded||C&&typeof F=="undefined")){if(typeof CKEDITOR.dialog._.dialogDefinitions[o]!="function")CKEDITOR.dialog._.dialogDefinitions[o]="failed";E.openDialog(o,z)}}if(this.mode=="wysiwyg"&&CKEDITOR.env.ie){var x=this.getSelection();x&&x.lock()}x=CKEDITOR.dialog._.dialogDefinitions[o];var A=this.skin.dialog;CKEDITOR.dialog._.currentTop===null&&f(this);if(typeof x==
"function"&&A._isLoaded){x=this._.storedDialogs||(this._.storedDialogs={});x=x[o]||(x[o]=new CKEDITOR.dialog(this,o));z&&z.call(x,x);x.show();return x}else if(x=="failed"){d();throw Error('[CKEDITOR.dialog.openDialog] Dialog "'+o+'" failed when loading definition.');}var E=this;if(typeof x=="string"){var C=1;CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(x),v,null,0,1)}CKEDITOR.skins.load(this,"dialog",v);return null}})})();CKEDITOR.plugins.add("dialog",{requires:["dialogui"]});
CKEDITOR.plugins.add("styles",{requires:["selection"],init:function(a){a.on("contentDom",function(){a.document.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling)})}});
CKEDITOR.editor.prototype.attachStyleStateChange=function(a,b){var c=this._.styleStateChangeCallbacks;if(!c){c=this._.styleStateChangeCallbacks=[];this.on("selectionChange",function(e){for(var h=0;h<c.length;h++){var j=c[h],g=j.style.checkActive(e.data.path)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;j.fn.call(this,g)}})}c.push({style:a,fn:b})};CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;
(function(){function a(v){for(var x,A;v=v.getParent();){if(v.getName()=="body")break;if(v.getAttribute("data-nostyle"))x=v;else if(!A){var E=v.getAttribute("contentEditable");if(E=="false")x=v;else if(E=="true")A=1}}return x}function b(v){var x=v.document;if(v.collapsed){x=n(this,x);v.insertNode(x);v.moveToPosition(x,CKEDITOR.POSITION_BEFORE_END)}else{var A=this.element,E=this._.definition,C,F=E.includeReadonly;if(F==undefined)F=x.getCustomData("cke_includeReadonly");var J=CKEDITOR.dtd[A]||(C=true,
CKEDITOR.dtd.span);v.enlarge(CKEDITOR.ENLARGE_ELEMENT,1);v.trim();var M=v.createBookmark(),S=M.startNode,T=M.endNode,O=S,N,P=a(S),U=a(T);if(P)O=P.getNextSourceNode(true);if(U)T=U;if(O.getPosition(T)==CKEDITOR.POSITION_FOLLOWING)O=0;for(;O;){P=false;if(O.equals(T)){O=null;P=true}else{var Q=O.type,R=Q==CKEDITOR.NODE_ELEMENT?O.getName():null;U=R&&O.getAttribute("contentEditable")=="false";var V=R&&O.getAttribute("data-nostyle"),X=U&&O.getAttribute("formateditable")=="true";if(R&&O.data("cke-bookmark")){O=
O.getNextSourceNode(true);continue}if(!R||J[R]&&!V&&(!U||F)&&(O.getPosition(T)|CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED&&(!E.childRule||E.childRule(O))||X)if((X=O.getParent())&&((X.getDtd()||CKEDITOR.dtd.span)[A]||C)&&(!E.parentRule||E.parentRule(X))){if(!N&&(!R||!CKEDITOR.dtd.$removeEmpty[R]||(O.getPosition(T)|CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|
CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED)){N=new CKEDITOR.dom.range(x);N.setStartBefore(O)}if(Q==CKEDITOR.NODE_TEXT||U||Q==CKEDITOR.NODE_ELEMENT&&!O.getChildCount()){Q=O;for(var W;(P=!Q.getNext(L))&&(W=Q.getParent(),J[W.getName()])&&(W.getPosition(S)|CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_FOLLOWING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED&&
(!E.childRule||E.childRule(W));)Q=W;N.setEndAfter(Q)}}else P=true;else P=true;O=O.getNextSourceNode(V||U)}if(P&&N&&!N.collapsed){N.enlargeFormattables();P=n(this,x);U=P.hasAttributes();V=N.getCommonAncestor();Q={styles:{},attrs:{},blockedStyles:{},blockedAttrs:{}};for(var Z,Y,aa;P&&V;){if(V.getName()==A){for(Z in E.attributes)if(!(Q.blockedAttrs[Z]||!(aa=V.getAttribute(Y))))if(P.getAttribute(Z)==aa)Q.attrs[Z]=1;else Q.blockedAttrs[Z]=1;for(Y in E.styles)if(!(Q.blockedStyles[Y]||!(aa=V.getStyle(Y))))if(P.getStyle(Y)==
aa)Q.styles[Y]=1;else Q.blockedStyles[Y]=1}V=V.getParent()}for(Z in Q.attrs)P.removeAttribute(Z);for(Y in Q.styles)P.removeStyle(Y);if(U&&!P.hasAttributes())P=null;if(P){N.extractContents().appendTo(P);p(this,P);N.insertNode(P);P.mergeSiblings();CKEDITOR.env.ie||P.$.normalize()}else{P=new CKEDITOR.dom.element("span");N.extractContents().appendTo(P);N.insertNode(P);p(this,P);P.remove(true)}N=null}}v.moveToBookmark(M);v.shrink(CKEDITOR.SHRINK_TEXT)}}function c(v){v.enlarge(CKEDITOR.ENLARGE_ELEMENT,
1);var x=v.createBookmark(),A=x.startNode;if(v.collapsed){for(var E=new CKEDITOR.dom.elementPath(A.getParent()),C,F=0,J;F<E.elements.length&&(J=E.elements[F]);F++){if(J==E.block||J==E.blockLimit)break;if(this.checkElementRemovable(J)){var M;if(v.collapsed&&(v.checkBoundaryOfElement(J,CKEDITOR.END)||(M=v.checkBoundaryOfElement(J,CKEDITOR.START)))){C=J;C.match=M?"start":"end"}else{J.mergeSiblings();J.getName()==this.element?m(this,J):r(J,w(this)[J.getName()])}}}if(C){J=A;for(F=0;;F++){M=E.elements[F];
if(M.equals(C))break;else if(M.match)continue;else M=M.clone();M.append(J);J=M}J[C.match=="start"?"insertBefore":"insertAfter"](C)}}else{var S=x.endNode,T=this;E=function(){for(var O=new CKEDITOR.dom.elementPath(A.getParent()),N=new CKEDITOR.dom.elementPath(S.getParent()),P=null,U=null,Q=0;Q<O.elements.length;Q++){var R=O.elements[Q];if(R==O.block||R==O.blockLimit)break;if(T.checkElementRemovable(R))P=R}for(Q=0;Q<N.elements.length;Q++){R=N.elements[Q];if(R==N.block||R==N.blockLimit)break;if(T.checkElementRemovable(R))U=
R}U&&S.breakParent(U);P&&A.breakParent(P)};E();for(C=A.getNext();!C.equals(S);){F=C.getNextSourceNode();if(C.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(C)){C.getName()==this.element?m(this,C):r(C,w(this)[C.getName()]);if(F.type==CKEDITOR.NODE_ELEMENT&&F.contains(A)){E();F=A.getNext()}}C=F}}v.moveToBookmark(x)}function e(v){(v=v.getCommonAncestor(true,true).getAscendant(this.element,true))&&s(v,this)}function h(v){if(v=v.getCommonAncestor(true,true).getAscendant(this.element,true)){var x=
this._.definition,A=x.attributes;CKEDITOR.style.getStyleText(x);if(A)for(var E in A)v.removeAttribute(E,A[E]);if(x.styles)for(var C in x.styles)x.styles.hasOwnProperty(C)&&v.removeStyle(C)}}function j(v){var x=v.createBookmark(true),A=v.createIterator();A.enforceRealBlocks=true;if(this._.enterMode)A.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var E,C=v.document;E=A.getNextParagraph();){var F=n(this,C,E);f(E,F)}v.moveToBookmark(x)}function g(v){var x=v.createBookmark(1),A=v.createIterator();
A.enforceRealBlocks=true;A.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var E;E=A.getNextParagraph();)if(this.checkElementRemovable(E))if(E.is("pre")){var C=this._.enterMode==CKEDITOR.ENTER_BR?null:v.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div");C&&E.copyAttributes(C);f(E,C)}else m(this,E,1);v.moveToBookmark(x)}function f(v,x){if(v.$.parentNode){var A=!x;if(A){x=v.getDocument().createElement("div");v.copyAttributes(x)}var E=x&&x.is("pre"),C=v.is("pre"),F=!E&&C;if(E&&!C){C=
x;(F=v.getBogus())&&F.remove();F=v.getHtml();F=k(F,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");F=F.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");F=F.replace(/([ \t\n\r]+|&nbsp;)/g," ");F=F.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var J=v.getDocument().createElement("div");J.append(C);C.$.outerHTML="<pre>"+F+"</pre>";C.copyAttributes(J.getFirst());C=J.getFirst().remove()}else C.setHtml(F);x=C}else if(F)x=l(A?[v.getHtml()]:d(v),x);else v.moveChildren(x);x.replace(v);if(E){A=x;var M;if((M=A.getPrevious(o))&&
M.is&&M.is("pre")){E=k(M.getHtml(),/\n$/,"")+"\n\n"+k(A.getHtml(),/^\n/,"");if(CKEDITOR.env.ie)A.$.outerHTML="<pre>"+E+"</pre>";else A.setHtml(E);M.remove()}}else A&&u(x)}}function d(v){v.getName();var x=[];k(v.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(A,E,C){return E+"</pre>"+C+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(A,E){x.push(E)});return x}function k(v,x,A){var E="",C="";v=v.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,
function(F,J,M){J&&(E=J);M&&(C=M);return""});return E+v.replace(x,A)+C}function l(v,x){var A;if(v.length>1)A=new CKEDITOR.dom.documentFragment(x.getDocument());for(var E=0;E<v.length;E++){var C=v[E];C=C.replace(/(\r\n|\r)/g,"\n");C=k(C,/^[ \t]*\n/,"");C=k(C,/\n$/,"");C=k(C,/^[ \t]+|[ \t]+$/g,function(J,M){return J.length==1?"&nbsp;":M?" "+CKEDITOR.tools.repeat("&nbsp;",J.length-1):CKEDITOR.tools.repeat("&nbsp;",J.length-1)+" "});C=C.replace(/\n/g,"<br>");C=C.replace(/[ \t]{2,}/g,function(J){return CKEDITOR.tools.repeat("&nbsp;",
J.length-1)+" "});if(A){var F=x.clone();F.setHtml(C);A.append(F)}else x.setHtml(C)}return A||x}function m(v,x){var A=v._.definition,E=CKEDITOR.tools.extend({},A.attributes,w(v)[x.getName()]);A=A.styles;var C=CKEDITOR.tools.isEmpty(E)&&CKEDITOR.tools.isEmpty(A),F;for(F in E)if(!((F=="class"||v._.definition.fullMatch)&&x.getAttribute(F)!=y(F,E[F]))){C=x.hasAttribute(F);x.removeAttribute(F)}for(var J in A)if(!(v._.definition.fullMatch&&x.getStyle(J)!=y(J,A[J],true))){C=C||!!x.getStyle(J);x.removeStyle(J)}if(C)!CKEDITOR.dtd.$block[x.getName()]||
v._.enterMode==CKEDITOR.ENTER_BR&&!x.hasAttributes()?u(x):x.renameNode(v._.enterMode==CKEDITOR.ENTER_P?"p":"div")}function p(v,x){for(var A=w(v),E=x.getElementsByTag(v.element),C=E.count();--C>=0;)m(v,E.getItem(C));for(var F in A)if(F!=v.element){E=x.getElementsByTag(F);for(C=E.count()-1;C>=0;C--){var J=E.getItem(C);r(J,A[F])}}}function r(v,x){var A=x&&x.attributes;if(A)for(var E=0;E<A.length;E++){var C=A[E][0],F;if(F=v.getAttribute(C)){var J=A[E][1];if(J===null||J.test&&J.test(F)||typeof J=="string"&&
F==J)v.removeAttribute(C)}}u(v)}function u(v){if(!v.hasAttributes())if(CKEDITOR.dtd.$block[v.getName()]){var x=v.getPrevious(o),A=v.getNext(o);if(x&&(x.type==CKEDITOR.NODE_TEXT||!x.isBlockBoundary({br:1})))v.append("br",1);if(A&&(A.type==CKEDITOR.NODE_TEXT||!A.isBlockBoundary({br:1})))v.append("br");v.remove(true)}else{x=v.getFirst();A=v.getLast();v.remove(true);if(x){x.type==CKEDITOR.NODE_ELEMENT&&x.mergeSiblings();A&&!x.equals(A)&&A.type==CKEDITOR.NODE_ELEMENT&&A.mergeSiblings()}}}function n(v,
x,A){var E;E=v.element;if(E=="*")E="span";E=new CKEDITOR.dom.element(E,x);A&&A.copyAttributes(E);E=s(E,v);x.getCustomData("doc_processing_style")&&E.hasAttribute("id")?E.removeAttribute("id"):x.setCustomData("doc_processing_style",1);return E}function s(v,x){var A=x._.definition,E=A.attributes;A=CKEDITOR.style.getStyleText(A);if(E)for(var C in E)v.setAttribute(C,E[C]);A&&v.setAttribute("style",A);return v}function q(v,x){for(var A in v)v[A]=v[A].replace(z,function(E,C){return x[C]})}function w(v){if(v._.overrides)return v._.overrides;
var x=v._.overrides={},A=v._.definition.overrides;if(A){CKEDITOR.tools.isArray(A)||(A=[A]);for(var E=0;E<A.length;E++){var C=A[E],F,J;if(typeof C=="string")F=C.toLowerCase();else{F=C.element?C.element.toLowerCase():v.element;J=C.attributes}C=x[F]||(x[F]={});if(J){C=C.attributes=C.attributes||[];for(var M in J)C.push([M.toLowerCase(),J[M]])}}}return x}function y(v,x,A){var E=new CKEDITOR.dom.element("span");E[A?"setStyle":"setAttribute"](v,x);return E[A?"getStyle":"getAttribute"](v)}function H(v,x){var A;
if(x!==false){A=new CKEDITOR.dom.element("span");A.setAttribute("style",v);A=A.getAttribute("style")||""}else A=v;return A.replace(/\s*([;:])\s*/,"$1").replace(/([^\s;])$/,"$1;").replace(/,\s+/g,",").replace(/\"/g,"").toLowerCase()}function D(v){var x={};v.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(A,E,C){x[E]=C});return x}function B(v,x){var A=v.getSelection(),E=A.getRanges(CKEDITOR.ONLY_FORMATTABLES),C=x?this.removeFromRange:this.applyToRange,F;v.fire("applyStyle",
{style:this.element,remove:x,selection:A,ranges:E});for(var J=E.createIterator();F=J.getNextRange();)C.call(this,F);v.fire("afterApplyStyle",{style:this.element,remove:x,selection:A,ranges:E});A.selectRanges(E);v.removeCustomData("doc_processing_style")}var G={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1},I={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1},K=/\s*(?:;\s*|$)/,L=CKEDITOR.dom.walker.bookmark(0,1);CKEDITOR.style=function(v,x){if(x){v=
CKEDITOR.tools.clone(v);q(v.attributes,x);q(v.styles,x)}var A=this.element=(v.element||"*").toLowerCase();this.type=A=="#"||G[A]?CKEDITOR.STYLE_BLOCK:I[A]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE;this._={definition:v}};CKEDITOR.style.prototype={apply:function(v){B.call(this,v,false)},remove:function(v){B.call(this,v,true)},applyToRange:function(v){return(this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?b:this.type==CKEDITOR.STYLE_BLOCK?j:this.type==CKEDITOR.STYLE_OBJECT?e:null).call(this,v)},
removeFromRange:function(v){return(this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?g:this.type==CKEDITOR.STYLE_OBJECT?h:null).call(this,v)},applyToObject:function(v){s(v,this)},checkActive:function(v){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(v.block||v.blockLimit,true);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var x=v.elements,A=0,E;A<x.length;A++){E=x[A];if(!(this.type==CKEDITOR.STYLE_INLINE&&(E==v.block||
E==v.blockLimit)))if(!(this.type==CKEDITOR.STYLE_OBJECT&&!(E.getName()in I)))if(this.checkElementRemovable(E,true))return true}}return false},checkApplicable:function(v){switch(this.type){case CKEDITOR.STYLE_OBJECT:return v.lastElement.getAscendant(this.element,true)}return true},checkElementRemovable:function(v,x){if(!v)return false;var A=this._.definition;if(v.getName()==this.element){if(!x&&!v.hasAttributes())return true;var E=A._AC;if(E)A=E;else{E={};var C=0,F=A.attributes;if(F)for(var J in F){C++;
E[J]=F[J]}if(F=CKEDITOR.style.getStyleText(A)){E.style||C++;E.style=F}E._length=C;A=A._AC=E}if(A._length){for(var M in A)if(M!="_length"){C=v.getAttribute(M)||"";if(M=="style")a:{E=A[M];C=H(C,false);typeof E=="string"&&(E=D(E));typeof C=="string"&&(C=D(C));F=void 0;for(F in E)if(!(F in C&&(C[F]==E[F]||E[F]=="inherit"||C[F]=="inherit"))){E=false;break a}E=true}else E=A[M]==C;if(E){if(!x)return true}else if(x)return false}if(x)return true}else return true}if(M=w(this)[v.getName()]){if(!(A=M.attributes))return true;
for(E=0;E<A.length;E++){M=A[E][0];if(M=v.getAttribute(M)){C=A[E][1];if(C===null||typeof C=="string"&&M==C||C.test(M))return true}}}return false},buildPreview:function(){var v=this._.definition,x=[],A=v.element;if(A=="bdo")A="span";x=["<",A];var E=v.attributes;if(E)for(var C in E)x.push(" ",C,'="',E[C],'"');(E=CKEDITOR.style.getStyleText(v))&&x.push(' style="',E,'"');x.push(">",v.name,"</",A,">");return x.join("")}};CKEDITOR.style.getStyleText=function(v){var x=v._ST;if(x)return x;x=v.styles;var A=
v.attributes&&v.attributes.style||"",E="";if(A.length)A=A.replace(K,";");for(var C in x){var F=x[C],J=(C+":"+F).replace(K,";");if(F=="inherit")E+=J;else A+=J}if(A.length)A=H(A);A+=E;return v._ST=A};var o=CKEDITOR.dom.walker.whitespaces(1),z=/#\((.+?)\)/g})();CKEDITOR.styleCommand=function(a){this.style=a};CKEDITOR.styleCommand.prototype.exec=function(a){a.focus();if(a=a.document)if(this.state==CKEDITOR.TRISTATE_OFF)this.style.apply(a);else this.state==CKEDITOR.TRISTATE_ON&&this.style.remove(a);return!!a};
CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(a,b,c){CKEDITOR.stylesSet.addExternal(a,b,"");CKEDITOR.stylesSet.load(a,c)};
CKEDITOR.editor.prototype.getStylesSet=function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);else{var b=this,c=b.config.stylesCombo_stylesSet||b.config.stylesSet||"default";if(c instanceof Array){b._.stylesDefinitions=c;a(c)}else{c=c.split(":");var e=c[0],h=CKEDITOR.plugins.registered.styles.path;CKEDITOR.stylesSet.addExternal(e,c[1]?c.slice(1).join(":"):h+"styles/"+e+".js","");CKEDITOR.stylesSet.load(e,function(j){b._.stylesDefinitions=j[e];a(b._.stylesDefinitions)})}}};CKEDITOR.plugins.add("domiterator");
(function(){function a(h){if(!(arguments.length<1)){this.range=h;this.forceBrBreak=0;this.enlargeBr=1;this.enforceRealBlocks=0;this._||(this._={})}}function b(h,j,g){for(h=h.getNextSourceNode(j,null,g);!e(h);)h=h.getNextSourceNode(j,null,g);return h}var c=/^[\r\n\t ]+$/,e=CKEDITOR.dom.walker.bookmark(false,true);a.prototype={getNextParagraph:function(h){var j,g,f,d,k,l;if(!this._.lastNode){g=this.range.clone();g.shrink(CKEDITOR.NODE_ELEMENT,true);d=g.endContainer.hasAscendant("pre",true)||g.startContainer.hasAscendant("pre",
true);g.enlarge(this.forceBrBreak&&!d||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);d=new CKEDITOR.dom.walker(g);var m=CKEDITOR.dom.walker.bookmark(true,true);d.evaluator=m;this._.nextNode=d.next();d=new CKEDITOR.dom.walker(g);d.evaluator=m;d=d.previous();this._.lastNode=d.getNextSourceNode(true);if(this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()){m=new CKEDITOR.dom.range(g.document);
m.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END);if(m.checkEndOfBlock()){m=new CKEDITOR.dom.elementPath(m.endContainer);this._.lastNode=(m.block||m.blockLimit).getNextSourceNode(true)}}if(!this._.lastNode){this._.lastNode=this._.docEndMarker=g.document.createText("");this._.lastNode.insertAfter(d)}g=null}m=this._.nextNode;d=this._.lastNode;for(this._.nextNode=null;m;){var p=0,r=m.hasAscendant("pre"),u=m.type!=CKEDITOR.NODE_ELEMENT,n=0;if(u){if(m.type==CKEDITOR.NODE_TEXT)if(c.test(m.getText()))u=
0}else{var s=m.getName();if(m.isBlockBoundary(this.forceBrBreak&&!r&&{br:1})){if(s=="br")u=1;else if(!g&&!m.getChildCount()&&s!="hr"){j=m;f=m.equals(d);break}if(g){g.setEndAt(m,CKEDITOR.POSITION_BEFORE_START);if(s!="br")this._.nextNode=m}p=1}else{if(m.getFirst()){if(!g){g=new CKEDITOR.dom.range(this.range.document);g.setStartAt(m,CKEDITOR.POSITION_BEFORE_START)}m=m.getFirst();continue}u=1}}if(u&&!g){g=new CKEDITOR.dom.range(this.range.document);g.setStartAt(m,CKEDITOR.POSITION_BEFORE_START)}f=(!p||
u)&&m.equals(d);if(g&&!p)for(;!m.getNext(e)&&!f;){s=m.getParent();if(s.isBlockBoundary(this.forceBrBreak&&!r&&{br:1})){p=1;f||s.equals(d);break}m=s;u=1;f=m.equals(d);n=1}u&&g.setEndAt(m,CKEDITOR.POSITION_AFTER_END);m=b(m,n,d);if((f=!m)||p&&g)break}if(!j){if(!g){this._.docEndMarker&&this._.docEndMarker.remove();return this._.nextNode=null}g.enlargeFormattables();j=new CKEDITOR.dom.elementPath(g.startContainer);m=j.blockLimit;p={div:1,th:1,td:1};j=j.block;if(!j&&!this.enforceRealBlocks&&p[m.getName()]&&
g.checkStartOfBlock()&&g.checkEndOfBlock())j=m;else if(!j||this.enforceRealBlocks&&j.getName()=="li"){j=this.range.document.createElement(h||"p");g.extractContents().appendTo(j);j.trim();g.insertNode(j);k=l=true}else if(j.getName()!="li"){if(!g.checkStartOfBlock()||!g.checkEndOfBlock()){j=j.clone(false);g.extractContents().appendTo(j);j.trim();l=g.splitBlock();k=!l.wasStartOfBlock;l=!l.wasEndOfBlock;g.insertNode(j)}}else if(!f)this._.nextNode=j.equals(d)?null:b(g.getBoundaryNodes().endNode,1,d)}if(k)if((g=
j.getPrevious())&&g.type==CKEDITOR.NODE_ELEMENT)if(g.getName()=="br")g.remove();else g.getLast()&&g.getLast().$.nodeName.toLowerCase()=="br"&&g.getLast().remove();if(l)if((g=j.getLast())&&g.type==CKEDITOR.NODE_ELEMENT&&g.getName()=="br")if(CKEDITOR.env.ie||g.getPrevious(e)||g.getNext(e))g.remove();if(!this._.nextNode)this._.nextNode=f||j.equals(d)?null:b(j,1,d);return j}};CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}})();
CKEDITOR.plugins.add("panelbutton",{requires:["button"],beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});CKEDITOR.UI_PANELBUTTON=4;
(function(){var a=function(b){var c=this._;if(c.state!=CKEDITOR.TRISTATE_DISABLED){this.createPanel(b);c.on?c.panel.hide():c.panel.showBlock(this._.id,this.document.getById(this._.id),4)}};CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(b){var c=b.panel;delete b.panel;this.base(b);this.document=c&&c.parent&&c.parent.getDocument()||CKEDITOR.document;c.block={attributes:c.attributes};this.hasArrow=true;this.click=a;this._={panelDefinition:c}},statics:{handler:{create:function(b){return new CKEDITOR.ui.panelButton(b)}}},
proto:{createPanel:function(b){var c=this._;if(!c.panel){var e=this._.panelDefinition||{},h=this._.panelDefinition.block,j=e.parent||CKEDITOR.document.getBody(),g=this._.panel=new CKEDITOR.ui.floatPanel(b,j,e);e=g.addBlock(c.id,h);var f=this;g.onShow=function(){f.className&&this.element.getFirst().addClass(f.className+"_panel");f.setState(CKEDITOR.TRISTATE_ON);c.on=1;if(f.onOpen)f.onOpen()};g.onHide=function(d){f.className&&this.element.getFirst().removeClass(f.className+"_panel");f.setState(f.modes&&
f.modes[b.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);c.on=0;if(!d&&f.onClose)f.onClose()};g.onEscape=function(){g.hide();f.document.getById(c.id).focus()};if(this.onBlock)this.onBlock(g,e);e.onHide=function(){c.on=0;f.setState(CKEDITOR.TRISTATE_OFF)}}}}})})();CKEDITOR.plugins.add("floatpanel",{requires:["panel"]});
(function(){function a(e,h,j,g,f){f=CKEDITOR.tools.genKey(h.getUniqueId(),j.getUniqueId(),e.skinName,e.lang.dir,e.uiColor||"",g.css||"",f||"");var d=b[f];if(!d){d=b[f]=new CKEDITOR.ui.panel(h,g);d.element=j.append(CKEDITOR.dom.element.createFromHtml(d.renderHtml(e),h));d.element.setStyles({display:"none",position:"absolute"})}return d}var b={},c=false;CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(e,h,j,g){j.forceIFrame=1;var f=h.getDocument();g=a(e,f,h,j,g||0);var d=g.element,k=d.getFirst().getFirst();
this.element=d;this._={panel:g,parentElement:h,definition:j,document:f,iframe:k,children:[],dir:e.lang.dir};e.on("mode",function(){this.hide()},this)},proto:{addBlock:function(e,h){return this._.panel.addBlock(e,h)},addListBlock:function(e,h){return this._.panel.addListBlock(e,h)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,h,j,g,f){var d=this._.panel,k=d.showBlock(e);this.allowBlur(false);c=1;var l=this.element,m=this._.iframe;e=h.getDocumentPosition(l.getDocument());
var p=this._.dir=="rtl",r=e.x+(g||0),u=e.y+(f||0);if(p&&(j==1||j==4))r+=h.$.offsetWidth;else if(!p&&(j==2||j==3))r+=h.$.offsetWidth-1;if(j==3||j==4)u+=h.$.offsetHeight-1;this._.panel._.offsetParentId=h.getId();l.setStyles({top:u+"px",left:0,display:""});l.setOpacity(0);l.getFirst().removeStyle("width");if(!this._.blurSet){h=CKEDITOR.env.ie?m:new CKEDITOR.dom.window(m.$.contentWindow);CKEDITOR.event.useCapture=true;h.on("blur",function(n){if(this.allowBlur()){var s;CKEDITOR.env.ie&&!this.allowBlur()||
(s=n.data.getTarget())&&s.getName&&s.getName()!="iframe"||this.visible&&!this._.activeChild&&!c&&this.hide()}},this);h.on("focus",function(){this._.focused=true;this.hideChild();this.allowBlur(true)},this);CKEDITOR.event.useCapture=false;this._.blurSet=1}d.onEscape=CKEDITOR.tools.bind(function(n){if(this.onEscape&&this.onEscape(n)===false)return false},this);CKEDITOR.tools.setTimeout(function(){if(p)r-=l.$.offsetWidth;var n=CKEDITOR.tools.bind(function(){var s=l.getFirst();if(k.autoSize){var q=k.element.$;
if(CKEDITOR.env.gecko||CKEDITOR.env.opera)q=q.parentNode;if(CKEDITOR.env.ie)q=q.document.body;q=q.scrollWidth;if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&q>0)q+=(s.$.offsetWidth||0)-(s.$.clientWidth||0);q+=4;s.setStyle("width",q+"px");k.element.addClass("cke_frameLoaded");q=k.element.$.scrollHeight;if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&q>0)q+=(s.$.offsetHeight||0)-(s.$.clientHeight||0);s.setStyle("height",q+"px");d._.currentBlock.element.setStyle("display","none").removeStyle("display")}else s.removeStyle("height");
q=d.element;var w=q.getWindow();s=w.getScrollPosition();w=w.getViewPaneSize();q={height:q.$.offsetHeight,width:q.$.offsetWidth};if(p?r<0:r+q.width>w.width+s.x)r+=q.width*(p?1:-1);if(u+q.height>w.height+s.y)u-=q.height;if(CKEDITOR.env.ie){q=s=new CKEDITOR.dom.element(l.$.offsetParent);if(q.getName()=="html")q=q.getDocument().getBody();if(q.getComputedStyle("direction")=="rtl")r-=CKEDITOR.env.ie8Compat?l.getDocument().getDocumentElement().$.scrollLeft*2:s.$.scrollWidth-s.$.clientWidth}s=l.getFirst();
if(q=s.getCustomData("activePanel"))q.onHide&&q.onHide.call(this,1);s.setCustomData("activePanel",this);l.setStyles({top:u+"px",left:r+"px"});l.setOpacity(1)},this);d.isLoaded?n():d.onLoad=n;CKEDITOR.tools.setTimeout(function(){m.$.contentWindow.focus();this.allowBlur(true)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this);c=0},hide:function(){if(this.visible&&(!this.onHide||this.onHide.call(this)!==true)){this.hideChild();this.element.setStyle("display","none");
this.visible=0;this.element.getFirst().removeCustomData("activePanel")}},allowBlur:function(e){var h=this._.panel;if(e!=undefined)h.allowBlur=e;return h.allowBlur},showAsChild:function(e,h,j,g,f,d){if(!(this._.activeChild==e&&e._.panel._.offsetParentId==j.getId())){this.hideChild();e.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this);this._.activeChild=e;this._.focused=false;e.showBlock(h,j,g,f,d);if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie8&&
CKEDITOR.env.ie6Compat)setTimeout(function(){e.element.getChild(0).$.style.cssText+=""},100)}},hideChild:function(){var e=this._.activeChild;if(e){delete e.onHide;delete this._.activeChild;e.hide()}}}});CKEDITOR.on("instanceDestroyed",function(){var e=CKEDITOR.tools.isEmpty(CKEDITOR.instances),h;for(h in b){var j=b[h];e?j.destroy():j.element.hide()}e&&(b={})})})();
CKEDITOR.plugins.add("menu",{beforeInit:function(a){for(var b=a.config.menu_groups.split(","),c=a._.menuGroups={},e=a._.menuItems={},h=0;h<b.length;h++)c[b[h]]=h+1;a.addMenuGroup=function(j,g){c[j]=g||100};a.addMenuItem=function(j,g){if(c[g.group])e[j]=new CKEDITOR.menuItem(this,j,g)};a.addMenuItems=function(j){for(var g in j)this.addMenuItem(g,j[g])};a.getMenuItem=function(j){return e[j]}},requires:["floatpanel"]});
(function(){function a(b){b.sort(function(c,e){if(c.group<e.group)return-1;else if(c.group>e.group)return 1;return c.order<e.order?-1:c.order>e.order?1:0})}CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(b,c){c=this._.definition=c||{};this.id=CKEDITOR.tools.getNextId();this.editor=b;this.items=[];this._.listeners=[];this._.level=c.level||1;var e=CKEDITOR.tools.extend({},c.panel,{css:b.skin.editor.css,level:this._.level-1,block:{}}),h=e.block.attributes=e.attributes||{};!h.role&&(h.role="menu");
this._.panelDefinition=e},_:{onShow:function(){var b=this.editor.getSelection();CKEDITOR.env.ie&&b&&b.lock();var c=b&&b.getStartElement(),e=this._.listeners;this.removeAll();for(var h=0;h<e.length;h++){var j=e[h](c,b);if(j)for(var g in j){var f=this.editor.getMenuItem(g);if(f){f.state=j[g];this.add(f)}}}},onClick:function(b){this.hide();if(b.onClick)b.onClick();else b.command&&this.editor.execCommand(b.command)},onEscape:function(b){var c=this.parent;if(c){c._.panel.hideChild();b=c._.panel._.panel._.currentBlock;
b._.markItem(b._.focusIndex)}else if(b==27){this.hide();this.editor.focus()}return false},onHide:function(){if(CKEDITOR.env.ie){var b=this.editor.getSelection();b&&b.unlock()}this.onHide&&this.onHide()},showSubMenu:function(b){var c=this._.subMenu,e=this.items[b];if(e=e.getItems&&e.getItems()){this._.panel.getBlock(this.id)._.focusIndex=b;if(c)c.removeAll();else{c=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},true));c.parent=this;c._.onClick=
CKEDITOR.tools.bind(this._.onClick,this)}for(var h in e){var j=this.editor.getMenuItem(h);if(j){j.state=e[h];c.add(j)}}b=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(b));c.show(b,2)}else this._.panel.hideChild()}},proto:{add:function(b){if(!b.order)b.order=this.items.length;this.items.push(b)},removeAll:function(){this.items=[]},show:function(b,c,e,h){if(!this.parent){this._.onShow();if(!this.items.length)return}c=c||(this.editor.lang.dir=="rtl"?2:1);var j=this.items,
g=this.editor,f=this._.panel,d=this._.element;if(!f){f=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);f.onEscape=CKEDITOR.tools.bind(function(u){if(this._.onEscape(u)===false)return false},this);f.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);d=f.addBlock(this.id,this._.panelDefinition.block);d.autoSize=true;var k=d.keys;k[40]="next";k[9]="next";k[38]="prev";k[CKEDITOR.SHIFT+9]="prev";k[32]="click";
k[g.lang.dir=="rtl"?37:39]="click";d=this._.element=d.element;d.addClass(g.skinClass);k=d.getDocument();k.getBody().setStyle("overflow","hidden");k.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(u){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,g.config.menu_subMenuDelay||400,this,[u])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},
this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(u){var n=this.items[u];if(n.state==CKEDITOR.TRISTATE_DISABLED)this.hide();else if(n.getItems)this._.showSubMenu(u);else this._.onClick(n)},this)}a(j);k=g.container.getChild(1);k=['<div class="cke_menu'+(k&&k.hasClass("cke_mixed_dir_content")?" cke_mixed_dir_content":"")+'" role="presentation">'];for(var l=j.length,m=l&&j[0].group,p=0;p<l;p++){var r=j[p];if(m!=r.group){k.push('<div class="cke_menuseparator" role="separator"></div>');m=r.group}r.render(this,
p,k)}k.push("</div>");d.setHtml(k.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(f,this.id,b,c,e,h):f.showBlock(this.id,b,c,e,h);g.fire("menuShow",[f])},addListener:function(b){this._.listeners.push(b)},hide:function(){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide()}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(b,c,e){CKEDITOR.tools.extend(this,e,{order:0,className:"cke_button_"+c});this.group=b._.menuGroups[this.group];this.editor=
b;this.name=c},proto:{render:function(b,c,e){var h=b.id+String(c),j=typeof this.state=="undefined"?CKEDITOR.TRISTATE_OFF:this.state,g=" cke_"+(j==CKEDITOR.TRISTATE_ON?"on":j==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),f=this.label;if(this.className)g+=" "+this.className;var d=this.getItems;e.push('<span class="cke_menuitem'+(this.icon&&this.icon.indexOf(".png")==-1?" cke_noalphafix":"")+'"><a id="',h,'" class="',g,'" href="javascript:void(\'',(this.label||"").replace("'",""),'\')" title="',this.label,
'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(d?'aria-haspopup="true"':"")+(j==CKEDITOR.TRISTATE_DISABLED?'aria-disabled="true"':"")+(j==CKEDITOR.TRISTATE_ON?'aria-pressed="true"':""));if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)e.push(' onkeypress="return false;"');CKEDITOR.env.gecko&&e.push(' onblur="this.style.cssText = this.style.cssText;"');h=(this.iconOffset||0)*-16;e.push(' onmouseover="CKEDITOR.tools.callFunction(',b._.itemOverFn,",",c,');" onmouseout="CKEDITOR.tools.callFunction(',
b._.itemOutFn,",",c,');" onclick="CKEDITOR.tools.callFunction(',b._.itemClickFn,",",c,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(this.icon?' style="background-image:url('+CKEDITOR.getUrl(this.icon)+");background-position:0 "+h+'px;"':"")+'></span></span><span class="cke_label">');if(d)e.push('<span class="cke_menuarrow">',"<span>&#",this.editor.lang.dir=="rtl"?"9668":"9658",";</span>","</span>");e.push(f,"</span></a></span>")}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";
(function(){var a=function(c,e){return c._.modes&&c._.modes[e||c.mode]},b;CKEDITOR.plugins.add("editingblock",{init:function(c){if(c.config.editingBlock){c.on("themeSpace",function(e){if(e.data.space=="contents")e.data.html+="<br>"});c.on("themeLoaded",function(){c.fireOnce("editingBlockReady")});c.on("uiReady",function(){c.setMode(c.config.startupMode)});c.on("afterSetData",function(){if(!b){var e=function(){b=true;a(c).loadData(c.getData());b=false};if(c.mode)e();else c.on("mode",function(){e();
c.removeListener("mode",arguments.callee)})}});c.on("beforeGetData",function(){if(!b&&c.mode){b=true;c.setData(a(c).getData(),null,1);b=false}});c.on("getSnapshot",function(e){if(c.mode)e.data=a(c).getSnapshotData()});c.on("loadSnapshot",function(e){c.mode&&a(c).loadSnapshotData(e.data)});c.on("mode",function(e){e.removeListener();CKEDITOR.env.webkit&&c.container.on("focus",function(){c.focus()});c.config.startupFocus&&c.focus();setTimeout(function(){c.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",
null,c)},0)});c.on("destroy",function(){this.mode&&this._.modes[this.mode].unload(this.getThemeSpace("contents"))})}}});CKEDITOR.editor.prototype.mode="";CKEDITOR.editor.prototype.addMode=function(c,e){e.name=c;(this._.modes||(this._.modes={}))[c]=e};CKEDITOR.editor.prototype.setMode=function(c){var e,h=this.getThemeSpace("contents"),j=this.checkDirty();if(this.mode){if(c==this.mode)return;this.fire("beforeModeUnload");var g=a(this);e=g.getData();g.unload(h);this.mode=""}h.setHtml("");g=a(this,c);
if(!g)throw'[CKEDITOR.editor.setMode] Unknown mode "'+c+'".';if(!j)this.on("mode",function(){this.resetDirty();this.removeListener("mode",arguments.callee)});g.load(h,typeof e!="string"?this.getData():e)};CKEDITOR.editor.prototype.focus=function(){var c=a(this);c&&c.focus()}})();CKEDITOR.config.startupMode="wysiwyg";CKEDITOR.config.editingBlock=true;
(function(){function a(){try{var f=this.getSelection();if(f&&f.document.getWindow().$){var d=f.getStartElement(),k=new CKEDITOR.dom.elementPath(d);if(!k.compare(this._.selectionPreviousPath)){this._.selectionPreviousPath=k;this.fire("selectionChange",{selection:f,path:k,element:d})}}}catch(l){}}function b(){h=true;if(!e){c.call(this);e=CKEDITOR.tools.setTimeout(c,200,this)}}function c(){e=null;if(h){CKEDITOR.tools.setTimeout(a,0,this);h=false}}var e,h,j={modes:{wysiwyg:1,source:1},exec:function(f){switch(f.mode){case "wysiwyg":f.document.$.execCommand("SelectAll",
false,null);f.forceNextSelectionCheck();f.selectionChange();break;case "source":f=f.textarea.$;if(CKEDITOR.env.ie)f.createTextRange().execCommand("SelectAll");else{f.selectionStart=0;f.selectionEnd=f.value.length}f.focus()}},canUndo:false};CKEDITOR.plugins.add("selection",{init:function(f){f.on("contentDom",function(){var d=f.document,k=d.getBody(),l=d.getDocumentElement();if(CKEDITOR.env.ie){var m,p,r=1;k.on("focusin",function(q){if(q.data.$.srcElement.nodeName=="BODY")if(m){q=d.getCustomData("cke_locked_selection");
if(r&&!q)try{m.select()}catch(w){}m=null}});k.on("focus",function(){p=1;s()});k.on("beforedeactivate",function(q){if(!q.data.$.toElement){p=0;r=1}});if(CKEDITOR.env.ie&&CKEDITOR.env.version<8)f.on("blur",function(){try{f.document&&f.document.$.selection.empty()}catch(q){}});l.on("mousedown",function(){r=0});l.on("mouseup",function(){r=1});if(CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.version<8||CKEDITOR.env.quirks))l.on("click",function(q){q.data.getTarget().getName()=="html"&&f.getSelection().getRanges()[0].select()});
var u;k.on("mousedown",function(q){if(q.data.$.button==2)if(f.document.$.selection.type=="None")u=f.window.getScrollPosition();p=0});k.on("mouseup",function(q){if(q.data.$.button==2&&u){f.document.$.documentElement.scrollLeft=u.x;f.document.$.documentElement.scrollTop=u.y}u=null;p=1;setTimeout(function(){s(true)},0)});k.on("keydown",n);k.on("keyup",function(){p=1;s()});d.on("selectionchange",s);var n=function(){p=0},s=function(q){if(p){var w=f.document,y=f.getSelection(),H=y&&y.getNative();if(q&&
H&&H.type=="None")if(!w.$.queryCommandEnabled("InsertImage")){CKEDITOR.tools.setTimeout(s,50,this,true);return}var D;if(!(H&&H.type&&H.type!="Control"&&(D=H.createRange())&&(D=D.parentElement())&&(D=D.nodeName)&&D.toLowerCase()in{input:1,textarea:1})){m=H&&y.getRanges()[0];b.call(f)}}}}else{d.on("mouseup",b,f);d.on("keyup",b,f)}});f.on("contentDomUnload",f.forceNextSelectionCheck,f);f.addCommand("selectAll",j);f.ui.addButton("SelectAll",{label:f.lang.selectAll,command:"selectAll"});f.selectionChange=
b}});CKEDITOR.editor.prototype.getSelection=function(){return this.document&&this.document.getSelection()};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){var f=new CKEDITOR.dom.selection(this);return!f||f.isInvalid?null:f};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;CKEDITOR.dom.selection=function(f){var d=f.getCustomData("cke_locked_selection");if(d)return d;
this.document=f;this.isLocked=0;this._={cache:{}};if(CKEDITOR.env.ie){f=this.getNative().createRange();if(!f||f.item&&f.item(0).ownerDocument!=this.document.$||f.parentElement&&f.parentElement().ownerDocument!=this.document.$)this.isInvalid=true}return this};var g={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,th:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:CKEDITOR.env.ie?function(){return this._.cache.nativeSel||
(this._.cache.nativeSel=this.document.$.selection)}:function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.getWindow().$.getSelection())},getType:CKEDITOR.env.ie?function(){var f=this._.cache;if(f.type)return f.type;var d=CKEDITOR.SELECTION_NONE;try{var k=this.getNative(),l=k.type;if(l=="Text")d=CKEDITOR.SELECTION_TEXT;if(l=="Control")d=CKEDITOR.SELECTION_ELEMENT;if(k.createRange().parentElement)d=CKEDITOR.SELECTION_TEXT}catch(m){}return f.type=d}:function(){var f=this._.cache;
if(f.type)return f.type;var d=CKEDITOR.SELECTION_TEXT,k=this.getNative();if(k){if(k.rangeCount==1){k=k.getRangeAt(0);var l=k.startContainer;if(l==k.endContainer&&l.nodeType==1&&k.endOffset-k.startOffset==1&&g[l.childNodes[k.startOffset].nodeName.toLowerCase()])d=CKEDITOR.SELECTION_ELEMENT}}else d=CKEDITOR.SELECTION_NONE;return f.type=d},getRanges:function(){var f=CKEDITOR.env.ie?function(){function d(l){return(new CKEDITOR.dom.node(l)).getIndex()}var k=function(l,m){l=l.duplicate();l.collapse(m);
var p=l.parentElement();if(!p.hasChildNodes())return{container:p,offset:0};for(var r=p.children,u,n=l.duplicate(),s=0,q=r.length-1,w=-1,y;s<=q;){w=Math.floor((s+q)/2);u=r[w];n.moveToElementText(u);y=n.compareEndPoints("StartToStart",l);if(y>0)q=w-1;else if(y<0)s=w+1;else return{container:p,offset:d(u)}}if(w==-1||w==r.length-1&&y<0){n.moveToElementText(p);n.setEndPoint("StartToStart",l);n=n.text.replace(/(\r\n|\r)/g,"\n").length;r=p.childNodes;if(!n){u=r[r.length-1];return u.nodeType==CKEDITOR.NODE_ELEMENT?
{container:p,offset:r.length}:{container:u,offset:u.nodeValue.length}}for(p=r.length;n>0;)n-=r[--p].nodeValue.length;return{container:r[p],offset:-n}}else{n.collapse(y>0?true:false);n.setEndPoint(y>0?"StartToStart":"EndToStart",l);n=n.text.replace(/(\r\n|\r)/g,"\n").length;if(!n)return{container:p,offset:d(u)+(y>0?0:1)};for(;n>0;){u=u[y>0?"previousSibling":"nextSibling"];try{n-=u.nodeValue.length}catch(H){return{container:p,offset:d(u)}}}return{container:u,offset:y>0?-n:u.nodeValue.length+n}}};return function(){var l=
this.getNative(),m=l&&l.createRange(),p=this.getType();if(!l)return[];if(p==CKEDITOR.SELECTION_TEXT){l=new CKEDITOR.dom.range(this.document);p=k(m,true);l.setStart(new CKEDITOR.dom.node(p.container),p.offset);p=k(m);l.setEnd(new CKEDITOR.dom.node(p.container),p.offset);l.endContainer.getPosition(l.startContainer)&CKEDITOR.POSITION_PRECEDING&&l.endOffset<=l.startContainer.getIndex()&&l.collapse();return[l]}else if(p==CKEDITOR.SELECTION_ELEMENT){p=[];for(var r=0;r<m.length;r++){var u=m.item(r),n=u.parentNode,
s=0;for(l=new CKEDITOR.dom.range(this.document);s<n.childNodes.length&&n.childNodes[s]!=u;s++);l.setStart(new CKEDITOR.dom.node(n),s);l.setEnd(new CKEDITOR.dom.node(n),s+1);p.push(l)}return p}return[]}}():function(){var d=[],k,l=this.document,m=this.getNative();if(!m)return d;if(!m.rangeCount){k=new CKEDITOR.dom.range(l);k.moveToElementEditStart(l.getBody());d.push(k)}for(var p=0;p<m.rangeCount;p++){var r=m.getRangeAt(p);k=new CKEDITOR.dom.range(l);k.setStart(new CKEDITOR.dom.node(r.startContainer),
r.startOffset);k.setEnd(new CKEDITOR.dom.node(r.endContainer),r.endOffset);d.push(k)}return d};return function(d){var k=d===CKEDITOR.ONLY_FORMATTABLES,l=this._.cache;if(l.ranges&&!d)return l.ranges;else if(!l.ranges)l.ranges=new CKEDITOR.dom.rangeList(f.call(this));if(d)for(var m=l.ranges,p=0;p<m.length;p++){var r=m[p];k&&r.enlargeFormattables();if(r.getCommonAncestor()[k?"isReadOnlyNotFormattable":"isReadOnly"]())m.splice(p,1);if(!r.collapsed){d=r.startContainer;var u=r.endContainer,n=r.startOffset,
s=r.endOffset,q=r.clone(),w;if(w=d.isReadOnly())r.setStartAfter(w);if(d&&d.type==CKEDITOR.NODE_TEXT)n>=d.getLength()?q.setStartAfter(d):q.setStartBefore(d);if(u&&u.type==CKEDITOR.NODE_TEXT)s?q.setEndAfter(u):q.setEndBefore(u);d=new CKEDITOR.dom.walker(q);d.evaluator=function(y){if(y.type==CKEDITOR.NODE_ELEMENT&&y.isReadOnly()&&!(k&&y.getAttribute("formateditable")=="true")){var H=r.clone();r.setEndBefore(y);r.collapsed&&m.splice(p--,1);if(!(y.getPosition(q.endContainer)&CKEDITOR.POSITION_CONTAINS)){H.setStartAfter(y);
H.collapsed||m.splice(p+1,0,H)}return true}return false};d.next()}}return l.ranges}}(),getStartElement:function(){var f=this._.cache;if(f.startElement!==undefined)return f.startElement;var d;this.getNative();switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var k=this.getRanges()[0];if(k){if(k.collapsed){d=k.startContainer;if(d.type!=CKEDITOR.NODE_ELEMENT)d=d.getParent()}else{for(k.optimize();;){d=k.startContainer;if(k.startOffset==
(d.getChildCount?d.getChildCount():d.getLength())&&!d.isBlockBoundary())k.setStartAfter(d);else break}d=k.startContainer;if(d.type!=CKEDITOR.NODE_ELEMENT)return d.getParent();d=d.getChild(k.startOffset);if(!d||d.type!=CKEDITOR.NODE_ELEMENT)d=k.startContainer;else for(k=d.getFirst();k&&k.type==CKEDITOR.NODE_ELEMENT;){d=k;k=k.getFirst()}}d=d.$}}return f.startElement=d?new CKEDITOR.dom.element(d):null},getSelectedElement:function(){var f=this._.cache;if(f.selectedElement!==undefined)return f.selectedElement;
var d=this,k=CKEDITOR.tools.tryThese(function(){return d.getNative().createRange().item(0)},function(){for(var l=d.getRanges()[0],m,p,r=2;r&&!((m=l.getEnclosedNode())&&m.type==CKEDITOR.NODE_ELEMENT&&g[m.getName()]&&(p=m));r--)l.shrink(CKEDITOR.SHRINK_ELEMENT);return p.$});return f.selectedElement=k?new CKEDITOR.dom.element(k):null},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this._.cache.nativeSel={};this.isLocked=1;this.document.setCustomData("cke_locked_selection",
this)},unlock:function(f){var d=this.document,k=d.getCustomData("cke_locked_selection");if(k){d.setCustomData("cke_locked_selection",null);if(f){var l=k.getSelectedElement(),m=!l&&k.getRanges();this.isLocked=0;this.reset();d.getBody().focus();l?this.selectElement(l):this.selectRanges(m)}}if(!k||!f){this.isLocked=0;this.reset()}},reset:function(){this._.cache={}},selectElement:function(f){if(this.isLocked){var d=new CKEDITOR.dom.range(this.document);d.setStartBefore(f);d.setEndAfter(f);this._.cache.selectedElement=
f;this._.cache.startElement=f;this._.cache.ranges=new CKEDITOR.dom.rangeList(d);this._.cache.type=CKEDITOR.SELECTION_ELEMENT}else{if(CKEDITOR.env.ie){this.getNative().empty();try{d=this.document.$.body.createControlRange();d.addElement(f.$);d.select()}catch(k){d=this.document.$.body.createTextRange();d.moveToElementText(f.$);d.select()}finally{this.document.fire("selectionchange")}}else{d=this.document.$.createRange();d.selectNode(f.$);f=this.getNative();f.removeAllRanges();f.addRange(d)}this.reset()}},
selectRanges:function(f){if(this.isLocked){this._.cache.selectedElement=null;this._.cache.startElement=f[0]&&f[0].getTouchedStartNode();this._.cache.ranges=new CKEDITOR.dom.rangeList(f);this._.cache.type=CKEDITOR.SELECTION_TEXT}else{if(CKEDITOR.env.ie){if(f.length>1){var d=f[f.length-1];f[0].setEnd(d.endContainer,d.endOffset);f.length=1}f[0]&&f[0].select()}else{d=this.getNative();f.length&&d.removeAllRanges();for(var k=0;k<f.length;k++){if(k<f.length-1){var l=f[k],m=f[k+1],p=l.clone();p.setStart(l.endContainer,
l.endOffset);p.setEnd(m.startContainer,m.startOffset);if(!p.collapsed){p.shrink(CKEDITOR.NODE_ELEMENT,true);var r=p.getCommonAncestor();p=p.getEnclosedNode();if(r.isReadOnly()||p&&p.isReadOnly()){m.setStart(l.startContainer,l.startOffset);f.splice(k--,1);continue}}}l=f[k];m=this.document.$.createRange();r=l.startContainer;if(l.collapsed&&(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)&&r.type==CKEDITOR.NODE_ELEMENT&&!r.getChildCount())r.appendText("");m.setStart(r.$,l.startOffset);
try{m.setEnd(l.endContainer.$,l.endOffset)}catch(u){m.setEnd(r.$,l.startOffset)}d.addRange(m)}}this.reset()}},createBookmarks:function(f){return this.getRanges().createBookmarks(f)},createBookmarks2:function(f){return this.getRanges().createBookmarks2(f)},selectBookmarks:function(f){for(var d=[],k=0;k<f.length;k++){var l=new CKEDITOR.dom.range(this.document);l.moveToBookmark(f[k]);d.push(l)}this.selectRanges(d);return this},getCommonAncestor:function(){var f=this.getRanges();return f[0].startContainer.getCommonAncestor(f[f.length-
1].endContainer)},scrollIntoView:function(){this.getStartElement().scrollIntoView()}}})();
(function(){var a=CKEDITOR.dom.walker.whitespaces(true),b=/\ufeff|\u00a0/,c={table:1,tbody:1,tr:1};CKEDITOR.dom.range.prototype.select=CKEDITOR.env.ie?function(e){var h=this.collapsed,j,g;if(this.startContainer.type==CKEDITOR.NODE_ELEMENT&&this.startContainer.getName()in c||this.endContainer.type==CKEDITOR.NODE_ELEMENT&&this.endContainer.getName()in c)this.shrink(CKEDITOR.NODE_ELEMENT,true);var f=this.createBookmark(),d=f.startNode,k;if(!h)k=f.endNode;f=this.document.$.body.createTextRange();f.moveToElementText(d.$);
f.moveStart("character",1);if(k){e=this.document.$.body.createTextRange();e.moveToElementText(k.$);f.setEndPoint("EndToEnd",e);f.moveEnd("character",-1)}else{j=d.getNext(a);j=!(j&&j.getText&&j.getText().match(b))&&(e||!d.hasPrevious()||d.getPrevious().is&&d.getPrevious().is("br"));g=this.document.createElement("span");g.setHtml("&#65279;");g.insertBefore(d);j&&this.document.createText("").insertBefore(d)}this.setStartBefore(d);d.remove();if(h){if(j){f.moveStart("character",-1);f.select();this.document.$.selection.clear()}else f.select();
this.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START);g.remove()}else{this.setEndBefore(k);k.remove();f.select()}this.document.fire("selectionchange")}:function(){var e=this.startContainer;this.collapsed&&e.type==CKEDITOR.NODE_ELEMENT&&!e.getChildCount()&&e.append(new CKEDITOR.dom.text(""));var h=this.document.$.createRange();h.setStart(e.$,this.startOffset);try{h.setEnd(this.endContainer.$,this.endOffset)}catch(j){if(j.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0){this.collapse(true);h.setEnd(this.endContainer.$,
this.endOffset)}else throw j;}if(e=this.document.getSelection().getNative()){e.removeAllRanges();e.addRange(h)}}})();
(function(){var a={elements:{$:function(b){var c=b.attributes;if((c=(c=(c=c&&c["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(c)))&&c.children[0])&&b.attributes["data-cke-resizable"]){var e=b.attributes.style;if(e){var h=/(?:^|\s)width\s*:\s*(\d+)/i.exec(e);b=h&&h[1];e=(h=/(?:^|\s)height\s*:\s*(\d+)/i.exec(e))&&h[1];if(b)c.attributes.width=b;if(e)c.attributes.height=e}}return c}}};CKEDITOR.plugins.add("fakeobjects",{requires:["htmlwriter"],afterInit:function(b){(b=
(b=b.dataProcessor)&&b.htmlFilter)&&b.addRules(a)}})})();CKEDITOR.editor.prototype.createFakeElement=function(a,b,c,e){var h=this.lang.fakeobjects;h=h[c]||h.unknown;a={"class":b,src:CKEDITOR.getUrl("images/spacer.gif"),"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:h,title:h,align:a.getAttribute("align")||""};if(c)a["data-cke-real-element-type"]=c;if(e)a["data-cke-resizable"]=e;return this.document.createElement("img",{attributes:a})};
CKEDITOR.editor.prototype.createFakeParserElement=function(a,b,c,e){var h=this.lang.fakeobjects;h=h[c]||h.unknown;var j;j=new CKEDITOR.htmlParser.basicWriter;a.writeHtml(j);j=j.getHtml();a={"class":b,src:CKEDITOR.getUrl("images/spacer.gif"),"data-cke-realelement":encodeURIComponent(j),"data-cke-real-node-type":a.type,alt:h,title:h,align:a.attributes.align||""};if(c)a["data-cke-real-element-type"]=c;if(e)a["data-cke-resizable"]=e;return new CKEDITOR.htmlParser.element("img",a)};
CKEDITOR.editor.prototype.restoreRealElement=function(a){if(a.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;return CKEDITOR.dom.element.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document)};CKEDITOR.plugins.add("richcombo",{requires:["floatpanel","listblock","button"],beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});CKEDITOR.UI_RICHCOMBO=3;
CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{title:a.label,modes:{wysiwyg:1}});a=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=a&&a.parent&&a.parent.getDocument()||CKEDITOR.document;a.className=(a.className||"")+" cke_rcombopanel";a.block={multiSelect:a.multiSelect,attributes:a.attributes};this._={panelDefinition:a,items:{},state:CKEDITOR.TRISTATE_OFF}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}},
proto:{renderHtml:function(a){var b=[];this.render(a,b);return b.join("")},render:function(a,b){var c=CKEDITOR.env,e="cke_"+this.id,h=CKEDITOR.tools.addFunction(function(f){var d=this._;if(d.state!=CKEDITOR.TRISTATE_DISABLED){this.createPanel(a);if(d.on)d.panel.hide();else{this.commit();var k=this.getValue();k?d.list.mark(k):d.list.unmarkAll();d.panel.showBlock(this.id,new CKEDITOR.dom.element(f),4)}}},this),j={id:e,combo:this,focus:function(){CKEDITOR.document.getById(e).getChild(1).focus()},clickFn:h};
a.on("mode",function(){this.setState(this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);this.setValue("")},this);var g=CKEDITOR.tools.addFunction(function(f,d){f=new CKEDITOR.dom.event(f);var k=f.getKeystroke();switch(k){case 13:case 32:case 40:CKEDITOR.tools.callFunction(h,d);break;default:j.onkey(j,k)}f.preventDefault()});j.keyDownFn=g;b.push('<span class="cke_rcombo">',"<span id=",e);this.className&&b.push(' class="',this.className,' cke_off"');b.push(">",'<span id="'+e+'_label" class=cke_label>',
this.label,"</span>",'<a hidefocus=true title="',this.title,'" tabindex="-1"',c.gecko&&c.version>=10900&&!c.hc?"":" href=\"javascript:void('"+this.label+"')\"",' role="button" aria-labelledby="',e,'_label" aria-describedby="',e,'_text" aria-haspopup="true"');if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)b.push(' onkeypress="return false;"');CKEDITOR.env.gecko&&b.push(' onblur="this.style.cssText = this.style.cssText;"');b.push(' onkeydown="CKEDITOR.tools.callFunction( ',g,', event, this );" onclick="CKEDITOR.tools.callFunction(',
h,', this); return false;"><span><span id="'+e+'_text" class="cke_text cke_inline_label">'+this.label+"</span></span><span class=cke_openbutton>"+(CKEDITOR.env.hc?"<span>&#9660;</span>":CKEDITOR.env.air?"&nbsp;":"")+"</span></a></span></span>");if(this.onRender)this.onRender();return j},createPanel:function(a){if(!this._.panel){var b=this._.panelDefinition,c=this._.panelDefinition.block,e=b.parent||CKEDITOR.document.getBody(),h=new CKEDITOR.ui.floatPanel(a,e,b),j=h.addListBlock(this.id,c),g=this;
h.onShow=function(){a.fire("panelShow",{panel:this,me:g});g.className&&this.element.getFirst().addClass(g.className+"_panel");g.setState(CKEDITOR.TRISTATE_ON);j.focus(!g.multiSelect&&g.getValue());g._.on=1;if(g.onOpen)g.onOpen()};h.onHide=function(f){g.className&&this.element.getFirst().removeClass(g.className+"_panel");g.setState(g.modes&&g.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);g._.on=0;if(!f&&g.onClose)g.onClose()};h.onEscape=function(){h.hide();g.document.getById("cke_"+
g.id).getFirst().getNext().focus()};j.onClick=function(f,d){a.fire("panelClick",{panel:this,me:g,value:f});g.document.getWindow().focus();g.onClick&&g.onClick.call(g,f,d);d?g.setValue(f,g._.items[f]):g.setValue("");h.hide()};this._.panel=h;this._.list=j;h.getBlock(this.id).onHide=function(){g._.on=0;g.setState(CKEDITOR.TRISTATE_OFF)};a.on("toolbartabswitch",function(){g._.on&&h.hide()});this.init&&this.init()}},setValue:function(a,b){this._.value=a;var c=this.document.getById("cke_"+this.id+"_text");
if(c){if(a||b)c.removeClass("cke_inline_label");else{b=this.label;c.addClass("cke_inline_label")}c.setHtml(typeof b!="undefined"?b:a)}},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,b,c){this._.items[a]=c||a;this._.list.add(a,b,c)},startGroup:function(a){this._.list.startGroup(a)},
commit:function(){if(!this._.committed){this._.list.commit();this._.committed=1;CKEDITOR.ui.fire("ready",this)}this._.committed=1},setState:function(a){if(this._.state!=a){this.document.getById("cke_"+this.id).setState(a);this._.state=a}}}});CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b)};CKEDITOR.plugins.add("htmlwriter");
CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" />";this.lineBreakChars="\n";this.forceSimpleAmpersand=0;this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var a=CKEDITOR.dtd,b;for(b in CKEDITOR.tools.extend({},a.$nonBodyContent,a.$block,a.$listItem,a.$tableContent))this.setRules(b,{indent:1,breakBeforeOpen:1,breakAfterOpen:1,breakBeforeClose:!a[b]["#"],
breakAfterClose:1});this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{indent:0})},proto:{openTag:function(a){var b=this._.rules[a];if(this._.indent)this.indentation();else if(b&&b.breakBeforeOpen){this.lineBreak();this.indentation()}this._.output.push("<",a)},openTagClose:function(a,b){var c=this._.rules[a];if(b)this._.output.push(this.selfClosingEnd);else{this._.output.push(">");if(c&&
c.indent)this._.indentation+=this.indentationChars}c&&c.breakAfterOpen&&this.lineBreak();a=="pre"&&(this._.inPre=1)},attribute:function(a,b){if(typeof b=="string"){this.forceSimpleAmpersand&&(b=b.replace(/&amp;/g,"&"));b=CKEDITOR.tools.htmlEncodeAttr(b)}this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){var b=this._.rules[a];if(b&&b.indent)this._.indentation=this._.indentation.substr(this.indentationChars.length);if(this._.indent)this.indentation();else if(b&&b.breakBeforeClose){this.lineBreak();
this.indentation()}this._.output.push("</",a,">");a=="pre"&&(this._.inPre=0);b&&b.breakAfterClose&&this.lineBreak()},text:function(a){if(this._.indent){this.indentation();!this._.inPre&&(a=CKEDITOR.tools.ltrim(a))}this._.output.push(a)},comment:function(a){this._.indent&&this.indentation();this._.output.push("<\!--",a,"--\>")},lineBreak:function(){!this._.inPre&&this._.output.length>0&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){this._.inPre||this._.output.push(this._.indentation);
this._.indent=0},setRules:function(a,b){var c=this._.rules[a];if(c)CKEDITOR.tools.extend(c,b,true);else this._.rules[a]=b}}});CKEDITOR.plugins.add("menubutton",{requires:["button","menu"],beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});CKEDITOR.UI_MENUBUTTON=5;
(function(){var a=function(b){var c=this._;if(c.state!==CKEDITOR.TRISTATE_DISABLED){c.previousState=c.state;var e=c.menu;if(!e){e=c.menu=new CKEDITOR.menu(b,{panel:{className:b.skinClass+" cke_contextmenu",attributes:{"aria-label":b.lang.common.options}}});e.onHide=CKEDITOR.tools.bind(function(){this.setState(this.modes&&this.modes[b.mode]?c.previousState:CKEDITOR.TRISTATE_DISABLED)},this);this.onMenu&&e.addListener(this.onMenu)}if(c.on)e.hide();else{this.setState(CKEDITOR.TRISTATE_ON);e.show(CKEDITOR.document.getById(this._.id),
4)}}};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(b){delete b.panel;this.base(b);this.hasArrow=true;this.click=a},statics:{handler:{create:function(b){return new CKEDITOR.ui.menuButton(b)}}}})})();CKEDITOR.plugins.add("dialogui");
(function(){var a=function(f){this._||(this._={});this._["default"]=this._.initValue=f["default"]||"";this._.required=f.required||false;for(var d=[this._],k=1;k<arguments.length;k++)d.push(arguments[k]);d.push(true);CKEDITOR.tools.extend.apply(CKEDITOR.tools,d);return this._},b={build:function(f,d,k){return new CKEDITOR.ui.dialog.textInput(f,d,k)}},c={build:function(f,d,k){return new CKEDITOR.ui.dialog[d.type](f,d,k)}},e={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(f){this.setValue(this.getInitValue(),
f)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},h=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(f,d){if(!this._.domOnChangeRegistered){f.on("load",function(){this.getInputElement().on("change",function(){f.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this);this._.domOnChangeRegistered=true}this.on("change",
d)}},true),j=/^on([A-Z]\w+)/,g=function(f){for(var d in f)if(j.test(d)||d=="title"||d=="type")delete f[d];return f};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(f,d,k,l){if(!(arguments.length<4)){var m=a.call(this,d);m.labelId=CKEDITOR.tools.getNextId()+"_label";this._.children=[];CKEDITOR.ui.dialog.uiElement.call(this,f,d,k,"div",null,{role:"presentation"},function(){var p=[],r=d.required?" cke_required":"";if(d.labelLayout!="horizontal")p.push('<label class="cke_dialog_ui_labeled_label'+
r+'" ',' id="'+m.labelId+'"',' for="'+m.inputId+'"',' style="'+d.labelStyle+'">',d.label,"</label>",'<div class="cke_dialog_ui_labeled_content" role="presentation">',l.call(this,f,d),"</div>");else{r={type:"hbox",widths:d.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+r+'" id="'+m.labelId+'" for="'+m.inputId+'" style="'+d.labelStyle+'">'+CKEDITOR.tools.htmlEncode(d.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+l.call(this,
f,d)+"</span>"}]};CKEDITOR.dialog._.uiElementBuilders.hbox.build(f,r,p)}return p.join("")})}},textInput:function(f,d,k){if(!(arguments.length<3)){a.call(this,d);var l=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",m={"class":"cke_dialog_ui_input_"+d.type,id:l,type:"text"};if(d.validate)this.validate=d.validate;if(d.maxLength)m.maxlength=d.maxLength;if(d.size)m.size=d.size;if(d.controlStyle)m.style=d.controlStyle;var p=this,r=false;f.on("load",function(){p.getInputElement().on("keydown",function(u){if(u.data.getKeystroke()==
13)r=true});p.getInputElement().on("keyup",function(u){if(u.data.getKeystroke()==13&&r){f.getButton("ok")&&setTimeout(function(){f.getButton("ok").click()},0);r=false}},null,null,1E3)});CKEDITOR.ui.dialog.labeledElement.call(this,f,d,k,function(){var u=['<div class="cke_dialog_ui_input_',d.type,'" role="presentation"'];d.width&&u.push('style="width:'+d.width+'" ');u.push("><input ");m["aria-labelledby"]=this._.labelId;this._.required&&(m["aria-required"]=this._.required);for(var n in m)u.push(n+'="'+
m[n]+'" ');u.push(" /></div>");return u.join("")})}},textarea:function(f,d,k){if(!(arguments.length<3)){a.call(this,d);var l=this,m=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",p={};if(d.validate)this.validate=d.validate;p.rows=d.rows||5;p.cols=d.cols||20;CKEDITOR.ui.dialog.labeledElement.call(this,f,d,k,function(){p["aria-labelledby"]=this._.labelId;this._.required&&(p["aria-required"]=this._.required);var r=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea class="cke_dialog_ui_input_textarea" id="',
m,'" '],u;for(u in p)r.push(u+'="'+CKEDITOR.tools.htmlEncode(p[u])+'" ');r.push(">",CKEDITOR.tools.htmlEncode(l._["default"]),"</textarea></div>");return r.join("")})}},checkbox:function(f,d,k){if(!(arguments.length<3)){var l=a.call(this,d,{"default":!!d["default"]});if(d.validate)this.validate=d.validate;CKEDITOR.ui.dialog.uiElement.call(this,f,d,k,"span",null,null,function(){var m=CKEDITOR.tools.extend({},d,{id:d.id?d.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},true),p=[],r=CKEDITOR.tools.getNextId()+
"_label",u={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":r};g(m);if(d["default"])u.checked="checked";if(typeof m.controlStyle!="undefined")m.style=m.controlStyle;l.checkbox=new CKEDITOR.ui.dialog.uiElement(f,m,p,"input",null,u);p.push(' <label id="',r,'" for="',u.id,'">',CKEDITOR.tools.htmlEncode(d.label),"</label>");return p.join("")})}},radio:function(f,d,k){if(!(arguments.length<3)){a.call(this,d);if(!this._["default"])this._["default"]=this._.initValue=d.items[0][1];
if(d.validate)this.validate=d.valdiate;var l=[],m=this;CKEDITOR.ui.dialog.labeledElement.call(this,f,d,k,function(){for(var p=[],r=[],u=d.id?d.id+"_radio":CKEDITOR.tools.getNextId()+"_radio",n=0;n<d.items.length;n++){var s=d.items[n],q=s[2]!==undefined?s[2]:s[0],w=s[1]!==undefined?s[1]:s[0],y=CKEDITOR.tools.getNextId()+"_radio_input",H=y+"_label";y=CKEDITOR.tools.extend({},d,{id:y,title:null,type:null},true);q=CKEDITOR.tools.extend({},y,{title:q},true);var D={type:"radio","class":"cke_dialog_ui_radio_input",
name:u,value:w,"aria-labelledby":H},B=[];if(m._["default"]==w)D.checked="checked";g(y);g(q);if(typeof y.controlStyle!="undefined")y.style=y.controlStyle;l.push(new CKEDITOR.ui.dialog.uiElement(f,y,B,"input",null,D));B.push(" ");new CKEDITOR.ui.dialog.uiElement(f,q,B,"label",null,{id:H,"for":D.id},s[0]);p.push(B.join(""))}new CKEDITOR.ui.dialog.hbox(f,[],p,r);return r.join("")});this._.children=l}},button:function(f,d,k){if(arguments.length){if(typeof d=="function")d=d(f.getParentEditor());a.call(this,
d,{disabled:d.disabled||false});CKEDITOR.event.implementOn(this);var l=this;f.on("load",function(){var r=this.getElement();(function(){r.on("click",function(u){l.fire("click",{dialog:l.getDialog()});u.data.preventDefault()});r.on("keydown",function(u){if(u.data.getKeystroke()in{32:1}){l.click();u.data.preventDefault()}})})();r.unselectable()},this);if(typeof d["class"]!="undefined")d["class"]=d["class"].replace(/cke_dialog_ui_button_cancel/,"secondary").replace(/cke_dialog_ui_button_(\w+)/,"")+" wikia-button";
if(typeof d.className!="undefined"){d.className+=" wikia-button";if(typeof d.buttonType!="undefined")d.className+=" "+d.buttonType}else d.className="wikia-button";var m=CKEDITOR.tools.extend({},d);delete m.style;var p=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,f,m,k,"a",null,{style:d.style,href:"javascript:void(0)",title:d.label,hidefocus:"true","class":d["class"],role:"button","aria-labelledby":p},'<span id="'+p+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(d.label)+
"</span>")}},select:function(f,d,k){if(!(arguments.length<3)){var l=a.call(this,d);if(d.validate)this.validate=d.validate;l.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,f,d,k,function(){var m=CKEDITOR.tools.extend({},d,{id:d.id?d.id+"_select":CKEDITOR.tools.getNextId()+"_select"},true),p=[],r=[],u={id:l.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};if(d.size!=undefined)u.size=d.size;if(d.multiple!=undefined)u.multiple=d.multiple;
g(m);for(var n=0,s;n<d.items.length&&(s=d.items[n]);n++)r.push('<option value="',CKEDITOR.tools.htmlEncode(s[1]!==undefined?s[1]:s[0]),'" /> ',CKEDITOR.tools.htmlEncode(s[0]));if(typeof m.controlStyle!="undefined")m.style=m.controlStyle;l.select=new CKEDITOR.ui.dialog.uiElement(f,m,p,"select",null,u,r.join(""));return p.join("")})}},file:function(f,d,k){if(!(arguments.length<3)){if(d["default"]===undefined)d["default"]="";var l=CKEDITOR.tools.extend(a.call(this,d),{definition:d,buttons:[]});if(d.validate)this.validate=
d.validate;f.on("load",function(){CKEDITOR.document.getById(l.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,f,d,k,function(){l.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var m=CKEDITOR.env.isCustomDomain(),p=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',l.frameId,'" title="',d.label,'" src="javascript:void('];p.push(m?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":
"0");p.push(')"></iframe>');return p.join("")})}},fileButton:function(f,d,k){if(!(arguments.length<3)){a.call(this,d);var l=this;if(d.validate)this.validate=d.validate;var m=CKEDITOR.tools.extend({},d),p=m.onClick;m.className=(m.className?m.className+" ":"")+"cke_dialog_ui_button";m.onClick=function(r){var u=d["for"];if(!p||p.call(this,r)!==false){f.getContentElement(u[0],u[1]).submit();this.disable()}};f.on("load",function(){f.getContentElement(d["for"][0],d["for"][1])._.buttons.push(l)});CKEDITOR.ui.dialog.button.call(this,
f,m,k)}},html:function(){var f=/^\s*<[\w:]+\s+([^>]*)?>/,d=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,k=/\/$/;return function(l,m,p){if(!(arguments.length<3)){var r=[],u=m.html;if(u.charAt(0)!="<")u="<span>"+u+"</span>";var n=m.focus;if(n){var s=this.focus;this.focus=function(){s.call(this);typeof n=="function"&&n.call(this);this.fire("focus")};if(m.isFocusable)this.isFocusable=this.isFocusable;this.keyboardFocusable=true}CKEDITOR.ui.dialog.uiElement.call(this,l,m,r,"span",null,null,"");r=r.join("").match(f);
u=u.match(d)||["","",""];if(k.test(u[1])){u[1]=u[1].slice(0,-1);u[2]="/"+u[2]}p.push([u[1]," ",r[1]||"",u[2]].join(""))}}}(),fieldset:function(f,d,k,l,m){var p=m.label;this._={children:d};CKEDITOR.ui.dialog.uiElement.call(this,f,m,l,"fieldset",null,null,function(){var r=[];p&&r.push("<legend>"+p+"</legend>");for(var u=0;u<k.length;u++)r.push(k[u]);return r.join("")})}},true);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,
{setLabel:function(f){var d=CKEDITOR.document.getById(this._.labelId);if(d.getChildCount()<1)(new CKEDITOR.dom.text(f,CKEDITOR.document)).appendTo(d);else d.getChild(0).$.nodeValue=f;return this},getLabel:function(){var f=CKEDITOR.document.getById(this._.labelId);return!f||f.getChildCount()<1?"":f.getChild(0).getText()},eventProcessors:h},true);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){if(!this._.disabled)return this.fire("click",
{dialog:this._.dialog});this.getElement().$.blur();return false},enable:function(){this._.disabled=false;var f=this.getElement();f&&f.removeClass("cke_disabled")},disable:function(){this._.disabled=true;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(f,d){this.on("click",d)}},
true),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:true},true);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var f=this.selectParentTab();setTimeout(function(){var d=f.getInputElement();d&&d.$.focus()},0)},select:function(){var f=this.selectParentTab();setTimeout(function(){var d=f.getInputElement();if(d){d.$.focus();
d.$.select()}},0)},accessKeyUp:function(){this.select()},setValue:function(f){!f&&(f="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:true},e,true);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(f,d,k){var l=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),
m=this.getInputElement().$;l.$.text=f;l.$.value=d===undefined||d===null?f:d;if(k===undefined||k===null)CKEDITOR.env.ie?m.add(l.$):m.add(l.$,null);else m.add(l.$,k);return this},remove:function(f){this.getInputElement().$.remove(f);return this},clear:function(){for(var f=this.getInputElement().$;f.length>0;)f.remove(0);return this},keyboardFocusable:true},e,true);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},
setValue:function(f,d){this.getInputElement().$.checked=f;!d&&this.fire("change",{value:f})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(f,d){if(CKEDITOR.env.ie){f.on("load",function(){var k=this._.checkbox.getElement();k.on("propertychange",function(l){l=l.data.$;l.propertyName=="checked"&&this.fire("change",{value:k.$.checked})},this)},this);this.on("change",d)}else return h.onChange.apply(this,
arguments);return null}},keyboardFocusable:true},e,true);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(f,d){for(var k=this._.children,l,m=0;m<k.length&&(l=k[m]);m++)l.getElement().$.checked=l.getValue()==f;!d&&this.fire("change",{value:f})},getValue:function(){for(var f=this._.children,d=0;d<f.length;d++)if(f[d].getElement().$.checked)return f[d].getValue();return null},accessKeyUp:function(){var f=this._.children,d;for(d=0;d<f.length;d++)if(f[d].getElement().$.checked){f[d].getElement().focus();
return}f[0].getElement().focus()},eventProcessors:{onChange:function(f,d){if(CKEDITOR.env.ie){f.on("load",function(){for(var k=this._.children,l=this,m=0;m<k.length;m++)k[m].getElement().on("propertychange",function(p){p=p.data.$;p.propertyName=="checked"&&this.$.checked&&l.fire("change",{value:this.getAttribute("value")})})},this);this.on("change",d)}else return h.onChange.apply(this,arguments);return null}},keyboardFocusable:true},e,true);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,
e,{getInputElement:function(){var f=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return f.$.forms.length>0?new CKEDITOR.dom.element(f.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(f){var d=/^on([A-Z]\w+)/,k,l=function(p,r,u,n){p.on("formLoaded",function(){p.getInputElement().on(u,n,p)})},m;for(m in f)if(k=m.match(d))this.eventProcessors[m]?
this.eventProcessors[m].call(this,this._.dialog,f[m]):l(this,this._.dialog,k[1].toLowerCase(),f[m]);return this},reset:function(){function f(){k.$.open();if(CKEDITOR.env.isCustomDomain())k.$.domain=document.domain;var s="";if(l.size)s=l.size-(CKEDITOR.env.ie?7:0);k.$.write(['<html dir="'+u+'" lang="'+n+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+u+'" lang="'+n+'" action="',CKEDITOR.tools.htmlEncode(l.action),
'"><input type="file" name="',CKEDITOR.tools.htmlEncode(l.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(s>0?s:""),'" /></form></body></html>',"<script>window.parent.CKEDITOR.tools.callFunction("+p+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+r+")}<\/script>"].join(""));k.$.close();for(s=0;s<m.length;s++)m[s].enable()}var d=this._,k=CKEDITOR.document.getById(d.frameId).getFrameDocument(),l=d.definition,m=d.buttons,p=this.formLoadedNumber,r=this.formUnloadNumber,
u=d.dialog._.editor.lang.dir,n=d.dialog._.editor.langCode;if(!p){p=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this);r=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this);this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(p);CKEDITOR.tools.removeFunction(r)})}CKEDITOR.env.gecko?setTimeout(f,500):f()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=
""},eventProcessors:{onChange:function(f,d){if(!this._.domOnChangeRegistered){this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this);this._.domOnChangeRegistered=true}this.on("change",d)}},keyboardFocusable:true},true);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",b);
CKEDITOR.dialog.addUIElement("password",b);CKEDITOR.dialog.addUIElement("textarea",c);CKEDITOR.dialog.addUIElement("checkbox",c);CKEDITOR.dialog.addUIElement("radio",c);CKEDITOR.dialog.addUIElement("button",c);CKEDITOR.dialog.addUIElement("select",c);CKEDITOR.dialog.addUIElement("file",c);CKEDITOR.dialog.addUIElement("fileButton",c);CKEDITOR.dialog.addUIElement("html",c);CKEDITOR.dialog.addUIElement("fieldset",{build:function(f,d,k){for(var l=d.children,m,p=[],r=[],u=0;u<l.length&&(m=l[u]);u++){var n=
[];p.push(n);r.push(CKEDITOR.dialog._.uiElementBuilders[m.type].build(f,m,n))}return new CKEDITOR.ui.dialog[d.type](f,r,p,k,d)}})})();CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL=2;CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=a;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};
CKEDITOR.ui.panel.prototype={renderHtml:function(a){var b=[];this.render(a,b);return b.join("")},render:function(a,b){var c=this.id;b.push('<div class="',a.skinClass,'" lang="',a.langCode,'" role="presentation" style="display:none;z-index:'+(a.config.baseFloatZIndex+1)+'"><div id=',c," dir=",a.lang.dir,' role="presentation" class="cke_panel cke_',a.lang.dir);this.className&&b.push(" ",this.className);b.push('">');if(this.forceIFrame||this.css.length){b.push('<iframe id="',c,'_frame" frameborder="0" role="application" src="javascript:void(');
b.push(CKEDITOR.env.isCustomDomain()?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0");b.push(')"></iframe>')}b.push("</div></div>");return c},getHolderElement:function(){var a=this._.holder;if(!a){if(this.forceIFrame||this.css.length){var b=this.document.getById(this.id+"_frame"),c=b.getParent();a=c.getAttribute("dir");var e=c.getParent().getAttribute("class");c=c.getParent().getAttribute("lang");var h=b.getFrameDocument();b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=
true;if(this.onLoad)this.onLoad()},this));a='<!DOCTYPE html><html dir="'+a+'" class="'+e+'_container" lang="'+c+'"><head><style>.'+e+'_container{visibility:hidden}</style></head><body class="cke_'+a+" cke_panel_frame "+CKEDITOR.env.cssClass+'" style="margin:0;padding:0" onload="( window.CKEDITOR || window.parent.CKEDITOR ).tools.callFunction('+b+');"></body>'+CKEDITOR.tools.buildStyleHtml(this.css)+"</html>";h.write(a);h.getWindow().$.CKEDITOR=CKEDITOR;h.on("key"+(CKEDITOR.env.opera?"press":"down"),
function(j){var g=j.data.getKeystroke(),f=this.document.getById(this.id).getAttribute("dir");if(this._.onKeyDown&&this._.onKeyDown(g)===false)j.data.preventDefault();else if(g==27||g==(f=="rtl"?39:37))this.onEscape&&this.onEscape(g)===false&&j.data.preventDefault()},this);a=h.getBody();a.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id);this._.holder=a}return a},addBlock:function(a,b){b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),
b);this._.currentBlock||this.showBlock(a);return b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var b=this._.currentBlock,c=this.forceIFrame?this.document.getById(this.id+"_frame"):this._.holder;c.getParent().getParent().disableContextMenu();if(b){c.removeAttributes(b.attributes);b.hide()}this._.currentBlock=a;c.setAttributes(a.attributes);CKEDITOR.fire("ariaWidget",c);a._.focusIndex=-1;this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a);a.onMark=
function(e){c.setAttribute("aria-activedescendant",e.getId()+"_option")};a.onUnmark=function(){c.removeAttribute("aria-activedescendant")};a.show();return a},destroy:function(){this.element&&this.element.remove()}};
CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabIndex:-1,"class":"cke_panel_block",role:"presentation"},styles:{display:"none"}}));b&&CKEDITOR.tools.extend(this,b);if(!this.attributes.title)this.attributes.title=this.attributes["aria-label"];this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(a){if(a!=-1){a=this.element.getElementsByTag("a").getItem(this._.focusIndex=
a);if(CKEDITOR.env.webkit||CKEDITOR.env.opera)a.getDocument().getWindow().focus();a.focus();this.onMark&&this.onMark(a)}}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){if(!this.onHide||this.onHide.call(this)!==true)this.element.setStyle("display","none")},onKeyDown:function(a){switch(this.keys[a]){case "next":a=this._.focusIndex;for(var b=this.element.getElementsByTag("a"),c;c=b.getItem(++a);)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=a;c.focus();
break}return false;case "prev":a=this._.focusIndex;for(b=this.element.getElementsByTag("a");a>0&&(c=b.getItem(--a));)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=a;c.focus();break}return false;case "click":a=this._.focusIndex;if(c=a>=0&&this.element.getElementsByTag("a").getItem(a))c.$.click?c.$.click():c.$.onclick();return false}return true}}});
CKEDITOR.plugins.add("listblock",{requires:["panel"],onLoad:function(){CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){b=b||{};var c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=true);!c.role&&(c.role="listbox");this.base.apply(this,arguments);c=this.keys;c[40]="next";c[9]=
"next";c[38]="prev";c[CKEDITOR.SHIFT+9]="prev";c[32]="click";this._.pendingHtml=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){this._.pendingHtml.push("</ul>");delete this._.started}},getClick:function(){if(!this._.click)this._.click=CKEDITOR.tools.addFunction(function(a){var b=true;if(this.multiSelect)b=this.toggle(a);else this.mark(a);if(this.onClick)this.onClick(a,b)},this);return this._.click}},proto:{add:function(a,b,c){var e=this._.pendingHtml,h=CKEDITOR.tools.getNextId();
if(!this._.started){e.push('<ul role="presentation" class=cke_panel_list>');this._.started=1;this._.size=this._.size||0}this._.items[a]=h;e.push("<li id=",h,' class=cke_panel_listItem role=presentation><a id="',h,'_option" _cke_focus=1 hidefocus=true title="',c||a,'" href="javascript:void(\'',a,'\')" onclick="CKEDITOR.tools.callFunction(',this._.getClick(),",'",a,"'); return false;\"",' role="option" aria-posinset="'+ ++this._.size+'">',b||a,"</a></li>")},startGroup:function(a){this._.close();var b=
CKEDITOR.tools.getNextId();this._.groups[a]=b;this._.pendingHtml.push('<h1 role="presentation" id=',b," class=cke_panel_grouptitle>",a,"</h1>")},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));var a=this._.items,b=this.element.getDocument(),c;for(c in a)b.getById(a[c]+"_option").setAttribute("aria-setsize",this._.size);delete this._.size;this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);b?this.unmark(a):this.mark(a);return!b},hideGroup:function(a){var b=
(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();if(a){a.setStyle("display","none");b&&b.getName()=="ul"&&b.setStyle("display","none")}},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,b=this._.groups,c=this.element.getDocument(),e;for(e in a)c.getById(a[e]).setStyle("display","");for(var h in b){a=c.getById(b[h]);e=a.getNext();a.setStyle("display","");e&&e.getName()=="ul"&&e.setStyle("display",
"")}},mark:function(a){this.multiSelect||this.unmarkAll();a=this._.items[a];var b=this.element.getDocument().getById(a);b.addClass("cke_selected");this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",true);this.element.setAttribute("aria-activedescendant",a+"_option");this.onMark&&this.onMark(b)},unmark:function(a){this.element.getDocument().getById(this._.items[a]).removeClass("cke_selected");this.onUnmark&&this.onUnmark(this._.items[a])},unmarkAll:function(){var a=this._.items,
b=this.element.getDocument(),c;for(c in a)b.getById(a[c]).removeClass("cke_selected");this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;if(a){var b=this.element.getDocument().getById(this._.items[a]).getFirst();a=this.element.getElementsByTag("a");for(var c,e=-1;c=a.getItem(++e);)if(c.equals(b)){this._.focusIndex=e;break}setTimeout(function(){b.focus()},0)}}}})}});
CKEDITOR.themes.add("default",function(){function a(b,c){var e,h;if(h=(h=(h=b.config.sharedSpaces)&&h[c])&&CKEDITOR.document.getById(h)){var j=h.append(CKEDITOR.dom.element.createFromHtml('<span class="cke_shared " dir="'+b.lang.dir+'"><span class="'+b.skinClass+" "+b.id+" cke_editor_"+b.name+'"><span class="'+CKEDITOR.env.cssClass+'"><span class="cke_wrapper cke_'+b.lang.dir+'"><span class="cke_editor"><div class="cke_'+c+'"></div></span></span></span></span></span>',h.getDocument()));h.getCustomData("cke_hasshared")?
j.hide():h.setCustomData("cke_hasshared",1);e=j.getChild([0,0,0,0]);!b.sharedSpaces&&(b.sharedSpaces={});b.sharedSpaces[c]=e;b.on("focus",function(){for(var g=0,f,d=h.getChildren();f=d.getItem(g);g++)f.type==CKEDITOR.NODE_ELEMENT&&!f.equals(j)&&f.hasClass("cke_shared")&&f.hide();j.show()});b.on("destroy",function(){j.remove()})}return e}return{build:function(b){var c=b.name,e=b.element,h=b.elementMode;if(!(!e||h==CKEDITOR.ELEMENT_MODE_NONE)){h==CKEDITOR.ELEMENT_MODE_REPLACE&&e.hide();var j=b.fire("themeSpace",
{space:"top",html:""}).html,g=b.fire("themeSpace",{space:"contents",html:""}).html,f=b.fireOnce("themeSpace",{space:"bottom",html:""}).html,d=g&&b.config.height,k=b.config.tabIndex||b.element.getAttribute("tabindex")||0;if(g)isNaN(d)||(d+="px");else d="auto";var l="",m=b.config.width;if(m){isNaN(m)||(m+="px");l+="width: "+m+";"}m=j&&a(b,"top");var p=a(b,"bottom");m&&(m.setHtml(j),j="");p&&(p.setHtml(f),f="");var r=CKEDITOR.dom.element.createFromHtml(['<span id="cke_',c,'" class="',b.skinClass," ",
b.id," cke_editor_",c,'" dir="',b.lang.dir,'" title="',CKEDITOR.env.gecko?" ":"",'" lang="',b.langCode,'"'+(CKEDITOR.env.webkit?' tabindex="'+k+'"':"")+' role="application" aria-labelledby="cke_',c,'_arialbl"'+(l?' style="'+l+'"':"")+'><span id="cke_',c,'_arialbl" class="cke_voice_label">'+b.lang.editor+'</span><span class="',CKEDITOR.env.cssClass,'" role="presentation"><span class="cke_wrapper cke_',b.lang.dir,'" role="presentation"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0" role="presentation"><tbody><tr',
j?"":' style="display:none"',' role="presentation"><td id="cke_top_',c,'" class="cke_top" role="presentation">',j,"</td></tr><tr",g?"":' style="display:none"',' role="presentation"><td id="cke_contents_',c,'" class="cke_contents" style="height:',d,'" role="presentation">',g,"</td></tr><tr",f?"":' style="display:none"',' role="presentation"><td id="cke_bottom_',c,'" class="cke_bottom" role="presentation">',f,"</td></tr></tbody></table><style>.",b.skinClass,"{visibility:hidden;}</style></span></span></span>"].join(""));
r.getChild([1,0,0,0,0]).unselectable();r.getChild([1,0,0,0,2]).unselectable();h==CKEDITOR.ELEMENT_MODE_REPLACE?r.insertAfter(e):e.append(r);b.container=r;r.disableContextMenu();b.on("contentDirChanged",function(u){u=(b.lang.dir!=u.data?"add":"remove")+"Class";r.getChild(1)[u]("cke_mixed_dir_content");var n=this.sharedSpaces&&this.sharedSpaces[this.config.toolbarLocation];n&&n.getParent().getParent()[u]("cke_mixed_dir_content")});b.fireOnce("themeLoaded");b.fireOnce("uiReady")}},buildDialog:function(b){var c=
CKEDITOR.tools.getNextNumber();b=CKEDITOR.dom.element.createFromHtml(['<div class="',b.id,"_dialog cke_editor_",b.name.replace(".","\\."),"_dialog cke_skin_",b.skinName,'" dir="',b.lang.dir,'" lang="',b.langCode,'" role="dialog" aria-labelledby="%title#"><table class="cke_dialog'," "+CKEDITOR.env.cssClass," cke_",b.lang.dir,'" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="%body" role="presentation"><div id="%title#" class="%title" role="presentation"></div><a id="%close_button#" class="%close_button" href="javascript:void(0)" title="'+
b.lang.common.close+'" role="button"><span class="cke_label">X</span></a><div id="%tabs#" class="%tabs" role="tablist"></div><table class="%contents" role="presentation"><tr><td id="%contents#" class="%contents" role="presentation"></td></tr><tr><td id="%footer#" class="%footer" role="presentation"></td></tr></table></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>',
CKEDITOR.env.ie?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+c).replace(/%/g,"cke_dialog_"));c=b.getChild([0,0,0,0,0]);var e=c.getChild(0),h=c.getChild(1);e.unselectable();h.unselectable();return{element:b,parts:{dialog:b.getChild(0),title:e,close:h,tabs:c.getChild(2),contents:c.getChild([3,0,0,0]),footer:c.getChild([3,0,1,0])}}},destroy:function(b){var c=b.container,e=b.element;if(c){c.clearCustomData();c.remove()}if(e){e.clearCustomData();b.elementMode==
CKEDITOR.ELEMENT_MODE_REPLACE&&e.show();delete b.element}}}}());CKEDITOR.editor.prototype.getThemeSpace=function(a){a="cke_"+a;return this._[a]||(this._[a]=CKEDITOR.document.getById(a+"_"+this.name))};
CKEDITOR.editor.prototype.resize=function(a,b,c,e){var h=this.container,j=CKEDITOR.document.getById("cke_contents_"+this.name);e=e?h.getChild(1):h;CKEDITOR.env.webkit&&e.setStyle("display","none");e.setSize("width",a,true);CKEDITOR.env.webkit&&e.setStyle("display","");j.setStyle("height",Math.max(b-(c?0:(e.$.offsetHeight||0)-(j.$.clientHeight||0)),0)+"px");this.fire("resize")};CKEDITOR.editor.prototype.getResizable=function(){return this.container};
window.RTE={config:{alignableElements:["p","div","td","th"],baseFloatZIndex:1E3,bodyClass:"WikiaArticle",bodyId:"bodyContent",coreStyles_bold:{element:"b",overrides:"strong"},coreStyles_italic:{element:"i",overrides:"em"},customConfig:"",dialog_backgroundCoverColor:"#000",dialog_backgroundCoverOpacity:window.skin=="oasis"?0.8:0.5,disableDragDrop:false,disableObjectResizing:true,entities:false,forcePasteAsPlainText:CKEDITOR.env.webkit,forcePasteInDialog:CKEDITOR.env.webkit,format_tags:"p;h2;h3;h4;h5;pre",
height:400,language:window.wgUserLanguage,removePlugins:"about,elementspath,filebrowser,flash,forms,horizontalrule,image,justify,link,liststyle,maximize,newpage,pagebreak,toolbar,save,scayt,smiley,wsc",resize_enabled:false,skin:"wikia",startupFocus:false,theme:"wikia",toolbar:"Wikia",toolbarCanCollapse:false},instance:false,instanceId:window.RTEInstanceId,loaded:false,loadTime:false,stuffNode:false,plugins:["comment","dialog","dragdrop","edit-buttons","entities","gallery","justify","link","linksuggest",
"media","modeswitch","overlay","paste","placeholder","plbelement","poll","signature","spellchecker","template","temporary-save","toolbar","tools","track","widescreen"],log:function(a){$().log(a,"RTE")},ajax:function(a,b,c){if(typeof b!="object")b={};b.method=a;jQuery.post(window.wgScript+"?action=ajax&rs=RTEAjax",b,function(e){typeof c=="function"&&c(e)},"json")},track:function(){var a=["ckeditor"];for(i=0;i<arguments.length;i++)a.push(arguments[i]);typeof jQuery.tracker!="undefined"&&jQuery.tracker.byStr(a.join("/"))},
init:function(a){CKEDITOR.timestamp=window.wgStyleVersion;CKEDITOR.dtd.pre.img=1;CKEDITOR.dtd.p.center=1;CKEDITOR.dtd.table.img=1;RTE.config.startupMode=a;RTE.config.disableDragDrop=CKEDITOR.env.gecko&&(CKEDITOR.env.geckoRelease=="1.9.2.9"||CKEDITOR.env.geckoRelease=="1.9.2.10");RTE.config.disableDragDrop&&RTE.log("media drag&drop disabled");RTE.loadPlugins();RTE.stuffNode=$("<div>",{id:"RTEStuff"}).appendTo("body");RTE.instance=CKEDITOR.replace("wpTextbox1",RTE.config);RTE.loadCss();CKEDITOR.on("instanceReady",
RTE.onEditorReady);RTE.instance.on("modeSwitch",function(){RTE.modeSwitch(RTE.instance.mode)});RTE.instance.on("mode",function(){RTE.loading(false);RTE.log('mode "'+this.mode+'" is loaded')});RTE.instance.on("dataReady",function(){this.mode=="wysiwyg"&&this.fire("wysiwygModeReady")});RTE.instance.on("wysiwygModeReady",RTE.onWysiwygModeReady);RTE.instance.on("widescreen",RTE.onWidescreen);RTE.instance.on("getData",RTE.filterHtml);RTE.loading(true)},loadCss:function(){var a=[];if(window.skin=="oasis")RTE.instance.config.contentsCss=
$.getSassCommonURL("/extensions/wikia/RTE/css/oasis.scss");else{a.push(window.stylepath+"/monobook/main.css");a.push(CKEDITOR.basePath+"../css/RTEcontent.css")}a.push(window.RTESiteCss);typeof WikiaEnableAutoPageCreate!="undefined"&&a.push(wgExtensionsPath+"/wikia/AutoPageCreate/AutoPageCreate.css");GlobalTriggers.fire("rterequestcss",a);for(var b=0;b<a.length;b++){var c=a[b].indexOf("?")>-1||a[b].indexOf("__am")>-1?"":"?"+CKEDITOR.timestamp;RTE.instance.addCss("@import url("+a[b]+c+");")}CKEDITOR.env.ie&&
RTE.config.disableObjectResizing&&RTE.instance.addCss("img {behavior:url("+RTE.constants.localPath+"/css/behaviors/disablehandles.htc)}")},loadPlugins:function(){for(var a=[],b=0;b<RTE.plugins.length;b++){var c=RTE.plugins[b];a.push("rte-"+c);CKEDITOR.plugins.addExternal("rte-"+c,CKEDITOR.basePath+"../js/plugins/"+c+"/")}RTE.config.extraPlugins=a.join(",")},onEditorReady:function(){RTE.tools.getThemeColors();RTE.instance.dataProcessor.writer.indentationChars="";RTE.instance.dataProcessor.writer.lineBreakChars=
"";CKEDITOR.plugins.sourcearea.commands.source.exec=function(a){a.mode=="wysiwyg"&&a.fire("saveSnapshot");a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);a.fire("modeSwitch")};RTE.loaded=true;RTE.loading(false);RTE.loadTime=((new Date).getTime()-window.wgRTEStart.getTime())/1E3;RTE.log("CKEditor v"+CKEDITOR.version+" ("+(window.RTEDevMode?"in development mode":CKEDITOR.revision)+') is ready in "'+RTE.instance.mode+'" mode (loaded in '+RTE.loadTime+" s)");RTE.instance.fire("RTEready");
$(document.body).add(window).trigger("rteready");GlobalTriggers.fire("rteready",RTE.instance);RTE.repositionRTEStuff();$(window).bind("resize",RTE.repositionRTEStuff);RTE.config.startupFocus||wgEditFormType!="preview"&&wgEditFormType!="diff"&&setTimeout(function(){RTE.instance.focus()},100)},onWysiwygModeReady:function(){RTE.log("onWysiwygModeReady");RTE.getEditor().attr("id",RTE.instance.config.bodyId).addClass("lang-"+window.wgContentLanguage);setTimeout(function(){if(CKEDITOR.env.opera){var a=
RTE.getEditor().children().eq(0);a.is("br")&&a.remove()}},750)},onWidescreen:function(){RTE.repositionRTEStuff()},repositionRTEStuff:function(){RTE.stuffNode.css({left:0,top:0});var a=RTE.stuffNode.offset(),b=$("#cke_contents_wpTextbox1").offset();RTE.stuffNode.css({left:parseInt(b.left-a.left)+"px",top:parseInt(b.top-a.top)+"px"})},getEditor:function(){return jQuery(RTE.instance.document.$.body)},loading:function(a){a?$("body").addClass("RTEloading"):$("body").removeClass("RTEloading")},modeSwitch:function(a){RTE.log('switching from "'+
a+'" mode');var b=RTE.instance,c=b.getData(),e=function(){RTE.log("error occured during mode switch");RTE.loading(false);b.getCommand("source").setState(a=="wysiwyg"?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_ON);RTE.track("switchMode","error");$.showModal(b.lang.errorPopupTitle,b.lang.modeSwitch.error,{width:400})};RTE.loading(true);switch(a){case "wysiwyg":RTE.ajax("html2wiki",{html:c,title:window.wgPageName},function(h){if(h){b.setMode("source");b.setData(h.wikitext);RTE.track("switchMode","wysiwyg2source")}else e()});
break;case "source":RTE.ajax("wiki2html",{wikitext:c,title:window.wgPageName},function(h){if(h){if(typeof window.RTEEdgeCase!="undefined"&&window.RTEEdgeCase=="nowysiwyg"){RTE.log("article contains __NOWYSIWYG__ magic word");h.edgecase={type:window.RTEEdgeCase,info:{title:window.RTEMessages.edgecase.title,content:window.RTEMessages.edgecase.content}}}if(h.edgecase){RTE.log("edgecase found!");RTE.tools.alert(h.edgecase.info.title,h.edgecase.info.content);b.getCommand("source").setState(CKEDITOR.TRISTATE_ON);
RTE.loading(false);RTE.track("switchMode","edgecase",h.edgecase.type)}else{b.setMode("wysiwyg");b.setData(h.html);RTE.instanceId=h.instanceId;RTE.track("switchMode","source2wysiwyg")}}else e()})}},filterHtml:function(a){if(a.editor.mode=="wysiwyg")a.data.dataValue=a.data.dataValue.replace(' data-rte-instance="'+RTE.instanceId+'"',"").replace(/<div firebug[^>]+>[^<]+<\/div>/g,"")},constants:{localPath:window.RTELocalPath,urlProtocols:window.RTEUrlProtocols,validTitleChars:window.RTEValidTitleChars},
messages:window.RTEMessages};CKEDITOR.config.bodyId="";CKEDITOR.config.baseBackgroundColor="#ddd";CKEDITOR.config.baseColor="#000";
CKEDITOR.config.toolbar_Wikia=[{name:"",data:[{msg:"textAppearance",groups:[["Format"],["Bold","Italic","Underline","Strike"],["BulletedList","NumberedList"],["Link","Unlink"],["Outdent","Indent"],["JustifyLeft","JustifyCenter","JustifyRight"]]},{msg:"insert",groups:[["Image","Gallery","Poll","Video"],["Table"],["Template"],["Signature"]]},{msg:"controls",groups:[["Undo","Redo"],window.skin=="oasis"?false:["Widescreen"],["Source"]]}]}];CKEDITOR.dom.element.prototype.hasAttributesOriginal=CKEDITOR.dom.element.prototype.hasAttributes;
CKEDITOR.dom.element.prototype.hasAttributes=function(){var a=this.hasAttributesOriginal();if(a==true){var b=["data-rte-washtml","data-rte-line-start","data-rte-empty-lines-before"];for(i=0;i<b.length;i++)if(this.hasAttribute(b[i]))a=false}return a};CKEDITOR.langRegExp=/lang\/([\w\-]+).js/;
CKEDITOR.getUrl=function(a){if(CKEDITOR.langRegExp.test(a)){a=a.match(CKEDITOR.langRegExp)[1];RTE.log('language "'+a+'" requested');return window.wgServer+wgScript+"?action=ajax&rs=RTEAjax&method=i18n&uselang="+a+"&cb="+window.wgMWrevId+"-"+window.wgStyleVersion}if(a.indexOf("://")==-1&&a.indexOf("/")!==0){if(a.indexOf("_source")==-1)a="_source/"+a;a=this.basePath+a}if(this.timestamp&&a.charAt(a.length-1)!="/")a+=(a.indexOf("?")>=0?"&":"?")+this.timestamp;return a};
CKEDITOR.editor.prototype.switchMode=function(a){if(this.mode!=a){RTE.log('switchMode("'+a+'")');this.mode=a=="wysiwyg"?"source":"wysiwyg";CKEDITOR.plugins.sourcearea.commands.source.exec(this)}};
CKEDITOR.dom.element.prototype.setState=function(a){var b=this.getParent();switch(a){case CKEDITOR.TRISTATE_ON:b.addClass("cke_on");b.removeClass("cke_off");b.removeClass("cke_disabled");break;case CKEDITOR.TRISTATE_DISABLED:b.addClass("cke_disabled");b.removeClass("cke_off");b.removeClass("cke_on");break;default:b.addClass("cke_off");b.removeClass("cke_on");b.removeClass("cke_disabled")}};CKEDITOR.ONLY_FORMATTABLES=2;
jQuery.fn.getData=function(){var a=this.attr("data-rte-meta");if(!a)return{};a=decodeURIComponent(a);return $.secureEvalJSON(a)||{}};jQuery.fn.setData=function(a,b){var c={};if(typeof a=="object")c=a;else if(typeof a=="string")c[a]=b;c=jQuery().extend(true,this.getData(),c);var e=$.toJSON(c);this.attr("data-rte-meta",encodeURIComponent(e));return c};jQuery.fn.setPlaceholderType=function(a){$(this).attr("class","placeholder placeholder-"+a).setData("type",a)};
jQuery(function(){GlobalTriggers.fire("rtebeforeinit",RTE,CKEDITOR);RTE.log("loading...");RTE.init(window.RTEInitMode?window.RTEInitMode:"wysiwyg")});CKEDITOR.plugins.add("rte-comment",{init:function(){CKEDITOR.dialog.add("rte-comment",this.path+"dialogs/comment.js")}});RTE.commentEditor={placeholder:{},dialog:{},showCommentEditor:function(a){RTE.log("calling comment editor...");RTE.commentEditor.placeholder=a;RTE.instance.openDialog("rte-comment")}};
CKEDITOR.dialog.add("rte-comment",function(a){return{title:a.lang.commentEditor.title,resizable:CKEDITOR.DIALOG_RESIZE_NONE,minWidth:400,minHeight:150,contents:[{id:"comment",label:"Comment",elements:[{type:"textarea",id:"content"}]}],onOk:function(){var b=this.getValueOf("comment","content"),c=RTE.commentEditor.placeholder;if(b==""){RTE.log("removing comment");RTE.track("comment","dialog","delete");c.remove()}else{RTE.log("storing modified comment data: "+b);RTE.track("comment","dialog","save");
c.setData({wikitext:"<\!-- "+b+" --\>"});c.removeData("preview")}},onShow:function(){this._.element.addClass("wikiaEditorDialog");this._.element.addClass("commentEditorDialog");wikitext=RTE.commentEditor.placeholder.getData().wikitext.replace(/^<\!--\s+/,"").replace(/\s+--\>$/,"");this.setValueOf("comment","content",wikitext);this.setupTracking("comment",{ok:false})}}});
CKEDITOR.plugins.add("rte-dialog",{init:function(){CKEDITOR.dialog.prototype.getActiveTab=function(){return this._.currentTabId};CKEDITOR.dialog.prototype.enableSuggesionsOn=function(a,b){if(typeof window.os_enableSuggestionsOn=="function"){var c=a._.inputId;document.getElementById("RTEFakeForm").submit=function(){};b=typeof b!="undefined"&&b.length?b:[];window.wgSearchNamespaces=b;if(typeof window.os_map[c]=="undefined"){RTE.log('enabling MW suggest on "'+c+'"...');window.os_enableSuggestionsOn(c,
"RTEFakeForm");var e=$(window.os_createContainer(os_map[c]));c=$("#"+c);c.parent().css("position","relative").append(e);e.css("visibility","hidden");this._.suggestContainer=e;e=new CKEDITOR.dom.element(c[0]);var h=this,j;for(j in{keyup:1,keydown:1,keypress:1})e.on(j,function(g){if(g.data.getKeystroke()in{27:1,13:1}){var f=h._.suggestContainer;if(f.css("visibility")!="hidden"){h._.dontHide=true;g.data.stopPropagation();f.css("visibility","hidden")}}});j=function(g){if(this._.dontHide){RTE.log("dialog hide prevented");
g.data.hide=false;this._.dontHide=false}};this.on("ok",j);this.on("cancel",j)}else this._.suggestContainer=$("#"+os_map[c].container)}};CKEDITOR.dialog.prototype.setLoading=function(a){var b=this.getElement();b.removeClass("wikiaEditorLoading");a&&b.addClass("wikiaEditorLoading")};CKEDITOR.dialog.prototype.setupTracking=function(a,b){b=$().extend({cancel:1,close:1,ok:1,error:1},b);this._.wikiaTrack={sendEvent:b,sendEvents:true,name:a};var c=this;this.on("cancelClicked",function(h){c.fireTrackingEvent("cancel",
h)});this.on("close",function(h){c.fireTrackingEvent("close",h)});this.on("notvalid",function(h){c.fireTrackingEvent("error",h)});var e=this.getButton("ok");if(e)e.on("click",function(h){c.fireTrackingEvent("ok",h)})};CKEDITOR.dialog.prototype.fireTrackingEvent=function(a){var b=this._.wikiaTrack;if(b.sendEvents)if(b.sendEvent[a]){RTE.track(b.name,"dialog",a);if(a=="cancel"||a=="close")b.sendEvents=false}}}});
CKEDITOR.plugins.add("rte-dragdrop",{timeout:250,onDrop:function(a){RTE.log("drag&drop finished");setTimeout(function(){RTE.instance.fire("wysiwygModeReady");var b=RTE.getEditor().find("[data-rte-dragged]").removeAttr("data-rte-dragged");RTE.log("dropped element:");RTE.log(b);RTE.instance.fire("droppedElements",b);RTE.instance.fire("droppedElements",b);RTE.instance.fire("saveSnapshot");if(RTE.instance.getData()==""){RTE.log("undoing drag&drop");RTE.instance.execCommand("undo")}var c={pageX:a.pageX?
a.pageX:a.clientX,pageY:a.pageY?a.pageY:a.clientY};CKEDITOR.env.ie||b.trigger("dropped",[c])},this.timeout)},onDrag:function(a){if(typeof a.target.tagName=="undefined")return true;RTE.instance.fire("saveSnapshot");RTE.log("drag&drop: undo point");a=$(a.target);a.attr("data-rte-dragged",true);a.trigger("dragged");CKEDITOR.env.webkit&&RTE.instance.fire("wysiwygModeReady")},onDuringDragDrop:function(a){var b=parseInt($("#cke_contents_wpTextbox1").height()),c=RTE.instance.window.$;a=(a.pageY?a.pageY:
a.clientY)-(CKEDITOR.env.ie?c.document.body.parentNode.scrollTop:c.scrollY);if(a<50)c.scrollBy(0,-15);else a>=b-50&&c.scrollBy(0,15)},init:function(a){var b=this;a.on("wysiwygModeReady",function(){$(a.document.$).unbind(".dnd").bind("dragstart.dnd",b.onDrag).bind("drop.dnd",b.onDrop).bind("dragdrop.dnd",b.onDrop).bind("mousedown.dnd",b.onDrag).bind("mouseup.dnd",function(c){$(c.target).removeAttr("data-rte-dragged");c.preventDefault()}).bind("dblclick.dnd",function(c){CKEDITOR.env.gecko&&$(c.target).filter("img").attr("type")&&
RTE.tools.removeResizeBox()}).bind("dragover.dnd",b.onDuringDragDrop);CKEDITOR.env.ie&&RTE.getEditor().unbind(".dnd").bind("drop.dnd",b.onDrop).bind("dragover.dnd",b.onDuringDragDrop)})}});CKEDITOR.plugins.add("rte-edit-buttons",{init:function(a){a.on("instanceReady",function(){var b=$("#wpSave,#wpPreview,#wpDiff");b.attr("disabled",false);b.bind("click",function(){var c=$(this).attr("id");c=c.substring(2).toLowerCase();RTE.track(c,a.mode+"Mode")})})}});
CKEDITOR.plugins.add("rte-entities",{insideEntitySpan:false,init:function(a){var b=this;a.on("selectionChange",function(c){c=c.data.selection.getStartElement();if(c.hasAttribute("data-rte-entity")){c=c.getAttribute("data-rte-entity");RTE.log("entity span: &"+c+";");b.insideEntitySpan=true}else{b.insideEntitySpan&&RTE.log("entity span: leaving...");b.insideEntitySpan=false}})}});
CKEDITOR.plugins.add("rte-gallery",{init:function(a){var b=this;a.on("wysiwygModeReady",function(){var c=RTE.getEditor().find(".image-gallery");b.setupGallery(c)});if(typeof window.WikiaPhotoGallery!="undefined"){a.addCommand("addphotogallery",{exec:function(){WikiaPhotoGallery.showEditor({from:"wysiwyg"})}});a.ui.addButton("Gallery",{title:a.lang.photoGallery.add,className:"RTEGalleryButton",command:"addphotogallery"});RTE.tools.blockCommandInHeader("addphotogallery")}else RTE.log('WikiaPhotoGallery is not enabled here - disabling "Gallery" button')},
setupGallery:function(a){a.unbind(".gallery").bind("click.gallery edit.gallery",function(){var b=$(this);WikiaPhotoGallery.showEditor({from:"wysiwyg",gallery:b})}).attr("title",function(){var b=$(this).getData().type==1?"tooltip":"tooltipSlideshow";return RTE.instance.lang.photoGallery[b]})}});
(function(){function a(e){var h=e.editor.getCommand(this.name),j;j=e.editor;e=e.data.path;e=e.block||e.blockLimit;j=typeof j.config.alignableElements=="object"?j.config.alignableElements:[];if(!e||j.length>1&&j.indexOf(e.getName())==-1)j=CKEDITOR.TRISTATE_DISABLED;else{j=e.getComputedStyle("text-align").replace(c,"");j=!j&&this.isDefaultAlign||j==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF}h.state=j;h.fire("state")}function b(e,h,j){this.name=h;this.value=j;e=e.config.contentsLangDirection;
this.isDefaultAlign=j=="left"&&e=="ltr"||j=="right"&&e=="rtl"}var c=/(-moz-|-webkit-|start|auto)/i;b.prototype={exec:function(e){var h=e.getSelection();if(h){for(var j=h.createBookmarks(),g=h.getRanges(),f,d,k=g.length-1;k>=0;k--)for(f=g[k].createIterator();d=f.getNextParagraph();){d.removeAttribute("align");d.removeAttribute("data-rte-style");d.removeAttribute("data-rte-attribs");d.getName()=="p"&&d.removeAttribute("data-rte-washtml");if(d.getName()=="th")this.isDefaultAlign=this.value=="center";
this.state==CKEDITOR.TRISTATE_OFF&&!this.isDefaultAlign?d.setStyle("text-align",this.value):d.removeStyle("text-align")}e.focus();e.forceNextSelectionCheck();h.selectBookmarks(j)}}};CKEDITOR.plugins.add("rte-justify",{init:function(e){var h=new b(e,"justifyleft","left"),j=new b(e,"justifycenter","center"),g=new b(e,"justifyright","right"),f=new b(e,"justifyblock","justify");e.addCommand("justifyleft",h);e.addCommand("justifycenter",j);e.addCommand("justifyright",g);e.addCommand("justifyblock",f);
e.ui.addButton("JustifyLeft",{label:e.lang.justify.left,command:"justifyleft"});e.ui.addButton("JustifyCenter",{label:e.lang.justify.center,command:"justifycenter"});e.ui.addButton("JustifyRight",{label:e.lang.justify.right,command:"justifyright"});e.ui.addButton("JustifyBlock",{label:e.lang.justify.block,command:"justifyblock"});e.on("selectionChange",CKEDITOR.tools.bind(a,h));e.on("selectionChange",CKEDITOR.tools.bind(a,g));e.on("selectionChange",CKEDITOR.tools.bind(a,j));e.on("selectionChange",
CKEDITOR.tools.bind(a,f))},requires:["domiterator"]})})();CKEDITOR.tools.extend(CKEDITOR.config,{alignableElements:null});
CKEDITOR.plugins.add("rte-link",{init:function(a){a.addCommand("link",new CKEDITOR.dialogCommand("link"));a.addCommand("unlink",new CKEDITOR.unlinkCommand);a.ui.addButton("Link",{label:a.lang.link.add,command:"link"});a.ui.addButton("Unlink",{label:a.lang.unlink,command:"unlink"});CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");a.addMenuItems&&a.addMenuItems({link:{label:a.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:a.lang.unlink,command:"unlink",group:"link",order:5}});
a.contextMenu&&a.contextMenu.addListener(function(b){if(!b)return null;b=b.is("img")&&b.getAttribute("_cke_real_element_type")=="anchor";if(!b){if(!(b=CKEDITOR.plugins.link.getSelectedLink(a)))return null;b=b.getAttribute("name")&&!b.getAttribute("href")}return b?{anchor:CKEDITOR.TRISTATE_OFF}:{link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}});a.on("afterPaste",function(){var b=RTE.getEditor().find("a").not("a[data-rte-meta]");if(b.exists()){RTE.log("pasted links");RTE.log(b);b.each(function(){var c=
$(this),e=c.attr("href");if(!RTE.tools.isExternalLink(e)){var h="";if(e.indexOf("&action=edit")==-1)h=c.attr("title");else if(e=e.match("title=(.*)&action=edit")){h=e[1];h=decodeURIComponent(h);h=h.replace(/_/g," ")}if(h!=""){RTE.log('local link pointing to "'+h+'" found');h={type:"internal",link:h,text:c.text(),noforce:true,wasblank:false};c.setData(h)}}})}})}});
CKEDITOR.plugins.link={getSelectedLink:function(a){var b;try{b=a.getSelection().getRanges()[0]}catch(c){return null}b.shrink(CKEDITOR.SHRINK_TEXT);return b.getCommonAncestor().getAscendant("a",true)}};CKEDITOR.unlinkCommand=function(){};
CKEDITOR.unlinkCommand.prototype={exec:function(a){for(var b=a.getSelection(),c=b.createBookmarks(),e=b.getRanges(),h,j=0;j<e.length;j++){h=e[j].getCommonAncestor(true);(h=h.getAscendant("a",true))&&this.removeLink(a,h,e[j])}b.selectBookmarks(c)},removeLink:function(a,b){b.remove(true)}};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:true,linkShowTargetTab:true});
CKEDITOR.dialog.add("link",function(a){var b=CKEDITOR.plugins.link,c=false,e,h=function(k){var l=CKEDITOR.dialog.getCurrent();if(k=="external"){k=l.getContentElement("internal","linktype");k.getValue()!="ext"&&k.setValue("ext");$(".link-type-note span").html(a.lang.link.status.external);$(".link-type-note img")[0].className="sprite external"}else if(k=="internal"){k=l.getContentElement("internal","linktype");k.getValue()!="wiki"&&k.setValue("wiki");j();l.enableSuggesionsOn(l.getContentElement("internal",
"name"))}},j=function(){var k=CKEDITOR.dialog.getCurrent().getContentElement("internal","name").getValue();if(k){$(".link-type-note span").html(a.lang.link.status.checking);$(".link-type-note img")[0].className="sprite progress";RTE.ajax("checkInternalLink",{title:k},function(l){if(l.exists){$(".link-type-note span").html(a.lang.link.status.exists);$(".link-type-note img")[0].className="link-icon link-yes"}else{$(".link-type-note span").html(a.lang.link.status.notexists);$(".link-type-note img")[0].className=
"link-icon link-no"}})}e=null},g=function(k,l){function m(u,n,s){u=CKEDITOR.dialog.getCurrent();u.setValueOf("internal","name",n);u.setValueOf("internal","label",s||"")}RTE.log("opening link dialog");c=false;var p=l?$(l.$).getData():null;if(p){if(typeof p.type=="undefined"){RTE.log("pasted link detected");var r=l.getAttribute("href");if(RTE.tools.isExternalLink(r)){p={type:"external",link:r,text:l.getText()};h("external")}}else switch(p.type){case "internal":h("internal");setTimeout(j,200);if(p.text===
p.link)this._.similarLink=true;break;case "external":case "external-raw":h("external")}RTE.log(p);this.getContentElement("internal","label");switch(p.type){case "external":m("internal",p.link);if(p.linktype!="autonumber"){this.setValueOf("internal","label",p.text);c=true}break;case "external-raw":m("external",p.link);break;case "internal":m("internal",p.link,p.text);c=true}}else{this.getContentElement("internal","label");p=RTE.tools.getSelectionContent();h("internal");r="internal";if(p){if(RTE.tools.isExternalLink(p)){h("external");
r="external"}c=true;m(r,p,p);setTimeout(j,200);RTE.log('link: using selected text "'+p+'" for new '+r+" link")}else RTE.log("link: fresh link")}this._.selectedElement=l},f=function(k){var l=k.getSelection(),m=l.getRanges();if(m.length==1&&m[0].collapsed){var p=new CKEDITOR.dom.text("",k.document);m[0].insertNode(p);m[0].selectNodeContents(p);l.selectRanges(m)}m=new CKEDITOR.style({element:"a",attributes:{"data-rte-new-link-temporary":true}});m.type=CKEDITOR.STYLE_INLINE;m.apply(k.document);m=RTE.getEditor().find("a[data-rte-new-link-temporary]");
m.removeAttr("data-rte-new-link-temporary");m=new CKEDITOR.dom.element(m[0]);if(CKEDITOR.env.gecko||CKEDITOR.env.webkit){k=new CKEDITOR.dom.text(" ",k.document);k.insertAfter(m);l.selectElement(k);CKEDITOR.env.gecko&&k.remove()}return m},d=a.lang.link;return{title:a.lang.link.title,minWidth:500,minHeight:185,contents:[{id:"internal",label:d.internal.tab,title:d.internal.tab,elements:[{type:"html",html:'<p class="link-type-note"><span>...</span><img alt="Link Status" class="" src="http://images1.wikia.nocookie.net/__cb21710/common/skins/common/blank.gif" /></p>',
id:"linkdisplay"},{type:"text",label:a.lang.link.label.target,id:"name",onKeyUp:function(){var k=this.getDialog().getContentElement("internal","label");RTE.tools.isExternalLink(this.getValue())&&h("external");if(this.getDialog().getContentElement("internal","linktype").getValue()=="wiki"){e&&clearTimeout(e);$(".link-type-note span").html(a.lang.link.status.checking);$(".link-type-note img")[0].className="sprite progress";e=setTimeout(j,1E3)}if(k.getValue()=="")c=false;!c&&k.isEnabled()&&k.setValue(this.getValue())},
validate:function(){if(this.getDialog().getContentElement("internal","linktype").getValue()=="wiki"){var k=RegExp("^(#(.+))|["+RTE.constants.validTitleChars+"]+$");return CKEDITOR.dialog.validate.regex(k,a.lang.link.error.badPageTitle).apply(this)}else{k=RegExp("^("+RTE.constants.urlProtocols+")");this.getValue().match(k)||this.setValue("http://"+this.getValue());return CKEDITOR.dialog.validate.regex(k,a.lang.link.error.badUrl).apply(this)}}},{type:"text",label:a.lang.link.label.display,id:"label",
onFocus:function(){c=true}},{type:"radio",items:[[a.lang.link.label.internal,"wiki"],[a.lang.link.label.external,"ext"]],"default":"wiki",id:"linktype",onChange:function(k){if(CKEDITOR.dialog.getCurrent()){RTE.log("mode changed to "+k.data.value);k.data&&k.data.value=="ext"?h("external"):h("internal")}}}]}],onShow:function(){this._.element.addClass("wikiaEditorDialog");this._.element.addClass("linkEditorDialog");this.fakeObj=false;var k=this.getParentEditor(),l=k.getSelection();l.getRanges();var m=
null;if((m=b.getSelectedLink(k))&&m.getAttribute("href"))l.selectElement(m);else m=null;$(".link-type-note span").html("...");$(".link-type-note img")[0].className="sprite";g.apply(this,[k,m]);this.setupTracking("link")},onOk:function(){if(!this._.dontHide){var k="",l=this.getContentElement("internal","linktype").getValue();if(this._.selectedElement)m=this._.selectedElement;else{RTE.log("creating new link...");var m=f.apply(this,[a])}if(m){m.removeClass("external");m.removeClass("autonumber");var p=
{};if(l=="wiki"){var r=this.getValueOf("internal","name");if(r.indexOf(window.wgServer)==0){var u=RegExp(window.wgArticlePath.replace(/\$1/,"(.*)"));if(u=r.match(u)){u=u[1];u=decodeURIComponent(u);u=u.replace(/_/g," ");this.setValueOf("internal","name",u);this.setValueOf("internal","label",this.getValueOf("external","label"));RTE.log("internal full URL detected: "+r+" > "+u)}}}switch(l){case "ext":p={type:"external",link:this.getValueOf("internal","name"),text:this.getValueOf("internal","label"),
wikitext:null};k="externalNamed";if(p.text==""){p.linktype="autonumber";p.text="[1]";m.addClass("autonumber");k="externalNumbered"}m.setAttribute("href",p.link);m.setText(p.text!=""?p.text:p.link);m.addClass("external");m.removeClass("new");break;case "wiki":p={type:"internal",link:this.getValueOf("internal","name"),text:this.getValueOf("internal","label"),noforce:true,wikitext:null};if(this._.similarLink&&p.text!==p.link)p.text=p.link;if(m.getText()==m.getHtml())m.setText(p.text!=""?p.text:p.link);
k=p.text==""?"internalSimple":"internalNamed";RTE.tools.checkInternalLink(m,p.link)}$(m.$).setData(p);RTE.log("updating link data");RTE.log([m,$(m.$).getData()]);RTE.tools.renumberExternalLinks();typeof this._.suggestContainer!="undefined"&&this._.suggestContainer.css("visibility","hidden");RTE.track("link","dialog","type",k)}}}}});
CKEDITOR.plugins.add("rte-linksuggest",{dataSource:false,init:function(a){this.initWikiaLinkSuggest(a);this.initMediaWikiLinkSuggest(a)},initWikiaLinkSuggest:function(a){if(typeof window.LS_PrepareTextarea=="function"){this.dataSource=new window.YAHOO.widget.DS_XHR(window.wgServer+window.wgScriptPath,["\n"]);this.dataSource.responseType=window.YAHOO.widget.DS_XHR.TYPE_FLAT;this.dataSource.scriptQueryAppend="action=ajax&rs=getLinkSuggest";var b=this;a.on("mode",function(){if(a.mode=="source"){$(a.textarea.$).attr("id",
"RTEtextarea");window.LS_PrepareTextarea("RTEtextarea",b.dataSource)}})}},initMediaWikiLinkSuggest:function(a){if(typeof $.fn.linksuggest=="function")a.on("mode",function(){a.mode=="source"&&$(a.textarea.$).attr("id","RTEtextarea").css("font-family","monospace").linksuggest()})}});
CKEDITOR.plugins.add("rte-media",{init:function(a){var b=this;a.on("wysiwygModeReady",function(){var c=RTE.tools.getMedia();b.setupMedia(c);c=RTE.getEditor().find(".media-placeholder");b.setupPlaceholder(c)});a.on("toolbarReady",function(){$("#mw-toolbar").children("#mw-editbutton-wmu").click(function(c){window.WMU_show(c)});$("#mw-toolbar").children("#mw-editbutton-vet").click(function(c){window.VET_show(c)})});a.addCommand("addimage",{exec:function(){RTE.tools.callFunction(window.WMU_show)}});a.ui.addButton("Image",
{title:a.lang.image.add,className:"RTEImageButton",command:"addimage"});RTE.tools.blockCommandInHeader("addimage");if(typeof window.VET_show=="function"){a.addCommand("addvideo",{exec:function(){RTE.tools.callFunction(window.VET_show)}});a.ui.addButton("Video",{title:a.lang.video.add,className:"RTEVideoButton",command:"addvideo"});RTE.tools.blockCommandInHeader("addvideo");RTE.mediaEditor.plugin=b}else RTE.log('VET is not enabled here - disabling "Video" button')},setupMedia:function(a){var b=this;
if(a.exists()){a.attr("data-rte-instance",RTE.instanceId);var c=RTE.instance.lang.media;RTE.overlay.add(a,[{label:c.edit,"class":"RTEMediaOverlayEdit",callback:function(e){var h=b.getTrackingType(e);e.trigger("edit");RTE.track(h,"menu","edit")}},{label:c["delete"],"class":"RTEMediaOverlayDelete",callback:function(e){var h=b.getTrackingType(e);RTE.tools.confirm(RTE.instance.lang[h].confirmDeleteTitle,RTE.instance.lang[h].confirmDelete,function(){RTE.tools.removeElement(e)});RTE.track(h,"menu","delete")}}]);
a.unbind(".media");a.bind("dragged.media",function(){RTE.track(b.getTrackingType($(this)),"event","move")});RTE.tools.unselectable(a);RTE.getEditor().unbind("dropped.media").bind("dropped.media",function(e,h){var j=$(e.target);if(!(!j.hasClass("image")&&!j.hasClass("video")&&!j.hasClass("media-placeholder"))){var g=j.parent();if(/h\d/i.test(g.attr("nodeName"))){g.after(j);RTE.log("image moved outside the header")}var f=parseInt(h.pageX-$("#editform").offset().left),d=parseInt($("#editform").width()),
k=j.getData();g=false;var l=k.params.align;if(!l){l=j.hasClass("thumb")||j.hasClass("frame")?"right":"left";if(j.hasClass("alignNone"))l="left"}switch(l){case "left":if(f>parseInt(d*0.66))g="right";break;case "right":if(f<parseInt(d*0.33))g="left"}if(g){RTE.log("media alignment: "+l+" -> "+g);f=k.wikitext;l=RegExp("\\|"+l+"(\\||])");f=l.test(f)?f.replace(l,"|"+g+"$1"):f.replace(/(\||\])/,"|"+g+"$1");RTE.log("new wikitext: "+f);k.params.align=g;k.wikitext=f;j.setData(k);j.removeClass("alignNone alignLeft alignRight").addClass(g==
"left"?"alignLeft":"alignRight");j=j.attr("type");if(j=="image-placeholder")j="imagePlaceholder";if(j=="video-placeholder")j="videoPlaceholder";RTE.track(j,"event","switchSide",g=="right"?"l2r":"r2l")}else RTE.log("media alignment detected: "+l+" (no change)")}});a.filter(".withCaption").each(function(){$(this).css("backgroundPosition","5px "+parseInt($(this).attr("height")+10)+"px")});c=a.filter("img.image");b.setupImage(c);c=a.filter("img.video");b.setupVideo(c);c=a.filter("img.placeholder-poll");
b.setupPoll(c);RTE.config.disableDragDrop&&RTE.tools.disableDragDrop(a)}},setupImage:function(a){a.bind("edit.media",function(){RTE.log("image clicked");RTE.tools.callFunction(window.WMU_show,$(this))})},setupVideo:function(a){a.bind("edit.media",function(){RTE.log("video clicked");RTE.tools.callFunction(window.VET_show,$(this))})},setupPoll:function(a){a.bind("edit.media",function(b){RTE.log("poll clicked");CreateWikiaPoll.showEditor(b)})},setupPlaceholder:function(a){var b=this;if(a.exists()){this.setupMedia(a);
a.unbind(".placeholder");a.bind("contextmenu.placeholder",function(e){e.stopPropagation()});RTE.getEditor().unbind("dropped.placeholder").bind("dropped.placeholder",function(e){e=$(e.target);e=e.filter(".media-placeholder");b.setupPlaceholder(e)});var c=a.filter(".image-placeholder");c.attr("title",RTE.instance.lang.imagePlaceholder.tooltip);c.bind("click.placeholder edit.placeholder",function(){RTE.tools.callFunction(window.WMU_show,$(this),{isPlaceholder:true})});c=a.filter(".video-placeholder");
c.attr("title",RTE.instance.lang.videoPlaceholder.tooltip);c.bind("edit.placeholder",function(){RTE.tools.callFunction(window.VET_show,$(this),{isPlaceholder:true})});RTE.config.disableDragDrop&&RTE.tools.disableDragDrop(a)}},getTrackingType:function(a){var b;switch($(a).attr("type")){case "image":b="image";break;case "video":b="video";break;case "image-placeholder":b="imagePlaceholder";break;case "video-placeholder":b="videoPlaceholder";break;case "image-gallery":b="photoGallery";break;case "poll":b=
"poll"}return b}});
RTE.mediaEditor={plugin:false,addImage:function(a,b){RTE.log("adding an image");var c={type:"image",title:a.substring(2,a.length-2).split("|").shift().replace(/^[^:]+:/,""),params:b,wikitext:a};this._add(a,c)},addVideo:function(a,b){RTE.log("adding a video");this._add(a,{type:"video",params:b,wikitext:a})},_add:function(a,b){var c=this;RTE.tools.parseRTE(a,function(e){var h=$(e,RTE.instance.document.$).children("img");h.exists()||(h=$(e,RTE.instance.document.$));h.setData(b);RTE.tools.insertElement(h,true);
c.plugin.setupMedia(h);RTE.track(c.plugin.getTrackingType(h),"event","add")})},update:function(a,b){var c=this;RTE.tools.parseRTE(b,function(e){e=$(e).children("img");e.insertAfter(a);e.setData("wikitext",b);a.remove();c.plugin.setupMedia(e);RTE.track(c.plugin.getTrackingType(e),"event","modified")})}};
CKEDITOR.plugins.add("rte-modeswitch",{sourceButton:false,init:function(a){var b=this;a.on("instanceReady",function(){b.updateSourceButtonTooltip();b.updateModeInfo()});a.on("mode",function(){b.updateSourceButtonTooltip();b.updateModeInfo()})},getSourceButton:function(){if(this.sourceButton==false){var a=RTE.instance.getCommand("source").uiItems[0];this.sourceButton=$("#"+a._.id)}return this.sourceButton},updateSourceButtonTooltip:function(){this.getSourceButton().attr("title",RTE.instance.lang.modeSwitch[RTE.instance.mode==
"wysiwyg"?"toSource":"toWysiwyg"])},updateModeInfo:function(){$("body").removeClass("rte_wysiwyg").removeClass("rte_source").addClass("rte_"+RTE.instance.mode);$("#RTEMode").attr("value",RTE.instance.mode)}});
CKEDITOR.plugins.add("rte-overlay",{overlays:false,currentOverlay:false,init:function(a){var b=this;RTE.overlay.plugin=this;a.on("instanceReady",function(){b.overlays=$("<div>",{id:"RTEMediaOverlays"}).appendTo(RTE.stuffNode)});a.on("wysiwygModeReady",function(){typeof b.overlays=="object"&&b.overlays.html("")});setInterval(function(){b.checkCurrentOverlay()},1E3)},checkCurrentOverlay:function(){if(this.currentOverlay){var a=this.currentOverlay.data("node");if(a&&!a.hasParent("body")){this.currentOverlay.remove();
this.currentOverlay=false}}},showOverlay:function(a){var b=this.getOverlay(a),c=this.getOverlayPositon(a),e=Math.max(c.left+b.width()-RTE.getEditor().width(),0);b.children("div").css("right",e+"px");c.top=Math.max(c.top,0);b.css({left:c.left+"px",top:parseInt(c.top+2)+"px"});b.children().eq(0).show();e=b.children().eq(1);parseInt(c.top)+parseInt(e.css("top"))+16<RTE.tools.getEditorHeight()&&e.show();this.overlays.children().hide();this.currentOverlay=b.show();(a=a.data("hideTimeout"))&&clearTimeout(a)},
hideOverlay:function(a){var b=this.getOverlay(a);a.data("hideTimeout",setTimeout(function(){b.children().hide();b.hide();this.currentOverlay=false;a.removeData("hideTimeout")},100))},getOverlay:function(a,b){var c=this;if(!this.overlays)return false;var e=a.data("overlay");if(e)return e;e=$("<div>",{"class":"RTEMediaOverlay",type:a.attr("type"),width:this.getImageWidth(a)});var h=$("<div>").addClass("RTEMediaMenu color1").appendTo(e);b=a.data("items");$(b).each(function(){var g=this;$("<span>").addClass(g["class"]).html(g.label).bind("click",
function(){c.hideOverlay(a);g.callback(a)}).appendTo(h)});var j=this.getCaption(a);j&&j.appendTo(e);e.bind({mouseover:function(){c.showOverlay(a)},mouseout:function(){c.hideOverlay(a)}});e.data("node",a);this.overlays.append(e);a.data("overlay",e);return e},getCaption:function(a){var b=a.getData(),c=a.hasClass("thumb")||a.hasClass("frame");if((b=typeof b.params!="undefined"&&(b.params.captionParsed||b.params.caption))&&c){c=parseInt(a.attr("height")+7);a=a.attr("width");if(CKEDITOR.env.ie&&CKEDITOR.env.version<=
7){c-=25;a-=6}return $("<div>").addClass("RTEMediaCaption").css("top",c+"px").width(a).html(b).click(function(e){e.preventDefault()})}else return false},getOverlayPositon:function(a){var b=RTE.tools.getPlaceholderPosition(a);if(a.hasClass("media-placeholder")){b.top+=2;b.left+=2}else if(a.hasClass("thumb")||a.hasClass("frame")){b.top+=6;a.hasClass("alignLeft")||(b.left+=18)}return b},getImageWidth:function(a){var b=a.hasClass("thumb")||a.hasClass("frame");a=a.is("img")?parseInt(a.attr("width")):a.innerWidth();
if(b)a+=CKEDITOR.env.ie&&CKEDITOR.env.version<=7?2:8;return a+"px"}});RTE.overlay={plugin:false,add:function(a,b){var c=this.plugin;a.data("items",b);a.each(function(){var e=$(this).removeData("overlay").unbind(".overlay").bind({"mouseover.overlay":function(){c.showOverlay(e)},"mouseout.overlay":function(){c.hideOverlay(e)},"contextmenu.overlay":function(h){h.preventDefault();h.stopPropagation()}})})}};
CKEDITOR.plugins.add("rte-paste",{htmlBeforePaste:"",getHtml:function(){return RTE.instance.document.getBody().getHtml()},track:function(a){RTE.track("paste",a)},init:function(a){var b=this;a.on("dataReady",function(){if(a.mode=="wysiwyg")a.document.getBody().on("beforepasteonkey",function(c){if(a.config.forcePasteInDialog){RTE.log('"direct" paste prevented');c.cancel();a.fire("pasteDialog")}})});if(!a.config.forcePasteAsPlainText)a.on("beforePaste",function(){b.htmlBeforePaste=b.getHtml();setTimeout(function(){b.handlePaste(a)},
250)});a.on("paste",function(c){typeof c.data.text!="undefined"&&b.track("plainText")})},handlePaste:function(a){RTE.log("paste detected");var b=false,c=this.getHtml();a.fire("wysiwygModeReady");c=this.diff(this.htmlBeforePaste,c);if(!(typeof c!="object"||typeof c.pasted!="string")){var e=c.pasted.match(/data-rte-instance="([a-z0-9-]+)"/);if(e){e=e[1];if(e==RTE.instanceId)this.track("inside");else parseInt(e.split("-").shift())!=parseInt(wgCityId)?this.track("anotherWiki"):this.track("outside")}else this.track("plainText");
if(typeof c.pasted=="string")if(/<br>/.test(c.pasted)){RTE.log("paste: detected line breaks in pasted content");b=c["new"].replace(/([^>])<br>([^<])/g,'$1<br data-rte-washtml="1" />$2');a.setData(b,function(){a.fire("afterPaste")});b=true}b||setTimeout(function(){a.fire("afterPaste")},250)}},diff:function(a,b){if(a==b)return false;for(var c=a.length-b.length,e={start:0,end:b.length-1};a.charAt(e.start)==b.charAt(e.start);){if(e.start>=a.length)return false;e.start++}for(;a.charAt(e.end+c)==b.charAt(e.end);){if(e.end<=
e.start)return false;e.end--}c=b.substring(0,e.start+1);var h=b.substring(e.end,b.length);if(/<[^>]*$/.test(c))e.start=c.lastIndexOf("<");if(/^[^<]*>/.test(h))e.end+=h.indexOf(">")+1;var j=b.substring(e.start,e.end+1);c=b.substring(0,e.start);h=b.substring(e.end+1,b.length);return{pasted:j,prefix:c,suffix:h,"new":b,old:a,start:e.start,end:e.end}}});CKEDITOR.config.forcePasteInDialog=false;
CKEDITOR.plugins.add("rte-placeholder",{previews:false,init:function(a){var b=this;a.on("instanceReady",function(){b.previews=$("<div>",{id:"RTEPlaceholderPreviews"}).appendTo(RTE.stuffNode)});a.on("wysiwygModeReady",function(){typeof b.previews=="object"&&b.previews.html("");var c=RTE.tools.getPlaceholders();c.removeData("preview").removeData("info");b.setupPlaceholder(c)})},getPreview:function(a){var b=this;if(this.previews){var c=a.data("preview");if(typeof c=="undefined"){c=$("<div>").addClass("RTEPlaceholderPreview RTEPlaceholderPreviewLoading");
c.html('<div class="RTEPlaceholderPreviewInner">&nbsp;</div>');c.bind("mouseover",function(){b.showPreview(a)});c.bind("mouseout",function(){b.hidePreview(a)});this.previews.append(c);a.data("preview",c);var e=a.getData(),h=function(j){var g,f,d="RTEPlaceholderPreviewOther",k=true,l=false,m=e.wikitext.replace(/</g,"&lt;").replace(/>/g,"&gt;"),p=RTE.instance.lang.hoverPreview;switch(j.type){case "tpl":d="RTEPlaceholderPreviewTemplate";g=j.title.replace(/_/g," ").replace(/^Template:/,window.RTEMessages.template+
":");f=j.exists?p.template.intro:p.template.notExisting;m=j.exists?j.html:e.wikitext;k=!j.exists;l=typeof j.availableParams!="undefined"&&j.availableParams.length;break;case "comment":g=p.comment.title;f=p.comment.intro;m=e.wikitext.replace(/^<\!--\s+/,"").replace(/\s+--\>$/,"");l=true;break;case "broken-image":d="RTEPlaceholderPreviewBrokenImage";g=e.wikitext.replace(/^\[\[/,"").replace(/]]$/,"").split("|").shift();f=p.media.notExisting;break;default:g=p.codedElement.title;f=p.codedElement.intro}if(g.length>
40)g=g.substr(0,40)+RTEMessages.ellipsis;if(k&&CKEDITOR.env.ie)m=m.replace(/\n/g,"<br />");var r="";if(l)r+='<img class="sprite edit" src="'+wgBlankImgUrl+'" /><a class="RTEPlaceholderPreviewToolsEdit">'+p.edit+"</a>";r+='<img class="sprite delete" src="'+wgBlankImgUrl+'" /><a class="RTEPlaceholderPreviewToolsDelete">'+p["delete"]+"</a>";var u="";u+='<div class="RTEPlaceholderPreviewInner '+d+'">';u+='<div class="RTEPlaceholderPreviewTitleBar color1"><span />'+g+"</div>";u+='<div class="RTEPlaceholderPreviewIntro">'+
f+"</div>";u+='<div class="RTEPlaceholderPreviewCode '+(k?"RTEPlaceholderPreviewPreformatted ":"")+'reset">'+m+"</div>";u+='<div class="RTEPlaceholderPreviewTools neutral">'+r+"</div>";u+="</div>";c.removeClass("RTEPlaceholderPreviewLoading").html(u).attr("type",j.type);c.find(".RTEPlaceholderPreviewToolsDelete").bind("click",function(){RTE.track(b.getTrackingType($(a)),"hover","delete");RTE.tools.confirm(g,p.confirmDelete,function(){RTE.tools.removeElement(a);c.remove()})});l&&c.find(".RTEPlaceholderPreviewToolsEdit").bind("click",
function(){c.hide();RTE.track(b.getTrackingType($(a)),"hover","edit");$(a).trigger("edit")});c.find(".RTEPlaceholderPreviewCode").bind("click",function(n){n.preventDefault()});c.find(".RTEPlaceholderPreviewTitleBar").children("span").bind("click",function(){RTE.track(b.getTrackingType($(a)),"hover","close");b.hidePreview(a,true)});e.type=="double-brackets"&&a.data("info",j);b.expandPlaceholder(a)};switch(e.type){case "double-brackets":RTE.tools.resolveDoubleBrackets(e.wikitext,h);break;default:h({type:e.type})}}return c}},
showPreview:function(a){var b=this.getPreview(a),c=RTE.tools.getPlaceholderPosition(a);b.css({left:c.left+"px",top:parseInt(c.top+a.height()+6)+"px"});this.previews.children().not(b).each(function(){$(this).hide()});var e=this;a.data("showTimeout",setTimeout(function(){b.css("display")=="block"||a.trigger("hover");b.fadeIn();e.expandPlaceholder(a)},150));if(timeoutId=a.data("hideTimeout"))clearTimeout(timeoutId)},hidePreview:function(a,b){var c=this.getPreview(a);if(showTimeout=a.data("showTimeout"))clearTimeout(showTimeout);
b?c.hide():a.data("hideTimeout",setTimeout(function(){c.fadeOut();a.removeData("hideTimeout")},1E3))},setupPlaceholder:function(a){var b=this;a=a.not(".placeholder-image-placeholder").not(".placeholder-video-placeholder");if(a.exists()){a.unbind(".placeholder");a.bind("mouseover.placeholder",function(){b.showPreview($(this))});a.bind("mouseout.placeholder",function(){b.hidePreview($(this))});a.bind("contextmenu.placeholder",function(c){c.stopPropagation()});RTE.tools.unselectable(a);a.bind("edit.placeholder",
function(){switch($(this).getData().type){case "double-brackets":RTE.templateEditor.showTemplateEditor($(this));break;case "comment":RTE.commentEditor.showCommentEditor($(this))}});a.bind("hover.placeholder",function(){RTE.track(b.getTrackingType($(this)),"hover","init")});RTE.getEditor().unbind("dropped.placeholder").bind("dropped.placeholder",function(c){c=$(c.target);c=c.filter("img.placeholder");b.setupPlaceholder(c)});RTE.config.disableDragDrop&&RTE.tools.disableDragDrop(a)}},getTrackingType:function(a){switch($(a).getData().type){case "double-brackets":a=
"template";break;case "comment":a="comment";break;default:a="advancedCode"}return a},expandPlaceholder:function(a){a=this.getPreview(a);var b=a.find(".RTEPlaceholderPreviewCode");if(b.exists()){var c=b[0];if(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth){var e=c.scrollHeight;c=c.scrollWidth;var h=parseInt(a.offset().left)+c+16,j=parseInt(a.offset().top)+e+100,g=$("#cke_contents_wpTextbox1"),f=parseInt(g.offset().left)+g.width();g=parseInt(g.offset().top)+g.height();if(f<h)c-=h-f;if(g<
j)e-=j-g;c=Math.max(c,350);e=Math.max(e,60);a.children(".RTEPlaceholderPreviewInner").width(c);b.height(e);b.addClass("RTEPlaceholderPreviewExpanded")}else b.removeClass("RTEPlaceholderPreviewExpanded")}}});
CKEDITOR.plugins.add("rte-signature",{init:function(a){a.addCommand("addsignature",{exec:function(b){b=RTE.instance.document.createText(b.config.signature_markup);RTE.tools.insertElement($(b.$))}});a.ui.addButton("Signature",{title:a.lang.signature.add,label:a.lang.signature.label,className:"RTESignatureButton",command:"addsignature"})}});CKEDITOR.config.signature_markup="~~~~";
CKEDITOR.plugins.add("rte-spellchecker",{beforeInit:function(a){a.config.menu_groups="spellchecker,spellcheckermore,"+a.config.menu_groups},init:function(a){var b=false,c=window.wgContentLanguage;if(typeof window.wgSpellCheckerLangIsSupported!="undefined")if(window.wgSpellCheckerLangIsSupported){RTE.log('spell checking enabled for "'+c+'"');b=true}else RTE.log('spell checking is not supported for "'+c+'"');else RTE.log("spell checking disabled");if(b)a.spellchecker=new CKEDITOR.spellchecker(a,c)}});
CKEDITOR.spellchecker=function(a,b){var c=this;this.editor=a;this.langCode=b;this.parser=new CKEDITOR.htmlParser;a.on("wysiwygModeReady",function(){c.checkEditbox()});a.on("instanceReady",function(){var j=a.contextMenu;j.addListener(function(g){if(CKEDITOR.env.webkit)g=j.originalEvent.getTarget();return c.showSuggestions(g)})});this.setupScayt();var e=a.dataProcessor;e=e&&e.htmlFilter;var h=/^spellchecker/;e&&e.addRules({elements:{span:function(j){if(h.test(j.attributes["class"])){delete j.name;return j}}}});
this.nodeRunner=new CKEDITOR.nodeRunner;this.nodeRunner.isSkipped=this.isIgnoredNode};
CKEDITOR.spellchecker.prototype={wordsCache:{},CORRECT:1,MISSPELLED:0,SUGGESTIONS_LIMIT:6,SCAYT_DELAY_TIME:1E3,SCAYT_DELAY_CHARS:20,recentText:"",nodeRunner:false,ajax:function(a,b,c){b=b||{};b.method=a;jQuery.post(window.wgSpellCheckerUrl,b,function(e){typeof c=="function"&&c(e)},"json")},isMarkedNode:function(a){return a.hasClass("spellchecker-misspell")},isIgnoredNode:function(a){if(a.is("a")){if(a.hasClass("extiw"))return true;if(a.getAttribute("rel")=="nofollow"&&a.getAttribute("href")==a.getText())return true}return false},
getTextFromEditor:function(){var a=this.getSeparators(),b="";this.nodeRunner.walkTextNodes(this.editor.document.getBody(),function(c){b+=c.getText()+" "});b=b.replace(/&[^;]+;/g," ").replace(RegExp("([0-9]|["+a+"])","g")," ").replace(/\s+/g," ");return b=$.trim(b)},getWords:function(a){var b=[],c=[];a=a.split(" ");$.each(a,function(e,h){if(!c[h]){c[h]=1;b.push(h)}});return b},getSeparators:function(){var a,b="";for(a=0;a<48;a++)b+="\\"+'\\s!"#$%&()*+,-./:;<=>?@[]^_{|}'.charAt(a);
return b},getSuggestions:function(a){if((a=this.wordsCache[a])&&a.length)return a},checkWords:function(a,b){var c=this,e,h=[];RTE.log("found "+a.length+" unique word(s)");for(e=0;e<a.length;e++)typeof this.wordsCache[a[e]]=="undefined"&&h.push(a[e]);if(h.length==0){RTE.log("spell checking data already in cache");b.call()}else{RTE.log("checking "+h.length+" unique word(s)");this.ajax("checkWords",{lang:this.langCode,words:h.join(",")},function(j){if(j.info){RTE.log(j.correct+" word(s) spelled correctly ("+
j.info.provider+")");c.updateWordsCache(h,j.suggestions);typeof b=="function"&&b.call()}else RTE.log("spell checking request has failed!")})}},updateWordsCache:function(a,b){var c=this.wordsCache,e=this.CORRECT;$.each(a,function(h,j){c[j]=b[j]?b[j]:e})},getMisspelledWords:function(){var a=this.CORRECT,b=[];$.each(this.wordsCache,function(c,e){e!=a&&b.push(c)});return b},highlightWords:function(){this.removeHighlight();var a=this.getMisspelledWords().join("|"),b=[],c=this;if(a!=""){this.nodeRunner.walkTextNodes(this.editor.document.getBody(),
function(j){c.isMarkedNode(j.getParent())||b.push(j)});var e=this.getSeparators(),h=RegExp("(^|["+e+"])("+a+")($|["+e+"])","g");$.each(b,function(j,g){var f=g.getText(),d=false;if(h.test(f)){f=f.replace(h,'$1<span class="spellchecker-misspell">$2</span>$3');d=g.getParent();if(d.hasClass("spellchecker-wrapper")&&d.getChildCount()==1)d.setHtml(f);else{d=new CKEDITOR.dom.element("span");d.setHtml(f);d.addClass("spellchecker-wrapper");d.replace(g)}}})}},removeHighlight:function(a){var b=this;a||(a=this.editor.document.getBody());
this.nodeRunner.walk(a,function(c){c.type==CKEDITOR.NODE_ELEMENT&&b.isMarkedNode(c)&&(new CKEDITOR.dom.text(c.getText())).replace(c)})},checkEditbox:function(){if(this.editor.mode=="wysiwyg"){var a=this.getTextFromEditor();if(a!="")if(a==this.recentText)RTE.log("text already checked");else{this.recentText=a;var b=this;this.checkWords(this.getWords(a),function(){b.highlightWords()})}}},showSuggestions:function(a){if(this.isMarkedNode(a)){var b={},c={},e;e=a.getText();var h=this;if(suggestions=this.getSuggestions(e)){RTE.log("showing "+
suggestions.length+' suggestion(s) for "'+e+'"');for(e=0;e<suggestions.length;e++){var j=this.addSuggestItem(e+1,suggestions[e],function(g){h.applySuggestion(a,g)});if(e<this.SUGGESTIONS_LIMIT)b[j]=CKEDITOR.TRISTATE_OFF;else c[j]=CKEDITOR.TRISTATE_OFF}if(suggestions.length>this.SUGGESTIONS_LIMIT){this.editor.addMenuItem("spellcheckerMore",{label:this.editor.lang.spellchecker.moreSuggestions,group:"spellcheckermore",getItems:function(){return c}});b.spellcheckerMore=CKEDITOR.TRISTATE_OFF}return b}else RTE.log('no suggestions for "'+
e+'"')}},addSuggestItem:function(a,b,c){var e="spellcheckerSuggest"+b.replace(/[^\w]/g,"_");this.editor.addCommand(e,{exec:function(){c(b)}});this.editor.addMenuItem(e,{command:e,group:"spellchecker",label:b,order:a});return e},applySuggestion:function(a,b){this.editor.fire("saveSnapshot");(new CKEDITOR.dom.text(b)).replace(a);this.editor.fire("saveSnapshot");RTE.track("spellchecker","applySuggestion")},scaytCharacters:0,scaytTimeout:false,setupScayt:function(){var a=this;this.editor.on("key",function(){if(a.scaytTimeout){clearTimeout(a.scaytTimeout);
a.scaytTimeout=false}a.scaytTimeout=setTimeout(function(){a.performScayt()},a.SCAYT_DELAY_TIME);a.scaytCharacters++;a.scaytCharacters>a.SCAYT_DELAY_CHARS&&a.performScayt()})},performScayt:function(){clearTimeout(this.scaytTimeout);this.scaytTimeout=false;this.scaytCharacters=0;this.checkEditbox()}};
CKEDITOR.plugins.add("rte-template",{init:function(a){CKEDITOR.dialog.add("rte-template",this.path+"dialogs/template.js");a.ui.addRichCombo("Template",{label:a.lang.templateDropDown.label,title:a.lang.templateDropDown.title,className:"cke_template",multiSelect:false,panel:{css:[CKEDITOR.getUrl(a.skinPath+"editor.css")].concat(a.config.contentsCss)},init:function(){this.startGroup(a.lang.templateDropDown.title);var b=window.RTETemplatesDropdown;for(t=0;t<b.length;t++){var c=b[t].replace(/_/g," ");
this.add(b[t],window.RTEMessages.template+":"+c,c)}this.add("--other--","<strong>"+a.lang.templateDropDown.chooseAnotherTpl+"</strong>",a.lang.templateDropDown.chooseAnotherTpl)},onClick:function(b){RTE.log('template dropdown: "'+b+'"');if(b=="--other--")RTE.templateEditor.createTemplateEditor(false);else{RTE.track("template","dialog","search","dropdown",b);RTE.templateEditor.createTemplateEditor(b)}var c=this;setTimeout(function(){c.setValue(false)},50)}})}});
RTE.templateEditor={placeholder:false,data:{},dialog:{},doPreview:function(a){RTE.log("generating preview...");$("#templatePreview").html("").addClass("loading");var b={};$("#templateParameters").find("textarea").each(function(){var e=$(this).attr("rel"),h=$(this).attr("value");b[e]=h});var c=this.data.wikitext=this.generateWikitext(this.data.title,b);RTE.tools.parse(c,function(e){$("#templatePreview").html(e).removeClass("loading");$("#templatePreview").bind("click",function(h){h.preventDefault()});
typeof a=="function"&&a()})},generateWikitext:function(a,b){var c,e=this.placeholder?this.placeholder.getData():false,h=e.wikitext.replace(/\[\[([^|\]]+)\|([^\]]+)\]\]/g,"[[$1$2]]").substring(2,e.wikitext.length-2).split("|"),j=[h.shift()],g=0,f=false;if(h.length==0){j=[a+"\n"];f=true}$.each(h,function(d,k){var l=k.match(/([^=]+)( *\= *)(.*)(\n?)/);if(l){var m=$.trim(l[1]),p=l[2],r=l[3],u=l[4];if(u!="")f=true;if(typeof b[m]!="undefined"){j.push(l[1]+p+b[m]+u);delete b[m]}}else{l=k.match(/(.*)(\n?)/);
m=++g;r=l[1];u=l[2];if(u!="")f=true;if(typeof b[m]!="undefined")j.push(b[m]+u);else $.trim(r)?j.push(r+u):j.push("");delete b[m]}});$.each(b,function(d,k){if(typeof k!="undefined")if(parseInt(d)&&parseInt(d)==d){j.push(k!=""?k:"");if(h.length==0)j[0]=$.trim(j[0])}else if(k!="")j.push(d+" = "+k+(f?"\n":""))});c="{{";c+=j.join("|").replace("","|").replace(/[\n|]+$/g,"").replace(/\n+$/g,"");c+="}}";$().log(e.wikitext,"RTE: old wikitext");$().log(c,"RTE: new wikitext");return c},selectStep:function(a){RTE.log("showing step #"+
a);RTE.log(this.placeholder);var b=this.dialog;b.selectPage("step"+a);var c=this.placeholder.data("info"),e=this.placeholder.getData();$(".templateEditorDialog").find(".cke_dialog_footer").hide();switch(a){case 1:var h=function(){var g="";$(window.RTEHotTemplates).each(function(f,d){g+='<li><a rel="'+d+'">'+d.replace(/_/g," ")+"</a></li>"});$("#templateEditorHotTemplates").html(g);g="";$(window.RTEMagicWords.magicWords).each(function(f,d){g+='<li><a rel="'+d+'">'+d.toUpperCase()+"</a></li>"});$("#templateEditorMagicWords").html(g);
$("#templateEditorHotTemplates").find("a").click(function(){var f=$(this).attr("rel");RTE.templateEditor.selectTemplate(b,f)});$("#templateEditorMagicWords").find("a").click(function(){var f=$(this).attr("rel");RTE.log("adding magic word: "+f);var d={};if(RTEMagicWords.doubleUnderscores.indexOf(f)>-1){d.type="double-underscore";d.wikitext="__"+f.toUpperCase()+"__"}else{d.type="double-brackets";d.title=f.toUpperCase();d.wikitext="{{"+f.toUpperCase()+"}}"}RTE.log(d);f=RTE.templateEditor.placeholder;
f.setPlaceholderType(d.type);f.setData(d);RTE.templateEditor.usePlaceholder(f);b.hide();RTE.templateEditor.commitChanges()});b.enableSuggesionsOn(b.getContentElement("step1","templateSearchQuery"),[10])};if(typeof window.RTEHotTemplates=="undefined"){b.setLoading(true);RTE.ajax("getHotTemplates",{},function(g){b.setLoading(false);window.RTEHotTemplates=g;h()})}else h();break;case 2:$(".templateEditorDialog").find(".cke_dialog_footer").show();a=c.title.replace(/_/g," ");a=a.replace(/^Template:/,window.RTEMessages.template+
":");$("#templateEditorTemplateName").html(a);a=window.wgServer+window.wgArticlePath.replace(/\$1/,encodeURI(c.title.replace(/ /g,"_")));$("#templateEditorViewLink").attr("href",a);var j="";$.each(c.availableParams,function(g,f){var d=c.passedParams&&typeof c.passedParams[f]!="undefined"?c.passedParams[f]:"";d=d.replace(/&/g,"&amp;");var k=parseInt(f)?"#"+parseInt(g+1):f;j+='<dt><label for="templateEditorParameter'+g+'">'+k+"</label></dt>";j+='<dd><textarea rel="'+f+'" id="templateEditorParameter'+
g+'">'+d+"</textarea></dd>"});$("#templateParameters").html(j);this.doPreview();break;case 3:$("#templateAdvEditorSource").attr("value",e.wikitext);RTE.tools.parse(e.wikitext,function(g){$("#templateAdvPreview").html(g)})}},selectTemplate:function(a,b){RTE.log("selecting template: "+b);var c={title:b,wikitext:"{{"+b+"}}"};this.placeholder.setPlaceholderType("double-brackets");this.placeholder.setData(c);RTE.templateEditor.usePlaceholder(this.placeholder);a.setLoading(true);var e=this;RTE.tools.resolveDoubleBrackets(c.wikitext,
function(h){a.setLoading(false);e.placeholder.data("info",h);if(typeof h.availableParams!="undefined"&&h.availableParams.length>0)RTE.templateEditor.selectStep(2);else{RTE.log("given template contains no params - inserting / updating...");RTE.templateEditor.commitChanges();a.hide()}})},usePlaceholder:function(a){this.placeholder=a;this.data=a.getData()},commitChanges:function(){RTE.log("storing modified template data");RTE.log(this.data);this.placeholder.setData(RTE.templateEditor.data);this.placeholder.removeData("preview");
this.placeholder.removeData("info");this.placeholder.parent().exists()||RTE.tools.insertElement(this.placeholder);this.placeholder=false;this.data={}},showTemplateEditor:function(a){RTE.log("calling template editor...");RTE.templateEditor.usePlaceholder(a);RTE.instance.openDialog("rte-template")},createTemplateEditor:function(a){var b=RTE.tools.createPlaceholder("double-brackets");if(a==false){RTE.log("calling template editor to choose a template...");this.showTemplateEditor(b)}else{RTE.log('calling template editor for new template "'+
a+'"');var c="{{"+a+"}}";b.setData({title:a,wikitext:c});var e=this;RTE.tools.resolveDoubleBrackets(c,function(h){b.data("info",h);if(typeof h.availableParams!="undefined"&&h.availableParams.length>0)e.showTemplateEditor(b);else{RTE.log("given template contains no params - inserting...");RTE.tools.insertElement(b)}})}}};
CKEDITOR.dialog.add("rte-template",function(a){a=a.lang.templateEditor;var b=window.wgArticlePath.replace(/\$1/,a.dialog.magicWordsLink.replace(/ /g,"_"));return{title:a.title,minWidth:760,minHeight:365,buttons:[{id:"chooseAnotherTpl",type:"button",label:a.editor.chooseAnotherTpl,className:"cke_dialog_choose_another_tpl",buttonType:"secondary",onClick:function(){RTE.templateEditor.selectStep(1)}},CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton],contents:[{id:"step1",label:"Step 1",elements:[{type:"hbox",
widths:["300px","300px","30px"],children:[{type:"html",className:"templateEditorHeader dark_text_2",html:a.dialog.search},{id:"templateSearchQuery",style:"margin-top: 7px",type:"text"},{id:"templateDoSearch",type:"button",label:a.dialog.insert,style:"position: relative; top: 6px",onClick:function(){var c=this.getDialog(),e=c.getValueOf("step1","templateSearchQuery");if(e!=""){RTE.templateEditor.selectTemplate(c,e);RTE.track("template","dialog","search","suggest",e)}}}]},{type:"html",html:"<hr />"},
{type:"html",className:"templateEditorHeader",html:a.dialog.browse},{type:"hbox",widths:["510px","250px"],children:[{type:"html",html:"<h2>"+a.dialog.mostFrequentlyUsed+'</h2><ul id="templateEditorHotTemplates"></ul>'},{type:"html",html:'<h2><a id="templateLinkToHelp" target="_blank" href="'+b+'">'+a.dialog.magicWords+'</a></h2><ul id="templateEditorMagicWords"></ul>'}]}]},{id:"step2",label:"Step 2",elements:[{type:"html",html:'<div id="templateEditorIntro"><h1 id="templateEditorTemplateName" class="dark_text_2"></h1><a id="templateEditorViewLink" href="#" target="_blank">'+
a.editor.viewTemplate+"</a><p>"+a.editor.intro+"</p></div>"},{type:"hbox",widths:["330px","100px","330px"],children:[{type:"html",html:"<h2>"+a.editor.parameters+'</h2><dl id="templateParameters"></dl>'},{type:"button",label:a.editor.previewButton,onClick:function(){var c=this;this.disable();RTE.templateEditor.doPreview.apply(RTE.templateEditor,[function(){c.enable()}]);RTE.track("template","dialog","editor","preview")}},{type:"html",html:"<h2>"+a.editor.previewTitle+'</h2><div id="templatePreview" class="reset"></div>'}]}]}],
onOk:function(){switch(parseInt(this.getActiveTab().charAt(4))){case 1:this.getContentElement("step1","templateDoSearch").fire("click");return false;case 2:RTE.templateEditor.doPreview(function(){RTE.templateEditor.commitChanges()});break;case 3:RTE.templateEditor.data.wikitext=$("#templateAdvEditorSource").attr("value");RTE.templateEditor.commitChanges()}},onShow:function(){this._.element.addClass("wikiaEditorDialog");this._.element.addClass("templateEditorDialog");RTE.templateEditor.dialog=this;
RTE.templateEditor.data=RTE.templateEditor.placeholder.getData();var c=RTE.templateEditor.placeholder.data("info"),e=1;if(c){RTE.log(c);e=2}this.getButton("ok").on("click",function(){RTE.track("template","dialog","editor","ok")});this.getButton("chooseAnotherTpl").on("click",function(){RTE.track("template","dialog","editor","chooseAnother")});RTE.templateEditor.selectStep(e)},onHide:function(){var c=this.getActiveTab()=="step1"?"search":"editor";RTE.track("template","dialog",c,"close")},onFocus:function(){}}});
CKEDITOR.plugins.add("rte-temporary-save",{init:function(a){a.on("instanceReady",function(){var b=$("#RTETemporarySaveType").attr("value");if(b){RTE.log('restoring temporary save (using "'+b+'" mode)');var c=$("#RTETemporarySaveContent").attr("value");a.setMode(b);a.setData(c);RTE.track("temporarySave","restore")}});$(window).bind("beforeunload",function(){RTE.log("onbeforeunload: performing temporary save");$("#RTETemporarySaveType").attr("value",RTE.instance.mode);$("#RTETemporarySaveContent").attr("value",
RTE.instance.getData());RTE.track("temporarySave","store")})}});
CKEDITOR.plugins.add("rte-toolbar",{editorContainer:false,updateToolbarLock:false,renderToolbar:function(a,b,c,e,h){var j=window.skin=="oasis"?"":" color1",g="";if(b>1)g='style = "display: none" ';b=["<table "+g+'class="cke_toolbar_tab" id="cke_toolbar'+b+'"><tr>'];for(g=0;g<c.length;g++){var f=c[g],d=f.msg;if(typeof h[f.msg]!="undefined")d=h[f.msg];b.push('<td><span class="headline'+j+'">'+d+"</span>");b.push('<div class="bucket_buttons'+j+'"><div class="'+j+'">');for(d=0;d<f.groups.length;d++){var k=
f.groups[d],l=k.length;if(k!=false){b.push('<span class="cke_buttons_group cke_buttons_group_'+g+'">');for(var m=0;m<l;m++){var p=e.ui.create(k[m]);if(p){p.wrapperClassName="";if(m==0)p.wrapperClassName+="cke_button_first ";if(m==l-1)p.wrapperClassName+="cke_button_last ";p.render(e,b)}}b.push("</span>")}}b.push('</div></div><span class="tagline'+j+'"></span></td>')}b.push("</tr></table>");b.push('<div id="mw-toolbar"></div>');a.data.html+=b.join("")},init:function(a){var b=this;a.on("mode",function(){a.mode==
"source"?$(".cke_toolbar_tab_tabs").hide():$(".cke_toolbar_tab_tabs").show()});a.on("themeSpace",function(c){if(c.data.space=="top"){var e=a.config["toolbar_"+a.config.toolbar];$("body").trigger(jQuery.Event("RTE_beforeToolbarRender"),[e]);var h=RTE.instance.lang.bucket;c.data.html+='<div style="display:none" class="cke_toolbar_tab_tabs" >';if(e.length>1)for(var j="",g=0;g<e.length;g++){j="";if(g==0)j='class="first selected"';c.data.html+="<span "+j+' data-order="'+(g+1)+'" >'+e[g].name+"</span>"}c.data.html+=
"</div>";for(g=0;g<e.length;g++)b.renderToolbar(c,g+1,e[g].data,a,h);setTimeout(function(){$(".cke_toolbar_tab_tabs span").click(function(f){element=$(f.target);if(!element.hasClass("selected")){a.fire("toolbartabswitch");$(".cke_toolbar_tab").hide();$("#cke_toolbar"+element.attr("data-order")).show();$(".cke_toolbar_tab_tabs span").removeClass("selected");element.addClass("selected")}});b.updateToolbar.apply(b)},50)}});a.on("instanceReady",function(){var c=$("#cke_toolbar1");RTE.tools.getThemeColors();
window.skin=="monaco"&&c.find(".color1").css({backgroundColor:RTE.config.baseBackgroundColor,color:RTE.config.baseColor});c.parent().parent().attr("id","cke_toolbar_row");$(window).resize(function(){b.updateToolbar.apply(b)});a.on("widescreen",function(){b.updateToolbar.apply(b)});b.updateToolbar();c.find("td").hover(function(){b.showBucket.apply(this)},function(){b.hideBucket.apply(this);setTimeout(function(){b.updateToolbar.apply(b)},10)})});a.on("instanceReady",function(){var c=$("#cke_top_wpTextbox1");
RTE.tools.getThemeColors();c.css({backgroundColor:RTE.config.baseBackgroundColor,color:RTE.config.baseColor});a.fire("toolbarReady",$("#cke_toolbar1"));b.editorContainer=$(RTE.instance.container.$).find(".cke_contents")});a.on("mode",function(){this.mode=="source"&&b.loadSourceToolbar()});a.on("modeSwitch",function(){this.mode=="wysiwyg"&&b.loadSourceToolbar()});window.insertTags=function(c,e,h){function j(){if(f){if(f.charAt(f.length-1)==" "){f=f.substring(0,f.length-1);e+=" "}}else{f=h;d=true}}
var g=b.editorContainer.children("textarea")[0],f,d=false;if(document.selection&&document.selection.createRange){if(document.documentElement&&document.documentElement.scrollTop)var k=document.documentElement.scrollTop;else if(document.body)k=document.body.scrollTop;g.focus();g=document.selection.createRange();f=g.text;j();g.text=c+f+e;if(d&&g.moveStart){if(window.opera)e=e.replace(/\n/g,"");g.moveStart("character",-e.length-f.length);g.moveEnd("character",-e.length)}g.select();if(document.documentElement&&
document.documentElement.scrollTop)document.documentElement.scrollTop=k;else if(document.body)document.body.scrollTop=k}else if(g.selectionStart||g.selectionStart=="0"){k=g.scrollTop;g.focus();var l=g.selectionStart,m=g.selectionEnd;f=g.value.substring(l,m);j();g.value=g.value.substring(0,l)+c+f+e+g.value.substring(m,g.value.length);if(d){g.selectionStart=l+c.length;g.selectionEnd=l+c.length+f.length}else{g.selectionStart=l+c.length+f.length+e.length;g.selectionEnd=g.selectionStart}g.scrollTop=k}}},
updateToolbar:function(){var a=this;if(window.skin!="oasis")if(this.updateToolbarLock)setTimeout(function(){a.updateToolbar.apply(a)},300);else{this.updateToolbarLock=true;var b=false;$("#cke_toolbar1").find("td").each(function(){var e=0,h=$(this),j=h.children(".bucket_buttons").children("div");if(parseInt(j.height())>60){var g=j.children(".cke_buttons_group"),f=Math.floor(j.offset().top);g.reverse().each(function(){if(Math.floor($(this).offset().top)<f+30)return false;e+=$(this).children().length;
b=true})}if(e>0){h.find(".tagline").html(e+" "+RTE.messages.more);h.addClass("more")}else{h.find(".tagline").html("<div> </div>");h.removeClass("more")}});b?$("#cke_toolbar1").addClass("more"):$("#cke_toolbar1").removeClass("more");var c=200;$("#cke_toolbar1").find("td").each(function(){var e=0;$(this).children().each(function(){e+=$(this).height()});c=Math.min(c,e)});(CKEDITOR.env.ie?$("#cke_top_wpTextbox1").parent():$("#cke_top_wpTextbox1")).height(c);RTE.repositionRTEStuff();setTimeout(function(){a.updateToolbarLock=
false},250)}},showBucket:function(){var a=$(this).find(".bucket_buttons");a.children("div").css("height","auto");a.parent().addClass("bucket_expanded")},hideBucket:function(){var a=$(this).find(".bucket_buttons"),b=a.children("div");a.parent().removeClass("bucket_expanded");b.css("height","auto")},loadSourceToolbar:function(){var a=$("#mw-toolbar");if(a.children().length==0){var b,c=a.get(0);for(b=0;b<mwEditButtons.length;b++)mwInsertEditButton(c,mwEditButtons[b]);for(b=0;b<mwCustomEditButtons.length;b++)mwInsertEditButton(c,
mwCustomEditButtons[b]);typeof GlobalTriggers!="undefined"&&GlobalTriggers.fire("beforeMWToolbarRender",a[0]);RTE.log("loading source mode toolbar")}}});CKEDITOR.plugins.add("rte-tools",{});
window.RTE.tools={alert:function(a,b){window.$.showModal(a,"<p>"+b+"</p>",{className:"RTEModal",width:500})},blockCommandInHeader:function(a){var b=RTE.instance;if(a=b.getCommand(a))b.on("selectionChange",CKEDITOR.tools.bind(RTE.tools.blockCommandInHeaderOnSelectionChange,a))},blockCommandInHeaderOnSelectionChange:function(a){a=a.data.path;return this.setState(/h\d/.test(a.block?a.block.getName():"")?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)},callFunction:function(a,b,c){if(typeof a=="function"){var e=
jQuery.Event("rte");e.data=typeof c=="object"?c:{};e.data.element=b||false;e.target=window.document.createElement("div");a.call(window,e)}},checkInternalLink:function(a,b){var c="";if(/^#(.+)/.test(b)){c=b;b=window.wgPageName}RTE.ajax("checkInternalLink",{title:b},function(e){e.exists?a.removeClass("new"):a.addClass("new");a.setAttribute("href",e.href+c);a.setAttribute("title",e.title)})},confirm:function(a,b,c){$.showModal(a,"<p>"+b+'</p><div class="RTEConfirmButtons neutral"><a id="RTEConfirmCancel" class="wikia-button secondary"><span>'+
RTE.instance.lang.common.cancel+'</span></a><a id="RTEConfirmOk" class="wikia-button"><span>'+RTE.instance.lang.common.ok+"</span></a></div>",{id:"RTEConfirm",className:"RTEModal",width:500,callbackBefore:function(){$("#RTEConfirmOk").click(function(){$("#RTEConfirm").closeModal();typeof c=="function"&&c()});$("#RTEConfirmCancel").click(function(){$("#RTEConfirm").closeModal()})}})},createPlaceholder:function(a,b){var c=$("<img />",RTE.instance.document.$);c.addClass("placeholder placeholder-"+a);
c.attr("src",wgBlankImgUrl).attr("type",a).attr("data-rte-instance",RTE.instanceId);b=b&&typeof b=="object"?b:{};b.type=a;b.placeholder=true;c.setData(b);RTE.log('creating new placeholder for "'+a+'"');RTE.log(c);return c},disableDragDrop:function(a){a.bind("mousedown",function(b){b.preventDefault()})},getEditorHeight:function(){return $("#cke_contents_wpTextbox1").height()},getEditorScrollOffsets:function(){var a,b;if(CKEDITOR.env.webkit){a=RTE.instance.document.$.body.scrollLeft;b=RTE.instance.document.$.body.scrollTop}else{a=
RTE.instance.document.$.documentElement.scrollLeft;b=RTE.instance.document.$.documentElement.scrollTop}return{left:a,top:b}},getThemeColors:function(){var a=$("#RTEColorPicker");a.exists()||(a=$('<div id="RTEColorPicker">').addClass("color1").appendTo(RTE.stuffNode).hide());RTE.config.baseBackgroundColor=a.css("backgroundColor");RTE.config.baseColor=a.css("color")},getImages:function(){return RTE.getEditor().find("img.image")},getMedia:function(){return RTE.getEditor().find("img.image,img.video")},
getPlaceholderPosition:function(a){a=a.position();var b=this.getEditorScrollOffsets();return{left:parseInt(a.left-10-b.left),top:parseInt(a.top-b.top)}},getPlaceholders:function(a){return RTE.getEditor().find(a?"img[type="+a+"]":"img.placeholder")},getSelectionContent:function(){return CKEDITOR.env.ie?RTE.instance.document.$.selection.createRange().text:RTE.instance.window.$.getSelection().toString()},getVideos:function(){return RTE.getEditor().find("img.video")},insertElement:function(a,b){RTE.instance.insertElement(new CKEDITOR.dom.element($(a)[0]));
b||RTE.instance.fire("wysiwygModeReady")},isExternalLink:function(a){return this.isExternalLinkRegExp.test(a)},isExternalLinkRegExp:RegExp("^"+window.RTEUrlProtocols),parseCache:{},parse:function(a,b){var c=RTE.tools.parseCache;if(typeof c[a]!="undefined"){RTE.log("RTE.tools.parse() - cache hit");typeof b=="function"&&b(c[a])}else RTE.ajax("parse",{wikitext:a,title:window.wgPageName},function(e){c[a]=e.html;typeof b=="function"&&b(e.html)})},parseRTE:function(a,b){RTE.ajax("rteparse",{wikitext:a,
title:window.wgPageName},function(c){typeof b=="function"&&b(c.html)})},renumberExternalLinks:function(){RTE.getEditor().find("a.autonumber").each(function(a){$(this).text("["+(a+1)+"]")})},removeElement:function(a){RTE.instance.fire("saveSnapshot");$(a).remove();RTE.instance.fire("saveSnapshot")},removeResizeBox:function(){setTimeout(function(){if(CKEDITOR.env.gecko){var a=RTE.instance.document.$;a.designMode="off";a.designMode="on"}},50)},resolveDoubleBracketsCache:{},resolveDoubleBrackets:function(a,
b){var c=RTE.tools.resolveDoubleBracketsCache;if(typeof c[a]!="undefined"){RTE.log("RTE.tools.resolveDoubleBrackets() - cache hit");typeof b=="function"&&b(c[a])}else RTE.ajax("resolveDoubleBrackets",{wikitext:a,title:window.wgPageName},function(e){c[a]=e;typeof b=="function"&&b(e)})},unselectable:function(){}};CKEDITOR.nodeRunner=function(){};
CKEDITOR.nodeRunner.prototype={walk:function(a,b){if(!(a.type!=CKEDITOR.NODE_ELEMENT||a.isReadOnly()||this.isSkipped(a))){var c,e=a.getChildren(),h;for(h=0;h<e.count();h++){c=e.getItem(h);b.call(b,c);this.walk(c,b)}}},walkTextNodes:function(a,b){this.walk(a,function(c){c.type==CKEDITOR.NODE_TEXT&&b(c)})},isSkipped:function(){return false}};
CKEDITOR.plugins.add("rte-track",{init:function(a){var b=this;a.on("wysiwygModeReady",function(){a.document.removeListener(b.trackApplyStyle);a.document.on("applyStyle",b.trackApplyStyle)});a.on("contextMenuOnOpen",b.trackContextMenuOpen);a.on("contextMenuOnClick",b.trackContextMenuItem);a.on("listCreated",b.trackListCreated);a.on("RTEready",function(){b.trackLoadTime(a)});a.on("RTEready",function(){b.trackBrowser("init")});$("#wpSave").click(function(){b.trackBrowser("save")});a.on("buttonClick",
function(c){RTE.track("toolbar",c.data.button.command)});a.on("panelShow",function(c){c=c.data.me;c=c.trackingName||c.className.split("_").pop();RTE.track("toolbar",c+"Menu","open")});a.on("panelClick",function(c){var e=c.data.me;c=c.data.value;var h=e.trackingName||e.className.split("_").pop();if(h=="template")if(c=="--other--")c="other";else{e=e._.items;var j=0;for(tpl in e){j++;if(tpl==c){c=j;break}}}RTE.track("toolbar",h+"Menu",c)});a.on("instanceReady",function(){$("#mw-toolbar").bind("click",
function(c){c=$(c.target).filter("img");if(c.exists()){c=c.attr("id").split("-").pop();RTE.track("source",c)}})})},trackApplyStyle:function(a){var b=a.data.style;a=a.data.remove;b&&!a&&RTE.track("toolbar","format",b)},trackContextMenuOpen:function(){RTE.track("contextMenu","open")},trackContextMenuItem:function(a){a=a.data.item.command;var b,c=["cell","row","column"];for(b=0;b<c.length;b++){var e=c[b];if(a.indexOf(e)==0){RTE.track("contextMenu","action",e,a);return}}RTE.track("contextMenu","action",
a)},trackListCreated:function(a){a=a.data.listNode.getName()=="ul"?"unorderedList":"orderedList";RTE.track("format",a)},trackLoadTime:function(a){var b=parseInt(RTE.loadTime*10)*100;switch(a.mode){case "source":RTE.track("init","sourceMode",b);window.RTEEdgeCase&&RTE.track("init","edgecase",window.RTEEdgeCase);break;case "wysiwyg":RTE.track("init","wysiwygMode",b)}},trackBrowser:function(a){var b=CKEDITOR.env,c=b.ie?"ie":b.gecko?"gecko":b.opera?"opera":b.air?"air":b.webkit?"webkit":"unknown";b=c==
"gecko"?parseInt(b.version/1E4)+"."+parseInt(b.version/100%100)+"."+b.version%100:b.version;RTE.track("browser",a,c,b)}});CKEDITOR.plugins.add("rte-widescreen",{init:function(a){var b=window.ToggleWideScreen,c=$("body").hasClass("editingWide")?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;a.addCommand("widescreen",{exec:function(e){b.call();this.toggleState();e.fire("widescreen")},state:c});a.ui.addButton("Widescreen",{title:a.lang.widescreen.toggle,className:"RTEWidescreenButton",command:"widescreen"})}});
CKEDITOR.themes.add("wikia",function(){return{build:function(a){var b=a.name,c=a.element,e=a.elementMode;if(!(!c||e==CKEDITOR.ELEMENT_MODE_NONE)){e==CKEDITOR.ELEMENT_MODE_REPLACE&&c.hide();var h=a.fire("themeSpace",{space:"top",html:""}).html,j=a.fire("themeSpace",{space:"contents",html:""}).html,g=a.fireOnce("themeSpace",{space:"bottom",html:""}).html,f=j&&a.config.height,d=a.config.tabIndex||a.element.getAttribute("tabindex")||0;if(j)isNaN(f)||(f+="px");else f="auto";var k="",l=a.config.width;if(l){isNaN(l)||
(l+="px");k+="width: "+l+";"}l=1;var m="";if(window.skin=="oasis"&&!window.wgIsMainpage){l=2;m='<td id="cke_contents_'+b+'_sidebar"></td>'}b=CKEDITOR.dom.element.createFromHtml(['<span id="cke_',b,'" class="',a.skinClass,'" dir="',a.lang.dir,'" title="',CKEDITOR.env.gecko?" ":"",'" lang="',a.langCode,'" tabindex="'+d+'"'+(k?' style="'+k+'"':"")+'><span class="',CKEDITOR.env.cssClass,'"><span class="cke_wrapper cke_',a.lang.dir,'"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0"><tbody><tr',
h?"":' style="display:none"','><td id="cke_top_',b,'" class="cke_top" colspan="',l,'" style="background-color: '+a.config.baseBackgroundColor+"; color:"+a.config.baseColor+'">',h,"</td></tr><tr",j?"":' style="display:none"','><td id="cke_contents_',b,'" class="cke_contents" style="height:',f,'">',j,"</td>",m,"</tr><tr",g?"":' style="display:none"','><td id="cke_bottom_',b,'" class="cke_bottom" colspan="',l,'">',g,"</td></tr></tbody></table><style>.",a.skinClass,"{visibility:hidden;}</style></span></span></span>"].join(""));
b.getChild([0,0,0,0,0]).unselectable();b.getChild([0,0,0,0,2]).unselectable();e==CKEDITOR.ELEMENT_MODE_REPLACE?b.insertAfter(c):c.append(b);a.container=b;b.disableContextMenu();a.fireOnce("themeLoaded");a.fireOnce("uiReady")}},buildDialog:function(a){var b=CKEDITOR.tools.getNextNumber();a=CKEDITOR.dom.element.createFromHtml(['<div id="cke_'+a.name.replace(".","\\.")+'_dialog" class="cke_skin_',a.skinName,'" dir="',a.lang.dir,'" lang="',a.langCode,'"><div class="cke_dialog modalWrapper'," "+CKEDITOR.env.cssClass,
" cke_",a.lang.dir,'" style="position:absolute"><div class="%body"><div id="%title#" class="%title"></div><div id="%close_button#" class="%close_button"><img src="'+window.stylepath+'/common/blank.gif" class="sprite close" /></div><div id="%tabs#" class="%tabs accent tabs"></div><div id="%contents#" class="%contents"></div><div id="%footer#" class="%footer"></div></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></div>',
CKEDITOR.env.ie?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+b).replace(/%/g,"cke_dialog_"));b=a.getChild([0,0]);b.getChild(0).unselectable();b.getChild(1).unselectable();b.getChild(0).setStyles({backgroundColor:RTE.config.baseBackgroundColor,color:RTE.config.baseColor});return{element:a,parts:{dialog:a.getChild(0),title:b.getChild(0),close:b.getChild(1),tabs:b.getChild(2),contents:b.getChild(3),footer:b.getChild(4)}}},destroy:function(a){var b=a.container,
c=a.panels;if(CKEDITOR.env.ie){b.setStyle("display","none");var e=document.body.createTextRange();e.moveToElementText(b.$);try{e.select()}catch(h){}}b&&b.remove();for(b=0;c&&b<c.length;b++)c[b].remove();if(a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE){a.element.show();delete a.element}}}}());CKEDITOR.editor.prototype.getThemeSpace=function(a){a="cke_"+a;return this._[a]||(this._[a]=CKEDITOR.document.getById(a+"_"+this.name))};
CKEDITOR.editor.prototype.resize=function(a,b,c,e){if(/^\d+$/.test(a))a+="px";var h=CKEDITOR.document.getById("cke_contents_"+this.name);e=e?h.getAscendant("table").getParent():h.getAscendant("table").getParent().getParent().getParent();CKEDITOR.env.webkit&&e.setStyle("display","none");e.setStyle("width",a);CKEDITOR.env.webkit&&e.setStyle("display","");h.setStyle("height",Math.max(b-(c?0:(e.$.offsetHeight||0)-(h.$.clientHeight||0)),0)+"px");this.fire("resize")};
CKEDITOR.editor.prototype.getResizable=function(){return this.container.getChild([0,0])};
CKEDITOR.skins.add("wikia",function(){var a=[];CKEDITOR.env.ie&&CKEDITOR.env.version<7&&a.push("icons.png","images/sprites_ie6.png","images/dialog_sides.gif");return{preload:a,editor:{css:[window.RTEDevMode?"editor.css":"editor.min.css"]},dialog:{css:["dialog.css"]},templates:{css:["templates.css"]},margins:[0,0,0,0],init:function(b){function c(d){d=d.getHead().append("style");d.setAttribute("id","cke_ui_color");d.setAttribute("type","text/css");return d}function e(d,k,l){for(var m,p,r,u=0;u<d.length;u++)if(CKEDITOR.env.webkit){for(p=
0;p<d[u].$.sheet.rules.length;p++)d[u].$.sheet.removeRule(p);for(p=0;p<k.length;p++){r=k[p][1];for(m=0;m<l.length;m++)r=r.replace(l[m][0],l[m][1]);d[u].$.sheet.addRule(k[p][0],r)}}else{r=k;for(m=0;m<l.length;m++)r=r.replace(l[m][0],l[m][1]);if(CKEDITOR.env.ie)d[u].$.styleSheet.cssText=r;else d[u].setHtml(r)}}if(b.config.width&&!isNaN(b.config.width))b.config.width-=12;var h=[],j="/* UI Color Support */.cke_skin_wikia .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_wikia .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_wikia .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_wikia .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_wikia .cke_menuitem a:hover .cke_label,.cke_skin_wikia .cke_menuitem a:focus .cke_label,.cke_skin_wikia .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_wikia .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_wikia .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_wikia .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_wikia .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_wikia .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_wikia .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_wikia .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_wikia .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_wikia .cke_menuitem a:hover,.cke_skin_wikia .cke_menuitem a:focus,.cke_skin_wikia .cke_menuitem a:active{\tbackground-color: $color !important;}";
if(CKEDITOR.env.webkit){j=j.split("}").slice(0,-1);for(var g=0;g<j.length;g++)j[g]=j[g].split("{")}var f=/\$color/g;CKEDITOR.tools.extend(b,{uiColor:null,getUiColor:function(){return this.uiColor},setUiColor:function(d){var k,l=c(CKEDITOR.document),m="#cke_"+b.name.replace(".","\\.");m=[m+" .cke_wrapper",m+"_dialog .cke_dialog_contents",m+"_dialog a.cke_dialog_tab",m+"_dialog .cke_dialog_footer"].join(",");k=CKEDITOR.env.webkit?[[m,"background-color: $color !important;"]]:m+"{background-color: $color !important;}";
return(this.setUiColor=function(p){var r=[[f,p]];b.uiColor=p;e([l],k,r);e(h,j,r)})(d)}});b.on("menuShow",function(d){d=d.data[0].element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!d.getById("cke_ui_color")){d=c(d);h.push(d);var k=b.getUiColor();k&&e([d],j,[[f,k]])}});b.config.uiColor&&b.setUiColor(b.config.uiColor)}}}());
if(CKEDITOR.dialog)CKEDITOR.dialog.on("resize",function(a){a=a.data;var b=a.width,c=a.height,e=a.dialog.parts.contents;if(a.skin=="wikia"){e.setStyles(CKEDITOR.env.ie||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900?{width:b+"px",height:c+"px"}:{"min-width":b+"px","min-height":c+"px"});CKEDITOR.env.ie&&setTimeout(function(){var h=e.getParent(),j=h.getParent(),g=j.getChild(2);g.setStyle("width",h.$.offsetWidth+"px");g=j.getChild(7);g.setStyle("width",h.$.offsetWidth-28+"px");g=j.getChild(4);g.setStyle("height",
h.$.offsetHeight-31-14+"px");g=j.getChild(5);g.setStyle("height",h.$.offsetHeight-31-14+"px")},100)}});