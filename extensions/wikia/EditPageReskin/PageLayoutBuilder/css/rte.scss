@import "../../../../../skins/oasis/css/mixins/border-radius";
@import "../../../../../skins/oasis/css/mixins/gradient";
@import "../../../../../skins/oasis/css/mixins/box-shadow";
@import "../../../../../skins/oasis/css/mixins/clearfix";
@import "../../../../../skins/oasis/css/core/color";

$color-background-hover: mix($color-buttons,$color-page,6%);
$color-background-selected: mix($color-buttons,$color-page,18%);

$widget-margin-std: 5px 4px 3px 9px;
$widget-margin-hover: 4px 3px 2px 9px;
$widget-margin-block-std: 13px 4px 13px 9px;
$widget-margin-block-hover: 12px 3px 12px 9px;
.plb-rte-widget {
	position: relative;
	cursor: pointer;

	// inline/block specification
	display: inline;
	zoom: 1;
	display: inline-block;
	&.plb-rte-widget-plb_mlinput {
		display: block;

		.plb-rte-widget-sample-text {
			display: block;
		}
	}

	&.plb-rte-widget-plb_image {
		img {
			display: block;
			zoom: 1;
		}
	}

	// padding
	padding: 5px 5px 5px 12px;
	&.plb-rte-widget-plb_mlinput { padding: 12px 5px 12px 15px; }
	&.plb-rte-widget-plb_image { padding: 15px; }

	// margin
	margin: $widget-margin-std;
	&.plb-rte-widget-plb_mlinput { margin: $widget-margin-block-std; }
	&.plb-rte-widget-plb_image.plb-rte-widget-align-center {
		margin: $widget-margin-block-std;
		margin-left: auto;
		margin-right: auto;
	}

	// border and background on hover
	border-style: solid;
	border-width: 1px;
	border-color: transparent;
	&.plb-rte-widget-plb_input { border-left-color: #5ba70d; }
	&.plb-rte-widget-plb_mlinput { border-left-color: #a33e17; }
	&.plb-rte-widget-plb_sinput { border-left-color: #7f36ae; }
	&.plb-rte-widget-plb_image { border-left-color: #0043ad; }
	&.plb-rte-widget-plb_input.hover, &.plb-rte-widget-plb_input.selected { border-color: #5ba70d; }
	&.plb-rte-widget-plb_mlinput.hover, &.plb-rte-widget-plb_mlinput.selected { border-color: #a33e17; }
	&.plb-rte-widget-plb_sinput.hover, &.plb-rte-widget-plb_sinput.selected { border-color: #7f36ae; }
	&.plb-rte-widget-plb_image.hover, &.plb-rte-widget-plb_image.selected { border-color: #0043ad; }

	&.hover, &.selected {
//		border-width: 1px;
//		margin: $widget-margin-hover;
		background-image: url(/extensions/wikia/PageLayoutBuilder/widget/images/widget-hover-background.png); /* $wgCdnStylePath */
		background-repeat: repeat;
//		background-color: transparent;
		background-color: $color-background-hover;

		&.plb-rte-widget-plb_mlinput, .WikiaArticle p + &.plb-rte-widget-plb_mlinput {
//			margin: $widget-margin-block-hover;
		}
	}

	&.selected {
		background-color: $color-background-selected;
	}

	// z-index trick
	&.hover {
		z-index: 10;
	}
}

// caption formatting and positioning
.plb-rte-widget-caption {
	.plb-rte-widget & {
		@include border-radius(3px);
		position: absolute;
		left: 15px;
		top: -8px;
		padding: 0 4px 1px;

		height: 12px;
		line-height: 12px;
		font-size: 10px;
		font-weight: bold;
		font-style: normal;
		text-decoration: none;
		text-transform: none;
		background-color: transparent;
		color: white;
		display: none;
		z-index: 1;
	}
	.plb-rte-widget.hover &, .plb-rte-widget.selected & {
		display: block;
	}
	.plb-rte-widget-plb_input & { background-color: #5ba70d; }
	.plb-rte-widget-plb_mlinput & { background-color: #a33e17; }
	.plb-rte-widget-plb_sinput & { background-color: #7f36ae; }
	.plb-rte-widget-plb_image & { background-color: #0043ad; }
}

// in-place edit button
.plb-rte-widget-edit-button-placer {
	.plb-rte-widget & {
		position: absolute;
		right: 3px;
		top: 2px;

		background-color: transparent;
		display: none;
		z-index: 1;
	}
	.plb-rte-widget.hover &, .plb-rte-widget.selected & {
		display: block;
	}
	.plb-rte-widget-plb_image & {
		top: 3px;
	}
}

// visual elements - image cover
.plb-rte-widget-cover {
	.plb-rte-widget & {
		position: absolute;
		display: block;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		z-index: 1;
	}
}

// visual elements - common
.plb-rte-widget-horiz-line, .plb-rte-widget-box-icon {
	.plb-rte-widget & {
		text-indent: -10000px;
		padding: 0;
		margin: 0;
		border-width: 0px;
	}
}

// visual elements - box icon
.plb-rte-widget-box-icon {
	.plb-rte-widget & {
		height: 14px;
		width: 14px;
		margin-top: -7px;
		margin-left: -7px;
		display: block;
		position: absolute;
		top: 50%;
		left: 0;
	}

	.plb-rte-widget-plb_input & {
		background-image: url(/extensions/wikia/PageLayoutBuilder/widget/images/widget-box-plb_input.png); /* $wgCdnStylePath */
	}
	.plb-rte-widget-plb_mlinput & {
		background-image: url(/extensions/wikia/PageLayoutBuilder/widget/images/widget-box-plb_mlinput.png); /* $wgCdnStylePath */
	}
	.plb-rte-widget-plb_sinput & {
		background-image: url(/extensions/wikia/PageLayoutBuilder/widget/images/widget-box-plb_sinput.png); /* $wgCdnStylePath */
	}
	.plb-rte-widget-plb_image & {
		background-image: url(/extensions/wikia/PageLayoutBuilder/widget/images/widget-box-plb_image.png); /* $wgCdnStylePath */
	}
}

// visual elements - horizontal lines
.plb-rte-widget-horiz-line {
	.plb-rte-widget & {
		height: 1px;
		width: 26px;
		display: inline-block;
		position: absolute;
		left: -1px;
		border-left: 20px solid transparent;
		&.plb-rte-widget-top-line {
			top: -1px;
		}
		&.plb-rte-widget-bottom-line{
			bottom: -1px;
		}
	}

	.plb-rte-widget-plb_input & {
		border-color: #5ba70d;
		background-image: url(/extensions/wikia/PageLayoutBuilder/widget/images/widget-line-plb_input.png); /* $wgCdnStylePath */
	}
	.plb-rte-widget-plb_mlinput & {
		border-color: #a33e17;
		background-image: url(/extensions/wikia/PageLayoutBuilder/widget/images/widget-line-plb_mlinput.png); /* $wgCdnStylePath */
	}
	.plb-rte-widget-plb_sinput & {
		border-color: #7f36ae;
		background-image: url(/extensions/wikia/PageLayoutBuilder/widget/images/widget-line-plb_sinput.png); /* $wgCdnStylePath */
	}
	.plb-rte-widget-plb_image & {
		border-color: #0043ad;
		background-image: url(/extensions/wikia/PageLayoutBuilder/widget/images/widget-line-plb_image.png); /* $wgCdnStylePath */
	}
}

// image alignment
.plb-rte-widget {
	&.plb-rte-widget-align-left {
		display: block;
		float: left;
		clear: left;
	}
	&.plb-rte-widget-align-right {
		display: block;
		float: right;
		clear: right;
	}
	&.plb-rte-widget-align-center {
		display: block;
		margin-left: auto;
		margin-right: auto;
	}
}

.plb-rte-widget-clickable {
	.plb-rte-widget & {
		position: absolute;
		top: 0;
		bottom: 0;
		width: 20px;
		padding: 0;
		border: 0;
		margin: 0;
		z-index: 1;
	}
	.plb-rte-widget &.plb-rte-widget-clickable-left {
		left: -15px;
		width: 25px;
	}
	.plb-rte-widget &.plb-rte-widget-clickable-right {
		right: -10px;
	}
}

[unselectable=on] {
	-moz-user-select:none;
	-webkit-user-select:none;
}

// IE compatibility
HTML.CSS1Compat .plb-rte-widget span.plb-rte-widget-caption[contenteditable=false],
HTML.CSS1Compat .plb-rte-widget span.plb-rte-widget-edit-button-placer[contenteditable=false] {
	display: none;
}
HTML.CSS1Compat .plb-rte-widget.hover span.plb-rte-widget-caption[contenteditable=false],
HTML.CSS1Compat .plb-rte-widget.hover span.plb-rte-widget-edit-button-placer[contenteditable=false] {
	display: block;
}
HTML.CSS1Compat .plb-rte-widget.selected span.plb-rte-widget-caption[contenteditable=false],
HTML.CSS1Compat .plb-rte-widget.selected span.plb-rte-widget-edit-button-placer[contenteditable=false] {
	display: block;
}


