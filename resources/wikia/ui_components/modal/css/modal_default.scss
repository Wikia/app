@import "skins/oasis/css/core/color";
@import "skins/oasis/css/core/responsive-core";
@import "skins/oasis/css/core/responsive-font-sizing";
@import "skins/oasis/css/core/responsive-variables";
@import "skins/oasis/css/mixins/transform";
@import "skins/oasis/css/mixins/transition";
@import "skins/oasis/css/mixins/blackout";
@import "skins/oasis/css/mixins/box-sizing-border-box";
@import "skins/oasis/css/mixins/flexbox";

$close-image: '/resources/wikia/ui_components/modal/images/close-dark.svg';
$modal-secondary-color: darken( $color-page, 10% );
@if( $is-dark-wiki ) {
	$close-image: '/resources/wikia/ui_components/modal/images/close-light.svg';
	$modal-secondary-color: lighten( $color-page, 3% );
}
$modal-inactive-opacity: 0.3;

.modal,
.blackout {
	@include transition-shorthand( display 0.2s ease-in-out );
	opacity: 0;
	z-index: -1;
}

.modal {
	@include transform-translate( -50%, -50% );
	background-color: $color-page;
	border-radius: 2px;
	display: none;
	left: 50%;
	max-height: 90%;
	min-height: 200px;
	margin: 0;
	overflow: hidden;
	padding: 0;
	position: fixed;
	top: 50%;

	> header,
	> footer {
		@include flex-grow(0);
		@include flex-shrink(0);
		background-color: $modal-secondary-color;
		height: 60px; // flex-basis is not supported on Safari 6 so fixed height is needed
	}

	> header,
	> section,
	> footer {
		@include box-sizing-border-box;
		padding: 20px;
	}

	> header h3 {
		color: $color-text;
		font-size: 21px;
		font-weight: bold;
		margin: 0;
		overflow: hidden;
		padding: 0 20px 0 0;
		text-overflow: ellipsis;
		white-space: nowrap;
		word-wrap: normal;
	}

	> header .close {
		background: url( $close-image );
		background-size: 24px 24px;
		display: block;
		float: right;
		height: 24px;
		outline: none;
		text-indent: -9999px;
		width: 24px;
	}

	> footer .button {
		float: right;
	}

	> footer .button:last-child {
		margin: 0 20px;
	}

	> section {
		@include flex-grow(1);

		overflow: auto;
	}

	&.small {
		width: 400px;

	}

	&.medium {
		width: 700px;

		> section {
			height: 400px;
		}
	}

	&.small,
	&.medium {
		> section {
			overflow: hidden;
			overflow-y: auto;
		}
	}

	&.large {
		height: calc( 100% - 50px );
		width: calc( 100% - 50px );

		> footer {
			bottom: 0;
			left: 0;
			position: absolute;
			right: 0;
		}
	}

	.buttons {
		bottom: 15px;
		display: inline-block;
		position: absolute;
		right: 20px;
	}

	&.shown {
		@include flexbox();
		@include flex-direction(column);
		margin: 0;
		padding: 0;
		opacity: 1;
		overflow: hidden;
		z-index: $zTop;

		// IE flex-box fallback
		&.IE-flex-fix {
			display: block;
		}
	}
}

.blackout {
	@include blackout();
}

@media screen and (max-width: $breakpoint-min) {
	.modal.medium {
		width: 500px;
	}
}
