!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("search-tracking",[],t):"object"==typeof exports?exports["search-tracking"]=t():e["search-tracking"]=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var o,r;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(r="function"==typeof(o=i)?o.call(t,n,t,e):o)||(e.exports=r),!0,e.exports=i(),!!0){var c=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=c,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}return function t(n){function o(t,r,i){var c;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},o.defaults,i)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}i.expires=i.expires?i.expires.toUTCString():"";try{c=JSON.stringify(r),/^[\{\[]/.test(c)&&(r=c)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var u="";for(var f in i)i[f]&&(u+="; "+f,!0!==i[f]&&(u+="="+i[f]));return document.cookie=t+"="+r+u}t||(c={});for(var p=document.cookie?document.cookie.split("; "):[],a=/(%[0-9A-Z]{2})+/g,y=0;y<p.length;y++){var d=p[y].split("="),l=d.slice(1).join("=");this.json||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var m=d[0].replace(a,decodeURIComponent);if(l=n.read?n.read(l,m):n(l,m)||l.replace(a,decodeURIComponent),this.json)try{l=JSON.parse(l)}catch(e){}if(t===m){c=l;break}t||(c[m]=l)}catch(e){}}return c}}return o.set=o,o.get=function(e){return o.call(o,e)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(t,n){o(t,"",e(n,{expires:-1}))},o.withConverter=t,o}(function(){})})},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var r=function(e){return"string"==typeof e.searchPhrase&&"object"===o(e.results)&&e.results.every(function(e){var t=e.id,n=e.title,o=e.position,r=e.thumbnail;return"number"==typeof t&&"string"==typeof n&&"number"==typeof o&&"boolean"==typeof r})&&("number"==typeof e.page||"number"==typeof e.offset)&&"number"==typeof e.limit&&"string"==typeof e.sortOrder&&"string"==typeof e.timestamp&&"string"==typeof e.beaconId&&"string"==typeof e.app&&"number"==typeof e.siteId&&"string"==typeof e.siteDomain&&"string"==typeof e.searchId&&"string"==typeof e.pvUniqueId};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e){return"string"==typeof e.searchPhrase&&"object"===i(e.clicked)&&"string"==typeof e.clicked.type&&"number"==typeof e.clicked.id&&"string"==typeof e.clicked.title&&"number"==typeof e.clicked.position&&"boolean"==typeof e.clicked.thumbnail&&"string"==typeof e.timestamp&&"string"==typeof e.beaconId&&"string"==typeof e.app&&"number"==typeof e.siteId&&"string"==typeof e.siteDomain&&"string"==typeof e.searchId&&"string"==typeof e.pvUniqueId};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=function(e){return"string"==typeof e.enteredPhrase&&"object"===s(e.suggestions)&&e.suggestions.every(function(e){var t=e.type,n=e.value,o=e.id;return"string"==typeof t&&"string"==typeof n&&"number"==typeof o})&&"string"==typeof e.timestamp&&"string"==typeof e.beaconId&&"string"==typeof e.app&&"number"==typeof e.siteId&&"string"==typeof e.siteDomain&&"string"==typeof e.suggestionId&&"string"==typeof e.pvUniqueId};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e){return"string"==typeof e.enteredPhrase&&"object"===f(e.suggestions)&&e.suggestions.every(function(e){var t=e.type,n=e.value,o=e.id;return"string"==typeof t&&"string"==typeof n&&"number"==typeof o})&&"number"==typeof e.positionOfClickedItem&&"string"==typeof e.timestamp&&"string"==typeof e.beaconId&&"string"==typeof e.app&&"number"==typeof e.siteId&&"string"==typeof e.siteDomain&&"string"==typeof e.suggestionId&&"string"==typeof e.pvUniqueId},a=n(0),y=n.n(a),d="searchImpression",l="searchClicked",m="suggestImpression",g="suggestClicked",b=function(e){var t=e.type,n=e.payload;if(!function(e,t){switch(e){case d:return r(t);case l:return c(t);case m:return u(t);case g:return p(t);default:throw"Unrecognized event type for search tracking"}}(t,n))throw"One of the fileds in ".concat(t," is malformed or missing");!function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://beacon.wikia-services.com/__track/special/")+e+"/"+t,o=document.createElement("script");o.src=n,document.head.appendChild(o),o.onload=function(){document.head.removeChild(o)}}(t,function(e){return btoa(encodeURIComponent(JSON.stringify(e)))}(n))},v=function(e){return e.siteDomain=window.location.host,e.beaconId=y.a.get("wikia_beacon_id"),e.timestamp=(new Date).toISOString(),e},h=function(){var e,t;void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange");var n,o={siteDomain:window.location.host,url:window.location,beaconId:y.a.get("wikia_beacon_id"),timestamp:(new Date).toISOString(),pvUniqueId:window.pvUID||null},r=[(n={},n[document[e]?"focusOut":"focusIn"]=performance.now(),n)];document.addEventListener(t,function(){document[e]?r.push({focusOut:performance.now()}):r.push({focusIn:performance.now()})}),window.addEventListener("beforeunload",function(){if(!navigator.sendBeacon)return!0;r.push({focusOut:performance.now()});var e=Object.assign(o,{events:r}),t="https://beacon.wikia-services.com/__track/special/pageviewtime/".concat(btoa(encodeURIComponent(JSON.stringify(e))));return navigator.sendBeacon(t,new FormData)})};window.searchTracking={trackSearchClicked:function(e){b({type:l,payload:v(e)})},trackSearchImpression:function(e){b({type:d,payload:v(e)})},trackSuggestImpression:function(e){b({type:m,payload:v(e)})},trackSuggestClicked:function(e){b({type:g,payload:v(e)})}},window.pageviewTime=h}])});
//# sourceMappingURL=search-tracking.js.map